(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))i(c);new MutationObserver(c=>{for(const g of c)if(g.type==="childList")for(const v of g.addedNodes)v.tagName==="LINK"&&v.rel==="modulepreload"&&i(v)}).observe(document,{childList:!0,subtree:!0});function s(c){const g={};return c.integrity&&(g.integrity=c.integrity),c.referrerPolicy&&(g.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?g.credentials="include":c.crossOrigin==="anonymous"?g.credentials="omit":g.credentials="same-origin",g}function i(c){if(c.ep)return;c.ep=!0;const g=s(c);fetch(c.href,g)}})();/**
* @vue/shared v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function ar(e){const t=Object.create(null);for(const s of e.split(","))t[s]=1;return s=>s in t}const we={},Gt=[],ht=()=>{},$n=()=>!1,ri=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),lr=e=>e.startsWith("onUpdate:"),$e=Object.assign,cr=(e,t)=>{const s=e.indexOf(t);s>-1&&e.splice(s,1)},ya=Object.prototype.hasOwnProperty,Ce=(e,t)=>ya.call(e,t),he=Array.isArray,Xt=e=>Rs(e)==="[object Map]",ni=e=>Rs(e)==="[object Set]",Mr=e=>Rs(e)==="[object Date]",fe=e=>typeof e=="function",Te=e=>typeof e=="string",ft=e=>typeof e=="symbol",ke=e=>e!==null&&typeof e=="object",Nn=e=>(ke(e)||fe(e))&&fe(e.then)&&fe(e.catch),Un=Object.prototype.toString,Rs=e=>Un.call(e),Ca=e=>Rs(e).slice(8,-1),Wn=e=>Rs(e)==="[object Object]",hr=e=>Te(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,hs=ar(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),oi=e=>{const t=Object.create(null);return(s=>t[s]||(t[s]=e(s)))},wa=/-\w/g,Ze=oi(e=>e.replace(wa,t=>t.slice(1).toUpperCase())),Ea=/\B([A-Z])/g,jt=oi(e=>e.replace(Ea,"-$1").toLowerCase()),ai=oi(e=>e.charAt(0).toUpperCase()+e.slice(1)),wi=oi(e=>e?`on${ai(e)}`:""),Tt=(e,t)=>!Object.is(e,t),Hs=(e,...t)=>{for(let s=0;s<e.length;s++)e[s](...t)},jn=(e,t,s,i=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:i,value:s})},Ks=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let Ir;const li=()=>Ir||(Ir=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function ci(e){if(he(e)){const t={};for(let s=0;s<e.length;s++){const i=e[s],c=Te(i)?Aa(i):ci(i);if(c)for(const g in c)t[g]=c[g]}return t}else if(Te(e)||ke(e))return e}const ka=/;(?![^(]*\))/g,xa=/:([^]+)/,Ra=/\/\*[^]*?\*\//g;function Aa(e){const t={};return e.replace(Ra,"").split(ka).forEach(s=>{if(s){const i=s.split(xa);i.length>1&&(t[i[0].trim()]=i[1].trim())}}),t}function ut(e){let t="";if(Te(e))t=e;else if(he(e))for(let s=0;s<e.length;s++){const i=ut(e[s]);i&&(t+=i+" ")}else if(ke(e))for(const s in e)e[s]&&(t+=s+" ");return t.trim()}const La="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Da=ar(La);function qn(e){return!!e||e===""}function Ta(e,t){if(e.length!==t.length)return!1;let s=!0;for(let i=0;s&&i<e.length;i++)s=hi(e[i],t[i]);return s}function hi(e,t){if(e===t)return!0;let s=Mr(e),i=Mr(t);if(s||i)return s&&i?e.getTime()===t.getTime():!1;if(s=ft(e),i=ft(t),s||i)return e===t;if(s=he(e),i=he(t),s||i)return s&&i?Ta(e,t):!1;if(s=ke(e),i=ke(t),s||i){if(!s||!i)return!1;const c=Object.keys(e).length,g=Object.keys(t).length;if(c!==g)return!1;for(const v in e){const r=e.hasOwnProperty(v),n=t.hasOwnProperty(v);if(r&&!n||!r&&n||!hi(e[v],t[v]))return!1}}return String(e)===String(t)}function Ba(e,t){return e.findIndex(s=>hi(s,t))}const zn=e=>!!(e&&e.__v_isRef===!0),ve=e=>Te(e)?e:e==null?"":he(e)||ke(e)&&(e.toString===Un||!fe(e.toString))?zn(e)?ve(e.value):JSON.stringify(e,Kn,2):String(e),Kn=(e,t)=>zn(t)?Kn(e,t.value):Xt(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((s,[i,c],g)=>(s[Ei(i,g)+" =>"]=c,s),{})}:ni(t)?{[`Set(${t.size})`]:[...t.values()].map(s=>Ei(s))}:ft(t)?Ei(t):ke(t)&&!he(t)&&!Wn(t)?String(t):t,Ei=(e,t="")=>{var s;return ft(e)?`Symbol(${(s=e.description)!=null?s:t})`:e};/**
* @vue/reactivity v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let je;class Oa{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=je,!t&&je&&(this.index=(je.scopes||(je.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,s;if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].pause();for(t=0,s=this.effects.length;t<s;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,s;if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].resume();for(t=0,s=this.effects.length;t<s;t++)this.effects[t].resume()}}run(t){if(this._active){const s=je;try{return je=this,t()}finally{je=s}}}on(){++this._on===1&&(this.prevScope=je,je=this)}off(){this._on>0&&--this._on===0&&(je=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let s,i;for(s=0,i=this.effects.length;s<i;s++)this.effects[s].stop();for(this.effects.length=0,s=0,i=this.cleanups.length;s<i;s++)this.cleanups[s]();if(this.cleanups.length=0,this.scopes){for(s=0,i=this.scopes.length;s<i;s++)this.scopes[s].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const c=this.parent.scopes.pop();c&&c!==this&&(this.parent.scopes[this.index]=c,c.index=this.index)}this.parent=void 0}}}function Pa(){return je}let xe;const ki=new WeakSet;class Vn{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,je&&je.active&&je.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,ki.has(this)&&(ki.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Xn(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Hr(this),Jn(this);const t=xe,s=tt;xe=this,tt=!0;try{return this.fn()}finally{Yn(this),xe=t,tt=s,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)fr(t);this.deps=this.depsTail=void 0,Hr(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?ki.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Ui(this)&&this.run()}get dirty(){return Ui(this)}}let Gn=0,us,ds;function Xn(e,t=!1){if(e.flags|=8,t){e.next=ds,ds=e;return}e.next=us,us=e}function ur(){Gn++}function dr(){if(--Gn>0)return;if(ds){let t=ds;for(ds=void 0;t;){const s=t.next;t.next=void 0,t.flags&=-9,t=s}}let e;for(;us;){let t=us;for(us=void 0;t;){const s=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(i){e||(e=i)}t=s}}if(e)throw e}function Jn(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Yn(e){let t,s=e.depsTail,i=s;for(;i;){const c=i.prevDep;i.version===-1?(i===s&&(s=c),fr(i),Ma(i)):t=i,i.dep.activeLink=i.prevActiveLink,i.prevActiveLink=void 0,i=c}e.deps=t,e.depsTail=s}function Ui(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Zn(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Zn(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===bs)||(e.globalVersion=bs,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!Ui(e))))return;e.flags|=2;const t=e.dep,s=xe,i=tt;xe=e,tt=!0;try{Jn(e);const c=e.fn(e._value);(t.version===0||Tt(c,e._value))&&(e.flags|=128,e._value=c,t.version++)}catch(c){throw t.version++,c}finally{xe=s,tt=i,Yn(e),e.flags&=-3}}function fr(e,t=!1){const{dep:s,prevSub:i,nextSub:c}=e;if(i&&(i.nextSub=c,e.prevSub=void 0),c&&(c.prevSub=i,e.nextSub=void 0),s.subs===e&&(s.subs=i,!i&&s.computed)){s.computed.flags&=-5;for(let g=s.computed.deps;g;g=g.nextDep)fr(g,!0)}!t&&!--s.sc&&s.map&&s.map.delete(s.key)}function Ma(e){const{prevDep:t,nextDep:s}=e;t&&(t.nextDep=s,e.prevDep=void 0),s&&(s.prevDep=t,e.nextDep=void 0)}let tt=!0;const Qn=[];function Et(){Qn.push(tt),tt=!1}function kt(){const e=Qn.pop();tt=e===void 0?!0:e}function Hr(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const s=xe;xe=void 0;try{t()}finally{xe=s}}}let bs=0;class Ia{constructor(t,s){this.sub=t,this.dep=s,this.version=s.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class _r{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!xe||!tt||xe===this.computed)return;let s=this.activeLink;if(s===void 0||s.sub!==xe)s=this.activeLink=new Ia(xe,this),xe.deps?(s.prevDep=xe.depsTail,xe.depsTail.nextDep=s,xe.depsTail=s):xe.deps=xe.depsTail=s,eo(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const i=s.nextDep;i.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=i),s.prevDep=xe.depsTail,s.nextDep=void 0,xe.depsTail.nextDep=s,xe.depsTail=s,xe.deps===s&&(xe.deps=i)}return s}trigger(t){this.version++,bs++,this.notify(t)}notify(t){ur();try{for(let s=this.subs;s;s=s.prevSub)s.sub.notify()&&s.sub.dep.notify()}finally{dr()}}}function eo(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let i=t.deps;i;i=i.nextDep)eo(i)}const s=e.dep.subs;s!==e&&(e.prevSub=s,s&&(s.nextSub=e)),e.dep.subs=e}}const Wi=new WeakMap,Wt=Symbol(""),ji=Symbol(""),ys=Symbol("");function Me(e,t,s){if(tt&&xe){let i=Wi.get(e);i||Wi.set(e,i=new Map);let c=i.get(s);c||(i.set(s,c=new _r),c.map=i,c.key=s),c.track()}}function bt(e,t,s,i,c,g){const v=Wi.get(e);if(!v){bs++;return}const r=n=>{n&&n.trigger()};if(ur(),t==="clear")v.forEach(r);else{const n=he(e),h=n&&hr(s);if(n&&s==="length"){const f=Number(i);v.forEach((a,_)=>{(_==="length"||_===ys||!ft(_)&&_>=f)&&r(a)})}else switch((s!==void 0||v.has(void 0))&&r(v.get(s)),h&&r(v.get(ys)),t){case"add":n?h&&r(v.get("length")):(r(v.get(Wt)),Xt(e)&&r(v.get(ji)));break;case"delete":n||(r(v.get(Wt)),Xt(e)&&r(v.get(ji)));break;case"set":Xt(e)&&r(v.get(Wt));break}}dr()}function qt(e){const t=ye(e);return t===e?t:(Me(t,"iterate",ys),Ye(e)?t:t.map(Oe))}function ui(e){return Me(e=ye(e),"iterate",ys),e}const Ha={__proto__:null,[Symbol.iterator](){return xi(this,Symbol.iterator,Oe)},concat(...e){return qt(this).concat(...e.map(t=>he(t)?qt(t):t))},entries(){return xi(this,"entries",e=>(e[1]=Oe(e[1]),e))},every(e,t){return vt(this,"every",e,t,void 0,arguments)},filter(e,t){return vt(this,"filter",e,t,s=>s.map(Oe),arguments)},find(e,t){return vt(this,"find",e,t,Oe,arguments)},findIndex(e,t){return vt(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return vt(this,"findLast",e,t,Oe,arguments)},findLastIndex(e,t){return vt(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return vt(this,"forEach",e,t,void 0,arguments)},includes(...e){return Ri(this,"includes",e)},indexOf(...e){return Ri(this,"indexOf",e)},join(e){return qt(this).join(e)},lastIndexOf(...e){return Ri(this,"lastIndexOf",e)},map(e,t){return vt(this,"map",e,t,void 0,arguments)},pop(){return rs(this,"pop")},push(...e){return rs(this,"push",e)},reduce(e,...t){return Fr(this,"reduce",e,t)},reduceRight(e,...t){return Fr(this,"reduceRight",e,t)},shift(){return rs(this,"shift")},some(e,t){return vt(this,"some",e,t,void 0,arguments)},splice(...e){return rs(this,"splice",e)},toReversed(){return qt(this).toReversed()},toSorted(e){return qt(this).toSorted(e)},toSpliced(...e){return qt(this).toSpliced(...e)},unshift(...e){return rs(this,"unshift",e)},values(){return xi(this,"values",Oe)}};function xi(e,t,s){const i=ui(e),c=i[t]();return i!==e&&!Ye(e)&&(c._next=c.next,c.next=()=>{const g=c._next();return g.done||(g.value=s(g.value)),g}),c}const Fa=Array.prototype;function vt(e,t,s,i,c,g){const v=ui(e),r=v!==e&&!Ye(e),n=v[t];if(n!==Fa[t]){const a=n.apply(e,g);return r?Oe(a):a}let h=s;v!==e&&(r?h=function(a,_){return s.call(this,Oe(a),_,e)}:s.length>2&&(h=function(a,_){return s.call(this,a,_,e)}));const f=n.call(v,h,i);return r&&c?c(f):f}function Fr(e,t,s,i){const c=ui(e);let g=s;return c!==e&&(Ye(e)?s.length>3&&(g=function(v,r,n){return s.call(this,v,r,n,e)}):g=function(v,r,n){return s.call(this,v,Oe(r),n,e)}),c[t](g,...i)}function Ri(e,t,s){const i=ye(e);Me(i,"iterate",ys);const c=i[t](...s);return(c===-1||c===!1)&&vr(s[0])?(s[0]=ye(s[0]),i[t](...s)):c}function rs(e,t,s=[]){Et(),ur();const i=ye(e)[t].apply(e,s);return dr(),kt(),i}const $a=ar("__proto__,__v_isRef,__isVue"),to=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(ft));function Na(e){ft(e)||(e=String(e));const t=ye(this);return Me(t,"has",e),t.hasOwnProperty(e)}class so{constructor(t=!1,s=!1){this._isReadonly=t,this._isShallow=s}get(t,s,i){if(s==="__v_skip")return t.__v_skip;const c=this._isReadonly,g=this._isShallow;if(s==="__v_isReactive")return!c;if(s==="__v_isReadonly")return c;if(s==="__v_isShallow")return g;if(s==="__v_raw")return i===(c?g?Ja:oo:g?no:ro).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(i)?t:void 0;const v=he(t);if(!c){let n;if(v&&(n=Ha[s]))return n;if(s==="hasOwnProperty")return Na}const r=Reflect.get(t,s,Fe(t)?t:i);if((ft(s)?to.has(s):$a(s))||(c||Me(t,"get",s),g))return r;if(Fe(r)){const n=v&&hr(s)?r:r.value;return c&&ke(n)?zi(n):n}return ke(r)?c?zi(r):di(r):r}}class io extends so{constructor(t=!1){super(!1,t)}set(t,s,i,c){let g=t[s];if(!this._isShallow){const n=Ot(g);if(!Ye(i)&&!Ot(i)&&(g=ye(g),i=ye(i)),!he(t)&&Fe(g)&&!Fe(i))return n||(g.value=i),!0}const v=he(t)&&hr(s)?Number(s)<t.length:Ce(t,s),r=Reflect.set(t,s,i,Fe(t)?t:c);return t===ye(c)&&(v?Tt(i,g)&&bt(t,"set",s,i):bt(t,"add",s,i)),r}deleteProperty(t,s){const i=Ce(t,s);t[s];const c=Reflect.deleteProperty(t,s);return c&&i&&bt(t,"delete",s,void 0),c}has(t,s){const i=Reflect.has(t,s);return(!ft(s)||!to.has(s))&&Me(t,"has",s),i}ownKeys(t){return Me(t,"iterate",he(t)?"length":Wt),Reflect.ownKeys(t)}}class Ua extends so{constructor(t=!1){super(!0,t)}set(t,s){return!0}deleteProperty(t,s){return!0}}const Wa=new io,ja=new Ua,qa=new io(!0);const qi=e=>e,Bs=e=>Reflect.getPrototypeOf(e);function za(e,t,s){return function(...i){const c=this.__v_raw,g=ye(c),v=Xt(g),r=e==="entries"||e===Symbol.iterator&&v,n=e==="keys"&&v,h=c[e](...i),f=s?qi:t?Vs:Oe;return!t&&Me(g,"iterate",n?ji:Wt),{next(){const{value:a,done:_}=h.next();return _?{value:a,done:_}:{value:r?[f(a[0]),f(a[1])]:f(a),done:_}},[Symbol.iterator](){return this}}}}function Os(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function Ka(e,t){const s={get(c){const g=this.__v_raw,v=ye(g),r=ye(c);e||(Tt(c,r)&&Me(v,"get",c),Me(v,"get",r));const{has:n}=Bs(v),h=t?qi:e?Vs:Oe;if(n.call(v,c))return h(g.get(c));if(n.call(v,r))return h(g.get(r));g!==v&&g.get(c)},get size(){const c=this.__v_raw;return!e&&Me(ye(c),"iterate",Wt),c.size},has(c){const g=this.__v_raw,v=ye(g),r=ye(c);return e||(Tt(c,r)&&Me(v,"has",c),Me(v,"has",r)),c===r?g.has(c):g.has(c)||g.has(r)},forEach(c,g){const v=this,r=v.__v_raw,n=ye(r),h=t?qi:e?Vs:Oe;return!e&&Me(n,"iterate",Wt),r.forEach((f,a)=>c.call(g,h(f),h(a),v))}};return $e(s,e?{add:Os("add"),set:Os("set"),delete:Os("delete"),clear:Os("clear")}:{add(c){!t&&!Ye(c)&&!Ot(c)&&(c=ye(c));const g=ye(this);return Bs(g).has.call(g,c)||(g.add(c),bt(g,"add",c,c)),this},set(c,g){!t&&!Ye(g)&&!Ot(g)&&(g=ye(g));const v=ye(this),{has:r,get:n}=Bs(v);let h=r.call(v,c);h||(c=ye(c),h=r.call(v,c));const f=n.call(v,c);return v.set(c,g),h?Tt(g,f)&&bt(v,"set",c,g):bt(v,"add",c,g),this},delete(c){const g=ye(this),{has:v,get:r}=Bs(g);let n=v.call(g,c);n||(c=ye(c),n=v.call(g,c)),r&&r.call(g,c);const h=g.delete(c);return n&&bt(g,"delete",c,void 0),h},clear(){const c=ye(this),g=c.size!==0,v=c.clear();return g&&bt(c,"clear",void 0,void 0),v}}),["keys","values","entries",Symbol.iterator].forEach(c=>{s[c]=za(c,e,t)}),s}function pr(e,t){const s=Ka(e,t);return(i,c,g)=>c==="__v_isReactive"?!e:c==="__v_isReadonly"?e:c==="__v_raw"?i:Reflect.get(Ce(s,c)&&c in i?s:i,c,g)}const Va={get:pr(!1,!1)},Ga={get:pr(!1,!0)},Xa={get:pr(!0,!1)};const ro=new WeakMap,no=new WeakMap,oo=new WeakMap,Ja=new WeakMap;function Ya(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Za(e){return e.__v_skip||!Object.isExtensible(e)?0:Ya(Ca(e))}function di(e){return Ot(e)?e:gr(e,!1,Wa,Va,ro)}function ao(e){return gr(e,!1,qa,Ga,no)}function zi(e){return gr(e,!0,ja,Xa,oo)}function gr(e,t,s,i,c){if(!ke(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const g=Za(e);if(g===0)return e;const v=c.get(e);if(v)return v;const r=new Proxy(e,g===2?i:s);return c.set(e,r),r}function Jt(e){return Ot(e)?Jt(e.__v_raw):!!(e&&e.__v_isReactive)}function Ot(e){return!!(e&&e.__v_isReadonly)}function Ye(e){return!!(e&&e.__v_isShallow)}function vr(e){return e?!!e.__v_raw:!1}function ye(e){const t=e&&e.__v_raw;return t?ye(t):e}function Qa(e){return!Ce(e,"__v_skip")&&Object.isExtensible(e)&&jn(e,"__v_skip",!0),e}const Oe=e=>ke(e)?di(e):e,Vs=e=>ke(e)?zi(e):e;function Fe(e){return e?e.__v_isRef===!0:!1}function de(e){return lo(e,!1)}function el(e){return lo(e,!0)}function lo(e,t){return Fe(e)?e:new tl(e,t)}class tl{constructor(t,s){this.dep=new _r,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=s?t:ye(t),this._value=s?t:Oe(t),this.__v_isShallow=s}get value(){return this.dep.track(),this._value}set value(t){const s=this._rawValue,i=this.__v_isShallow||Ye(t)||Ot(t);t=i?t:ye(t),Tt(t,s)&&(this._rawValue=t,this._value=i?t:Oe(t),this.dep.trigger())}}function wt(e){return Fe(e)?e.value:e}const sl={get:(e,t,s)=>t==="__v_raw"?e:wt(Reflect.get(e,t,s)),set:(e,t,s,i)=>{const c=e[t];return Fe(c)&&!Fe(s)?(c.value=s,!0):Reflect.set(e,t,s,i)}};function co(e){return Jt(e)?e:new Proxy(e,sl)}class il{constructor(t,s,i){this.fn=t,this.setter=s,this._value=void 0,this.dep=new _r(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=bs-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!s,this.isSSR=i}notify(){if(this.flags|=16,!(this.flags&8)&&xe!==this)return Xn(this,!0),!0}get value(){const t=this.dep.track();return Zn(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function rl(e,t,s=!1){let i,c;return fe(e)?i=e:(i=e.get,c=e.set),new il(i,c,s)}const Ps={},Gs=new WeakMap;let $t;function nl(e,t=!1,s=$t){if(s){let i=Gs.get(s);i||Gs.set(s,i=[]),i.push(e)}}function ol(e,t,s=we){const{immediate:i,deep:c,once:g,scheduler:v,augmentJob:r,call:n}=s,h=p=>c?p:Ye(p)||c===!1||c===0?yt(p,1):yt(p);let f,a,_,m,w=!1,y=!1;if(Fe(e)?(a=()=>e.value,w=Ye(e)):Jt(e)?(a=()=>h(e),w=!0):he(e)?(y=!0,w=e.some(p=>Jt(p)||Ye(p)),a=()=>e.map(p=>{if(Fe(p))return p.value;if(Jt(p))return h(p);if(fe(p))return n?n(p,2):p()})):fe(e)?t?a=n?()=>n(e,2):e:a=()=>{if(_){Et();try{_()}finally{kt()}}const p=$t;$t=f;try{return n?n(e,3,[m]):e(m)}finally{$t=p}}:a=ht,t&&c){const p=a,b=c===!0?1/0:c;a=()=>yt(p(),b)}const o=Pa(),u=()=>{f.stop(),o&&o.active&&cr(o.effects,f)};if(g&&t){const p=t;t=(...b)=>{p(...b),u()}}let l=y?new Array(e.length).fill(Ps):Ps;const d=p=>{if(!(!(f.flags&1)||!f.dirty&&!p))if(t){const b=f.run();if(c||w||(y?b.some((E,x)=>Tt(E,l[x])):Tt(b,l))){_&&_();const E=$t;$t=f;try{const x=[b,l===Ps?void 0:y&&l[0]===Ps?[]:l,m];l=b,n?n(t,3,x):t(...x)}finally{$t=E}}}else f.run()};return r&&r(d),f=new Vn(a),f.scheduler=v?()=>v(d,!1):d,m=p=>nl(p,!1,f),_=f.onStop=()=>{const p=Gs.get(f);if(p){if(n)n(p,4);else for(const b of p)b();Gs.delete(f)}},t?i?d(!0):l=f.run():v?v(d.bind(null,!0),!0):f.run(),u.pause=f.pause.bind(f),u.resume=f.resume.bind(f),u.stop=u,u}function yt(e,t=1/0,s){if(t<=0||!ke(e)||e.__v_skip||(s=s||new Map,(s.get(e)||0)>=t))return e;if(s.set(e,t),t--,Fe(e))yt(e.value,t,s);else if(he(e))for(let i=0;i<e.length;i++)yt(e[i],t,s);else if(ni(e)||Xt(e))e.forEach(i=>{yt(i,t,s)});else if(Wn(e)){for(const i in e)yt(e[i],t,s);for(const i of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,i)&&yt(e[i],t,s)}return e}/**
* @vue/runtime-core v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function As(e,t,s,i){try{return i?e(...i):e()}catch(c){fi(c,t,s)}}function _t(e,t,s,i){if(fe(e)){const c=As(e,t,s,i);return c&&Nn(c)&&c.catch(g=>{fi(g,t,s)}),c}if(he(e)){const c=[];for(let g=0;g<e.length;g++)c.push(_t(e[g],t,s,i));return c}}function fi(e,t,s,i=!0){const c=t?t.vnode:null,{errorHandler:g,throwUnhandledErrorInProduction:v}=t&&t.appContext.config||we;if(t){let r=t.parent;const n=t.proxy,h=`https://vuejs.org/error-reference/#runtime-${s}`;for(;r;){const f=r.ec;if(f){for(let a=0;a<f.length;a++)if(f[a](e,n,h)===!1)return}r=r.parent}if(g){Et(),As(g,null,10,[e,n,h]),kt();return}}al(e,s,c,i,v)}function al(e,t,s,i=!0,c=!1){if(c)throw e;console.error(e)}const Ue=[];let lt=-1;const Yt=[];let At=null,zt=0;const ho=Promise.resolve();let Xs=null;function _i(e){const t=Xs||ho;return e?t.then(this?e.bind(this):e):t}function ll(e){let t=lt+1,s=Ue.length;for(;t<s;){const i=t+s>>>1,c=Ue[i],g=Cs(c);g<e||g===e&&c.flags&2?t=i+1:s=i}return t}function mr(e){if(!(e.flags&1)){const t=Cs(e),s=Ue[Ue.length-1];!s||!(e.flags&2)&&t>=Cs(s)?Ue.push(e):Ue.splice(ll(t),0,e),e.flags|=1,uo()}}function uo(){Xs||(Xs=ho.then(_o))}function cl(e){he(e)?Yt.push(...e):At&&e.id===-1?At.splice(zt+1,0,e):e.flags&1||(Yt.push(e),e.flags|=1),uo()}function $r(e,t,s=lt+1){for(;s<Ue.length;s++){const i=Ue[s];if(i&&i.flags&2){if(e&&i.id!==e.uid)continue;Ue.splice(s,1),s--,i.flags&4&&(i.flags&=-2),i(),i.flags&4||(i.flags&=-2)}}}function fo(e){if(Yt.length){const t=[...new Set(Yt)].sort((s,i)=>Cs(s)-Cs(i));if(Yt.length=0,At){At.push(...t);return}for(At=t,zt=0;zt<At.length;zt++){const s=At[zt];s.flags&4&&(s.flags&=-2),s.flags&8||s(),s.flags&=-2}At=null,zt=0}}const Cs=e=>e.id==null?e.flags&2?-1:1/0:e.id;function _o(e){try{for(lt=0;lt<Ue.length;lt++){const t=Ue[lt];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),As(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;lt<Ue.length;lt++){const t=Ue[lt];t&&(t.flags&=-2)}lt=-1,Ue.length=0,fo(),Xs=null,(Ue.length||Yt.length)&&_o()}}let Ke=null,po=null;function Js(e){const t=Ke;return Ke=e,po=e&&e.type.__scopeId||null,t}function Sr(e,t=Ke,s){if(!t||e._n)return e;const i=(...c)=>{i._d&&Qs(-1);const g=Js(t);let v;try{v=e(...c)}finally{Js(g),i._d&&Qs(1)}return v};return i._n=!0,i._c=!0,i._d=!0,i}function Re(e,t){if(Ke===null)return e;const s=mi(Ke),i=e.dirs||(e.dirs=[]);for(let c=0;c<t.length;c++){let[g,v,r,n=we]=t[c];g&&(fe(g)&&(g={mounted:g,updated:g}),g.deep&&yt(v),i.push({dir:g,instance:s,value:v,oldValue:void 0,arg:r,modifiers:n}))}return e}function Ht(e,t,s,i){const c=e.dirs,g=t&&t.dirs;for(let v=0;v<c.length;v++){const r=c[v];g&&(r.oldValue=g[v].value);let n=r.dir[i];n&&(Et(),_t(n,s,8,[e.el,r,e,t]),kt())}}const hl=Symbol("_vte"),ul=e=>e.__isTeleport,dl=Symbol("_leaveCb");function br(e,t){e.shapeFlag&6&&e.component?(e.transition=t,br(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function nt(e,t){return fe(e)?$e({name:e.name},t,{setup:e}):e}function go(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const Ys=new WeakMap;function fs(e,t,s,i,c=!1){if(he(e)){e.forEach((w,y)=>fs(w,t&&(he(t)?t[y]:t),s,i,c));return}if(_s(i)&&!c){i.shapeFlag&512&&i.type.__asyncResolved&&i.component.subTree.component&&fs(e,t,s,i.component.subTree);return}const g=i.shapeFlag&4?mi(i.component):i.el,v=c?null:g,{i:r,r:n}=e,h=t&&t.r,f=r.refs===we?r.refs={}:r.refs,a=r.setupState,_=ye(a),m=a===we?$n:w=>Ce(_,w);if(h!=null&&h!==n){if(Nr(t),Te(h))f[h]=null,m(h)&&(a[h]=null);else if(Fe(h)){h.value=null;const w=t;w.k&&(f[w.k]=null)}}if(fe(n))As(n,r,12,[v,f]);else{const w=Te(n),y=Fe(n);if(w||y){const o=()=>{if(e.f){const u=w?m(n)?a[n]:f[n]:n.value;if(c)he(u)&&cr(u,g);else if(he(u))u.includes(g)||u.push(g);else if(w)f[n]=[g],m(n)&&(a[n]=f[n]);else{const l=[g];n.value=l,e.k&&(f[e.k]=l)}}else w?(f[n]=v,m(n)&&(a[n]=v)):y&&(n.value=v,e.k&&(f[e.k]=v))};if(v){const u=()=>{o(),Ys.delete(e)};u.id=-1,Ys.set(e,u),ze(u,s)}else Nr(e),o()}}}function Nr(e){const t=Ys.get(e);t&&(t.flags|=8,Ys.delete(e))}li().requestIdleCallback;li().cancelIdleCallback;const _s=e=>!!e.type.__asyncLoader,vo=e=>e.type.__isKeepAlive;function fl(e,t){mo(e,"a",t)}function _l(e,t){mo(e,"da",t)}function mo(e,t,s=He){const i=e.__wdc||(e.__wdc=()=>{let c=s;for(;c;){if(c.isDeactivated)return;c=c.parent}return e()});if(pi(t,i,s),s){let c=s.parent;for(;c&&c.parent;)vo(c.parent.vnode)&&pl(i,t,s,c),c=c.parent}}function pl(e,t,s,i){const c=pi(t,e,i,!0);yr(()=>{cr(i[t],c)},s)}function pi(e,t,s=He,i=!1){if(s){const c=s[e]||(s[e]=[]),g=t.__weh||(t.__weh=(...v)=>{Et();const r=Ls(s),n=_t(t,s,e,v);return r(),kt(),n});return i?c.unshift(g):c.push(g),g}}const xt=e=>(t,s=He)=>{(!Es||e==="sp")&&pi(e,(...i)=>t(...i),s)},gl=xt("bm"),Mt=xt("m"),vl=xt("bu"),ml=xt("u"),Sl=xt("bum"),yr=xt("um"),bl=xt("sp"),yl=xt("rtg"),Cl=xt("rtc");function wl(e,t=He){pi("ec",e,t)}const El="components";function Qe(e,t){return xl(El,e,!0,t)||e}const kl=Symbol.for("v-ndc");function xl(e,t,s=!0,i=!1){const c=Ke||He;if(c){const g=c.type;{const r=gc(g,!1);if(r&&(r===t||r===Ze(t)||r===ai(Ze(t))))return g}const v=Ur(c[e]||g[e],t)||Ur(c.appContext[e],t);return!v&&i?g:v}}function Ur(e,t){return e&&(e[t]||e[Ze(t)]||e[ai(Ze(t))])}function Ut(e,t,s,i){let c;const g=s,v=he(e);if(v||Te(e)){const r=v&&Jt(e);let n=!1,h=!1;r&&(n=!Ye(e),h=Ot(e),e=ui(e)),c=new Array(e.length);for(let f=0,a=e.length;f<a;f++)c[f]=t(n?h?Vs(Oe(e[f])):Oe(e[f]):e[f],f,void 0,g)}else if(typeof e=="number"){c=new Array(e);for(let r=0;r<e;r++)c[r]=t(r+1,r,void 0,g)}else if(ke(e))if(e[Symbol.iterator])c=Array.from(e,(r,n)=>t(r,n,void 0,g));else{const r=Object.keys(e);c=new Array(r.length);for(let n=0,h=r.length;n<h;n++){const f=r[n];c[n]=t(e[f],f,n,g)}}else c=[];return c}const Ki=e=>e?Fo(e)?mi(e):Ki(e.parent):null,ps=$e(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Ki(e.parent),$root:e=>Ki(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>bo(e),$forceUpdate:e=>e.f||(e.f=()=>{mr(e.update)}),$nextTick:e=>e.n||(e.n=_i.bind(e.proxy)),$watch:e=>Vl.bind(e)}),Ai=(e,t)=>e!==we&&!e.__isScriptSetup&&Ce(e,t),Rl={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:s,setupState:i,data:c,props:g,accessCache:v,type:r,appContext:n}=e;let h;if(t[0]!=="$"){const m=v[t];if(m!==void 0)switch(m){case 1:return i[t];case 2:return c[t];case 4:return s[t];case 3:return g[t]}else{if(Ai(i,t))return v[t]=1,i[t];if(c!==we&&Ce(c,t))return v[t]=2,c[t];if((h=e.propsOptions[0])&&Ce(h,t))return v[t]=3,g[t];if(s!==we&&Ce(s,t))return v[t]=4,s[t];Vi&&(v[t]=0)}}const f=ps[t];let a,_;if(f)return t==="$attrs"&&Me(e.attrs,"get",""),f(e);if((a=r.__cssModules)&&(a=a[t]))return a;if(s!==we&&Ce(s,t))return v[t]=4,s[t];if(_=n.config.globalProperties,Ce(_,t))return _[t]},set({_:e},t,s){const{data:i,setupState:c,ctx:g}=e;return Ai(c,t)?(c[t]=s,!0):i!==we&&Ce(i,t)?(i[t]=s,!0):Ce(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(g[t]=s,!0)},has({_:{data:e,setupState:t,accessCache:s,ctx:i,appContext:c,propsOptions:g,type:v}},r){let n,h;return!!(s[r]||e!==we&&r[0]!=="$"&&Ce(e,r)||Ai(t,r)||(n=g[0])&&Ce(n,r)||Ce(i,r)||Ce(ps,r)||Ce(c.config.globalProperties,r)||(h=v.__cssModules)&&h[r])},defineProperty(e,t,s){return s.get!=null?e._.accessCache[t]=0:Ce(s,"value")&&this.set(e,t,s.value,null),Reflect.defineProperty(e,t,s)}};function Wr(e){return he(e)?e.reduce((t,s)=>(t[s]=null,t),{}):e}let Vi=!0;function Al(e){const t=bo(e),s=e.proxy,i=e.ctx;Vi=!1,t.beforeCreate&&jr(t.beforeCreate,e,"bc");const{data:c,computed:g,methods:v,watch:r,provide:n,inject:h,created:f,beforeMount:a,mounted:_,beforeUpdate:m,updated:w,activated:y,deactivated:o,beforeDestroy:u,beforeUnmount:l,destroyed:d,unmounted:p,render:b,renderTracked:E,renderTriggered:x,errorCaptured:S,serverPrefetch:k,expose:D,inheritAttrs:H,components:T,directives:I,filters:V}=t;if(h&&Ll(h,i,null),v)for(const K in v){const A=v[K];fe(A)&&(i[K]=A.bind(s))}if(c){const K=c.call(s,s);ke(K)&&(e.data=di(K))}if(Vi=!0,g)for(const K in g){const A=g[K],B=fe(A)?A.bind(s,s):fe(A.get)?A.get.bind(s,s):ht,P=!fe(A)&&fe(A.set)?A.set.bind(s):ht,F=We({get:B,set:P});Object.defineProperty(i,K,{enumerable:!0,configurable:!0,get:()=>F.value,set:Z=>F.value=Z})}if(r)for(const K in r)So(r[K],i,s,K);if(n){const K=fe(n)?n.call(s):n;Reflect.ownKeys(K).forEach(A=>{Fs(A,K[A])})}f&&jr(f,e,"c");function X(K,A){he(A)?A.forEach(B=>K(B.bind(s))):A&&K(A.bind(s))}if(X(gl,a),X(Mt,_),X(vl,m),X(ml,w),X(fl,y),X(_l,o),X(wl,S),X(Cl,E),X(yl,x),X(Sl,l),X(yr,p),X(bl,k),he(D))if(D.length){const K=e.exposed||(e.exposed={});D.forEach(A=>{Object.defineProperty(K,A,{get:()=>s[A],set:B=>s[A]=B,enumerable:!0})})}else e.exposed||(e.exposed={});b&&e.render===ht&&(e.render=b),H!=null&&(e.inheritAttrs=H),T&&(e.components=T),I&&(e.directives=I),k&&go(e)}function Ll(e,t,s=ht){he(e)&&(e=Gi(e));for(const i in e){const c=e[i];let g;ke(c)?"default"in c?g=st(c.from||i,c.default,!0):g=st(c.from||i):g=st(c),Fe(g)?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>g.value,set:v=>g.value=v}):t[i]=g}}function jr(e,t,s){_t(he(e)?e.map(i=>i.bind(t.proxy)):e.bind(t.proxy),t,s)}function So(e,t,s,i){let c=i.includes(".")?Oo(s,i):()=>s[i];if(Te(e)){const g=t[e];fe(g)&&gs(c,g)}else if(fe(e))gs(c,e.bind(s));else if(ke(e))if(he(e))e.forEach(g=>So(g,t,s,i));else{const g=fe(e.handler)?e.handler.bind(s):t[e.handler];fe(g)&&gs(c,g,e)}}function bo(e){const t=e.type,{mixins:s,extends:i}=t,{mixins:c,optionsCache:g,config:{optionMergeStrategies:v}}=e.appContext,r=g.get(t);let n;return r?n=r:!c.length&&!s&&!i?n=t:(n={},c.length&&c.forEach(h=>Zs(n,h,v,!0)),Zs(n,t,v)),ke(t)&&g.set(t,n),n}function Zs(e,t,s,i=!1){const{mixins:c,extends:g}=t;g&&Zs(e,g,s,!0),c&&c.forEach(v=>Zs(e,v,s,!0));for(const v in t)if(!(i&&v==="expose")){const r=Dl[v]||s&&s[v];e[v]=r?r(e[v],t[v]):t[v]}return e}const Dl={data:qr,props:zr,emits:zr,methods:ls,computed:ls,beforeCreate:Ne,created:Ne,beforeMount:Ne,mounted:Ne,beforeUpdate:Ne,updated:Ne,beforeDestroy:Ne,beforeUnmount:Ne,destroyed:Ne,unmounted:Ne,activated:Ne,deactivated:Ne,errorCaptured:Ne,serverPrefetch:Ne,components:ls,directives:ls,watch:Bl,provide:qr,inject:Tl};function qr(e,t){return t?e?function(){return $e(fe(e)?e.call(this,this):e,fe(t)?t.call(this,this):t)}:t:e}function Tl(e,t){return ls(Gi(e),Gi(t))}function Gi(e){if(he(e)){const t={};for(let s=0;s<e.length;s++)t[e[s]]=e[s];return t}return e}function Ne(e,t){return e?[...new Set([].concat(e,t))]:t}function ls(e,t){return e?$e(Object.create(null),e,t):t}function zr(e,t){return e?he(e)&&he(t)?[...new Set([...e,...t])]:$e(Object.create(null),Wr(e),Wr(t??{})):t}function Bl(e,t){if(!e)return t;if(!t)return e;const s=$e(Object.create(null),e);for(const i in t)s[i]=Ne(e[i],t[i]);return s}function yo(){return{app:null,config:{isNativeTag:$n,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Ol=0;function Pl(e,t){return function(i,c=null){fe(i)||(i=$e({},i)),c!=null&&!ke(c)&&(c=null);const g=yo(),v=new WeakSet,r=[];let n=!1;const h=g.app={_uid:Ol++,_component:i,_props:c,_container:null,_context:g,_instance:null,version:mc,get config(){return g.config},set config(f){},use(f,...a){return v.has(f)||(f&&fe(f.install)?(v.add(f),f.install(h,...a)):fe(f)&&(v.add(f),f(h,...a))),h},mixin(f){return g.mixins.includes(f)||g.mixins.push(f),h},component(f,a){return a?(g.components[f]=a,h):g.components[f]},directive(f,a){return a?(g.directives[f]=a,h):g.directives[f]},mount(f,a,_){if(!n){const m=h._ceVNode||Ee(i,c);return m.appContext=g,_===!0?_="svg":_===!1&&(_=void 0),e(m,f,_),n=!0,h._container=f,f.__vue_app__=h,mi(m.component)}},onUnmount(f){r.push(f)},unmount(){n&&(_t(r,h._instance,16),e(null,h._container),delete h._container.__vue_app__)},provide(f,a){return g.provides[f]=a,h},runWithContext(f){const a=Zt;Zt=h;try{return f()}finally{Zt=a}}};return h}}let Zt=null;function Fs(e,t){if(He){let s=He.provides;const i=He.parent&&He.parent.provides;i===s&&(s=He.provides=Object.create(i)),s[e]=t}}function st(e,t,s=!1){const i=uc();if(i||Zt){let c=Zt?Zt._context.provides:i?i.parent==null||i.ce?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:void 0;if(c&&e in c)return c[e];if(arguments.length>1)return s&&fe(t)?t.call(i&&i.proxy):t}}const Co={},wo=()=>Object.create(Co),Eo=e=>Object.getPrototypeOf(e)===Co;function Ml(e,t,s,i=!1){const c={},g=wo();e.propsDefaults=Object.create(null),ko(e,t,c,g);for(const v in e.propsOptions[0])v in c||(c[v]=void 0);s?e.props=i?c:ao(c):e.type.props?e.props=c:e.props=g,e.attrs=g}function Il(e,t,s,i){const{props:c,attrs:g,vnode:{patchFlag:v}}=e,r=ye(c),[n]=e.propsOptions;let h=!1;if((i||v>0)&&!(v&16)){if(v&8){const f=e.vnode.dynamicProps;for(let a=0;a<f.length;a++){let _=f[a];if(gi(e.emitsOptions,_))continue;const m=t[_];if(n)if(Ce(g,_))m!==g[_]&&(g[_]=m,h=!0);else{const w=Ze(_);c[w]=Xi(n,r,w,m,e,!1)}else m!==g[_]&&(g[_]=m,h=!0)}}}else{ko(e,t,c,g)&&(h=!0);let f;for(const a in r)(!t||!Ce(t,a)&&((f=jt(a))===a||!Ce(t,f)))&&(n?s&&(s[a]!==void 0||s[f]!==void 0)&&(c[a]=Xi(n,r,a,void 0,e,!0)):delete c[a]);if(g!==r)for(const a in g)(!t||!Ce(t,a))&&(delete g[a],h=!0)}h&&bt(e.attrs,"set","")}function ko(e,t,s,i){const[c,g]=e.propsOptions;let v=!1,r;if(t)for(let n in t){if(hs(n))continue;const h=t[n];let f;c&&Ce(c,f=Ze(n))?!g||!g.includes(f)?s[f]=h:(r||(r={}))[f]=h:gi(e.emitsOptions,n)||(!(n in i)||h!==i[n])&&(i[n]=h,v=!0)}if(g){const n=ye(s),h=r||we;for(let f=0;f<g.length;f++){const a=g[f];s[a]=Xi(c,n,a,h[a],e,!Ce(h,a))}}return v}function Xi(e,t,s,i,c,g){const v=e[s];if(v!=null){const r=Ce(v,"default");if(r&&i===void 0){const n=v.default;if(v.type!==Function&&!v.skipFactory&&fe(n)){const{propsDefaults:h}=c;if(s in h)i=h[s];else{const f=Ls(c);i=h[s]=n.call(null,t),f()}}else i=n;c.ce&&c.ce._setProp(s,i)}v[0]&&(g&&!r?i=!1:v[1]&&(i===""||i===jt(s))&&(i=!0))}return i}const Hl=new WeakMap;function xo(e,t,s=!1){const i=s?Hl:t.propsCache,c=i.get(e);if(c)return c;const g=e.props,v={},r=[];let n=!1;if(!fe(e)){const f=a=>{n=!0;const[_,m]=xo(a,t,!0);$e(v,_),m&&r.push(...m)};!s&&t.mixins.length&&t.mixins.forEach(f),e.extends&&f(e.extends),e.mixins&&e.mixins.forEach(f)}if(!g&&!n)return ke(e)&&i.set(e,Gt),Gt;if(he(g))for(let f=0;f<g.length;f++){const a=Ze(g[f]);Kr(a)&&(v[a]=we)}else if(g)for(const f in g){const a=Ze(f);if(Kr(a)){const _=g[f],m=v[a]=he(_)||fe(_)?{type:_}:$e({},_),w=m.type;let y=!1,o=!0;if(he(w))for(let u=0;u<w.length;++u){const l=w[u],d=fe(l)&&l.name;if(d==="Boolean"){y=!0;break}else d==="String"&&(o=!1)}else y=fe(w)&&w.name==="Boolean";m[0]=y,m[1]=o,(y||Ce(m,"default"))&&r.push(a)}}const h=[v,r];return ke(e)&&i.set(e,h),h}function Kr(e){return e[0]!=="$"&&!hs(e)}const Cr=e=>e==="_"||e==="_ctx"||e==="$stable",wr=e=>he(e)?e.map(ct):[ct(e)],Fl=(e,t,s)=>{if(t._n)return t;const i=Sr((...c)=>wr(t(...c)),s);return i._c=!1,i},Ro=(e,t,s)=>{const i=e._ctx;for(const c in e){if(Cr(c))continue;const g=e[c];if(fe(g))t[c]=Fl(c,g,i);else if(g!=null){const v=wr(g);t[c]=()=>v}}},Ao=(e,t)=>{const s=wr(t);e.slots.default=()=>s},Lo=(e,t,s)=>{for(const i in t)(s||!Cr(i))&&(e[i]=t[i])},$l=(e,t,s)=>{const i=e.slots=wo();if(e.vnode.shapeFlag&32){const c=t._;c?(Lo(i,t,s),s&&jn(i,"_",c,!0)):Ro(t,i)}else t&&Ao(e,t)},Nl=(e,t,s)=>{const{vnode:i,slots:c}=e;let g=!0,v=we;if(i.shapeFlag&32){const r=t._;r?s&&r===1?g=!1:Lo(c,t,s):(g=!t.$stable,Ro(t,c)),v=t}else t&&(Ao(e,t),v={default:1});if(g)for(const r in c)!Cr(r)&&v[r]==null&&delete c[r]},ze=tc;function Ul(e){return Wl(e)}function Wl(e,t){const s=li();s.__VUE__=!0;const{insert:i,remove:c,patchProp:g,createElement:v,createText:r,createComment:n,setText:h,setElementText:f,parentNode:a,nextSibling:_,setScopeId:m=ht,insertStaticContent:w}=e,y=(L,O,N,G=null,Y=null,j=null,ie=void 0,te=null,ee=!!O.dynamicChildren)=>{if(L===O)return;L&&!ns(L,O)&&(G=C(L),Z(L,Y,j,!0),L=null),O.patchFlag===-2&&(ee=!1,O.dynamicChildren=null);const{type:Q,ref:ae,shapeFlag:se}=O;switch(Q){case vi:o(L,O,N,G);break;case Pt:u(L,O,N,G);break;case $s:L==null&&l(O,N,G,ie);break;case Ie:T(L,O,N,G,Y,j,ie,te,ee);break;default:se&1?b(L,O,N,G,Y,j,ie,te,ee):se&6?I(L,O,N,G,Y,j,ie,te,ee):(se&64||se&128)&&Q.process(L,O,N,G,Y,j,ie,te,ee,U)}ae!=null&&Y?fs(ae,L&&L.ref,j,O||L,!O):ae==null&&L&&L.ref!=null&&fs(L.ref,null,j,L,!0)},o=(L,O,N,G)=>{if(L==null)i(O.el=r(O.children),N,G);else{const Y=O.el=L.el;O.children!==L.children&&h(Y,O.children)}},u=(L,O,N,G)=>{L==null?i(O.el=n(O.children||""),N,G):O.el=L.el},l=(L,O,N,G)=>{[L.el,L.anchor]=w(L.children,O,N,G,L.el,L.anchor)},d=({el:L,anchor:O},N,G)=>{let Y;for(;L&&L!==O;)Y=_(L),i(L,N,G),L=Y;i(O,N,G)},p=({el:L,anchor:O})=>{let N;for(;L&&L!==O;)N=_(L),c(L),L=N;c(O)},b=(L,O,N,G,Y,j,ie,te,ee)=>{O.type==="svg"?ie="svg":O.type==="math"&&(ie="mathml"),L==null?E(O,N,G,Y,j,ie,te,ee):k(L,O,Y,j,ie,te,ee)},E=(L,O,N,G,Y,j,ie,te)=>{let ee,Q;const{props:ae,shapeFlag:se,transition:ne,dirs:oe}=L;if(ee=L.el=v(L.type,j,ae&&ae.is,ae),se&8?f(ee,L.children):se&16&&S(L.children,ee,null,G,Y,Li(L,j),ie,te),oe&&Ht(L,null,G,"created"),x(ee,L,L.scopeId,ie,G),ae){for(const Se in ae)Se!=="value"&&!hs(Se)&&g(ee,Se,null,ae[Se],j,G);"value"in ae&&g(ee,"value",null,ae.value,j),(Q=ae.onVnodeBeforeMount)&&at(Q,G,L)}oe&&Ht(L,null,G,"beforeMount");const _e=jl(Y,ne);_e&&ne.beforeEnter(ee),i(ee,O,N),((Q=ae&&ae.onVnodeMounted)||_e||oe)&&ze(()=>{Q&&at(Q,G,L),_e&&ne.enter(ee),oe&&Ht(L,null,G,"mounted")},Y)},x=(L,O,N,G,Y)=>{if(N&&m(L,N),G)for(let j=0;j<G.length;j++)m(L,G[j]);if(Y){let j=Y.subTree;if(O===j||Mo(j.type)&&(j.ssContent===O||j.ssFallback===O)){const ie=Y.vnode;x(L,ie,ie.scopeId,ie.slotScopeIds,Y.parent)}}},S=(L,O,N,G,Y,j,ie,te,ee=0)=>{for(let Q=ee;Q<L.length;Q++){const ae=L[Q]=te?Lt(L[Q]):ct(L[Q]);y(null,ae,O,N,G,Y,j,ie,te)}},k=(L,O,N,G,Y,j,ie)=>{const te=O.el=L.el;let{patchFlag:ee,dynamicChildren:Q,dirs:ae}=O;ee|=L.patchFlag&16;const se=L.props||we,ne=O.props||we;let oe;if(N&&Ft(N,!1),(oe=ne.onVnodeBeforeUpdate)&&at(oe,N,O,L),ae&&Ht(O,L,N,"beforeUpdate"),N&&Ft(N,!0),(se.innerHTML&&ne.innerHTML==null||se.textContent&&ne.textContent==null)&&f(te,""),Q?D(L.dynamicChildren,Q,te,N,G,Li(O,Y),j):ie||A(L,O,te,null,N,G,Li(O,Y),j,!1),ee>0){if(ee&16)H(te,se,ne,N,Y);else if(ee&2&&se.class!==ne.class&&g(te,"class",null,ne.class,Y),ee&4&&g(te,"style",se.style,ne.style,Y),ee&8){const _e=O.dynamicProps;for(let Se=0;Se<_e.length;Se++){const pe=_e[Se],Be=se[pe],Ae=ne[pe];(Ae!==Be||pe==="value")&&g(te,pe,Be,Ae,Y,N)}}ee&1&&L.children!==O.children&&f(te,O.children)}else!ie&&Q==null&&H(te,se,ne,N,Y);((oe=ne.onVnodeUpdated)||ae)&&ze(()=>{oe&&at(oe,N,O,L),ae&&Ht(O,L,N,"updated")},G)},D=(L,O,N,G,Y,j,ie)=>{for(let te=0;te<O.length;te++){const ee=L[te],Q=O[te],ae=ee.el&&(ee.type===Ie||!ns(ee,Q)||ee.shapeFlag&198)?a(ee.el):N;y(ee,Q,ae,null,G,Y,j,ie,!0)}},H=(L,O,N,G,Y)=>{if(O!==N){if(O!==we)for(const j in O)!hs(j)&&!(j in N)&&g(L,j,O[j],null,Y,G);for(const j in N){if(hs(j))continue;const ie=N[j],te=O[j];ie!==te&&j!=="value"&&g(L,j,te,ie,Y,G)}"value"in N&&g(L,"value",O.value,N.value,Y)}},T=(L,O,N,G,Y,j,ie,te,ee)=>{const Q=O.el=L?L.el:r(""),ae=O.anchor=L?L.anchor:r("");let{patchFlag:se,dynamicChildren:ne,slotScopeIds:oe}=O;oe&&(te=te?te.concat(oe):oe),L==null?(i(Q,N,G),i(ae,N,G),S(O.children||[],N,ae,Y,j,ie,te,ee)):se>0&&se&64&&ne&&L.dynamicChildren?(D(L.dynamicChildren,ne,N,Y,j,ie,te),(O.key!=null||Y&&O===Y.subTree)&&Do(L,O,!0)):A(L,O,N,ae,Y,j,ie,te,ee)},I=(L,O,N,G,Y,j,ie,te,ee)=>{O.slotScopeIds=te,L==null?O.shapeFlag&512?Y.ctx.activate(O,N,G,ie,ee):V(O,N,G,Y,j,ie,ee):J(L,O,ee)},V=(L,O,N,G,Y,j,ie)=>{const te=L.component=hc(L,G,Y);if(vo(L)&&(te.ctx.renderer=U),dc(te,!1,ie),te.asyncDep){if(Y&&Y.registerDep(te,X,ie),!L.el){const ee=te.subTree=Ee(Pt);u(null,ee,O,N),L.placeholder=ee.el}}else X(te,L,O,N,Y,j,ie)},J=(L,O,N)=>{const G=O.component=L.component;if(Ql(L,O,N))if(G.asyncDep&&!G.asyncResolved){K(G,O,N);return}else G.next=O,G.update();else O.el=L.el,G.vnode=O},X=(L,O,N,G,Y,j,ie)=>{const te=()=>{if(L.isMounted){let{next:se,bu:ne,u:oe,parent:_e,vnode:Se}=L;{const me=To(L);if(me){se&&(se.el=Se.el,K(L,se,ie)),me.asyncDep.then(()=>{L.isUnmounted||te()});return}}let pe=se,Be;Ft(L,!1),se?(se.el=Se.el,K(L,se,ie)):se=Se,ne&&Hs(ne),(Be=se.props&&se.props.onVnodeBeforeUpdate)&&at(Be,_e,se,Se),Ft(L,!0);const Ae=Gr(L),Pe=L.subTree;L.subTree=Ae,y(Pe,Ae,a(Pe.el),C(Pe),L,Y,j),se.el=Ae.el,pe===null&&ec(L,Ae.el),oe&&ze(oe,Y),(Be=se.props&&se.props.onVnodeUpdated)&&ze(()=>at(Be,_e,se,Se),Y)}else{let se;const{el:ne,props:oe}=O,{bm:_e,m:Se,parent:pe,root:Be,type:Ae}=L,Pe=_s(O);Ft(L,!1),_e&&Hs(_e),!Pe&&(se=oe&&oe.onVnodeBeforeMount)&&at(se,pe,O),Ft(L,!0);{Be.ce&&Be.ce._def.shadowRoot!==!1&&Be.ce._injectChildStyle(Ae);const me=L.subTree=Gr(L);y(null,me,N,G,L,Y,j),O.el=me.el}if(Se&&ze(Se,Y),!Pe&&(se=oe&&oe.onVnodeMounted)){const me=O;ze(()=>at(se,pe,me),Y)}(O.shapeFlag&256||pe&&_s(pe.vnode)&&pe.vnode.shapeFlag&256)&&L.a&&ze(L.a,Y),L.isMounted=!0,O=N=G=null}};L.scope.on();const ee=L.effect=new Vn(te);L.scope.off();const Q=L.update=ee.run.bind(ee),ae=L.job=ee.runIfDirty.bind(ee);ae.i=L,ae.id=L.uid,ee.scheduler=()=>mr(ae),Ft(L,!0),Q()},K=(L,O,N)=>{O.component=L;const G=L.vnode.props;L.vnode=O,L.next=null,Il(L,O.props,G,N),Nl(L,O.children,N),Et(),$r(L),kt()},A=(L,O,N,G,Y,j,ie,te,ee=!1)=>{const Q=L&&L.children,ae=L?L.shapeFlag:0,se=O.children,{patchFlag:ne,shapeFlag:oe}=O;if(ne>0){if(ne&128){P(Q,se,N,G,Y,j,ie,te,ee);return}else if(ne&256){B(Q,se,N,G,Y,j,ie,te,ee);return}}oe&8?(ae&16&&ue(Q,Y,j),se!==Q&&f(N,se)):ae&16?oe&16?P(Q,se,N,G,Y,j,ie,te,ee):ue(Q,Y,j,!0):(ae&8&&f(N,""),oe&16&&S(se,N,G,Y,j,ie,te,ee))},B=(L,O,N,G,Y,j,ie,te,ee)=>{L=L||Gt,O=O||Gt;const Q=L.length,ae=O.length,se=Math.min(Q,ae);let ne;for(ne=0;ne<se;ne++){const oe=O[ne]=ee?Lt(O[ne]):ct(O[ne]);y(L[ne],oe,N,null,Y,j,ie,te,ee)}Q>ae?ue(L,Y,j,!0,!1,se):S(O,N,G,Y,j,ie,te,ee,se)},P=(L,O,N,G,Y,j,ie,te,ee)=>{let Q=0;const ae=O.length;let se=L.length-1,ne=ae-1;for(;Q<=se&&Q<=ne;){const oe=L[Q],_e=O[Q]=ee?Lt(O[Q]):ct(O[Q]);if(ns(oe,_e))y(oe,_e,N,null,Y,j,ie,te,ee);else break;Q++}for(;Q<=se&&Q<=ne;){const oe=L[se],_e=O[ne]=ee?Lt(O[ne]):ct(O[ne]);if(ns(oe,_e))y(oe,_e,N,null,Y,j,ie,te,ee);else break;se--,ne--}if(Q>se){if(Q<=ne){const oe=ne+1,_e=oe<ae?O[oe].el:G;for(;Q<=ne;)y(null,O[Q]=ee?Lt(O[Q]):ct(O[Q]),N,_e,Y,j,ie,te,ee),Q++}}else if(Q>ne)for(;Q<=se;)Z(L[Q],Y,j,!0),Q++;else{const oe=Q,_e=Q,Se=new Map;for(Q=_e;Q<=ne;Q++){const qe=O[Q]=ee?Lt(O[Q]):ct(O[Q]);qe.key!=null&&Se.set(qe.key,Q)}let pe,Be=0;const Ae=ne-_e+1;let Pe=!1,me=0;const It=new Array(Ae);for(Q=0;Q<Ae;Q++)It[Q]=0;for(Q=oe;Q<=se;Q++){const qe=L[Q];if(Be>=Ae){Z(qe,Y,j,!0);continue}let ot;if(qe.key!=null)ot=Se.get(qe.key);else for(pe=_e;pe<=ne;pe++)if(It[pe-_e]===0&&ns(qe,O[pe])){ot=pe;break}ot===void 0?Z(qe,Y,j,!0):(It[ot-_e]=Q+1,ot>=me?me=ot:Pe=!0,y(qe,O[ot],N,null,Y,j,ie,te,ee),Be++)}const Br=Pe?ql(It):Gt;for(pe=Br.length-1,Q=Ae-1;Q>=0;Q--){const qe=_e+Q,ot=O[qe],Or=O[qe+1],Pr=qe+1<ae?Or.el||Or.placeholder:G;It[Q]===0?y(null,ot,N,Pr,Y,j,ie,te,ee):Pe&&(pe<0||Q!==Br[pe]?F(ot,N,Pr,2):pe--)}}},F=(L,O,N,G,Y=null)=>{const{el:j,type:ie,transition:te,children:ee,shapeFlag:Q}=L;if(Q&6){F(L.component.subTree,O,N,G);return}if(Q&128){L.suspense.move(O,N,G);return}if(Q&64){ie.move(L,O,N,U);return}if(ie===Ie){i(j,O,N);for(let se=0;se<ee.length;se++)F(ee[se],O,N,G);i(L.anchor,O,N);return}if(ie===$s){d(L,O,N);return}if(G!==2&&Q&1&&te)if(G===0)te.beforeEnter(j),i(j,O,N),ze(()=>te.enter(j),Y);else{const{leave:se,delayLeave:ne,afterLeave:oe}=te,_e=()=>{L.ctx.isUnmounted?c(j):i(j,O,N)},Se=()=>{j._isLeaving&&j[dl](!0),se(j,()=>{_e(),oe&&oe()})};ne?ne(j,_e,Se):Se()}else i(j,O,N)},Z=(L,O,N,G=!1,Y=!1)=>{const{type:j,props:ie,ref:te,children:ee,dynamicChildren:Q,shapeFlag:ae,patchFlag:se,dirs:ne,cacheIndex:oe}=L;if(se===-2&&(Y=!1),te!=null&&(Et(),fs(te,null,N,L,!0),kt()),oe!=null&&(O.renderCache[oe]=void 0),ae&256){O.ctx.deactivate(L);return}const _e=ae&1&&ne,Se=!_s(L);let pe;if(Se&&(pe=ie&&ie.onVnodeBeforeUnmount)&&at(pe,O,L),ae&6)z(L.component,N,G);else{if(ae&128){L.suspense.unmount(N,G);return}_e&&Ht(L,null,O,"beforeUnmount"),ae&64?L.type.remove(L,O,N,U,G):Q&&!Q.hasOnce&&(j!==Ie||se>0&&se&64)?ue(Q,O,N,!1,!0):(j===Ie&&se&384||!Y&&ae&16)&&ue(ee,O,N),G&&q(L)}(Se&&(pe=ie&&ie.onVnodeUnmounted)||_e)&&ze(()=>{pe&&at(pe,O,L),_e&&Ht(L,null,O,"unmounted")},N)},q=L=>{const{type:O,el:N,anchor:G,transition:Y}=L;if(O===Ie){W(N,G);return}if(O===$s){p(L);return}const j=()=>{c(N),Y&&!Y.persisted&&Y.afterLeave&&Y.afterLeave()};if(L.shapeFlag&1&&Y&&!Y.persisted){const{leave:ie,delayLeave:te}=Y,ee=()=>ie(N,j);te?te(L.el,j,ee):ee()}else j()},W=(L,O)=>{let N;for(;L!==O;)N=_(L),c(L),L=N;c(O)},z=(L,O,N)=>{const{bum:G,scope:Y,job:j,subTree:ie,um:te,m:ee,a:Q}=L;Vr(ee),Vr(Q),G&&Hs(G),Y.stop(),j&&(j.flags|=8,Z(ie,L,O,N)),te&&ze(te,O),ze(()=>{L.isUnmounted=!0},O)},ue=(L,O,N,G=!1,Y=!1,j=0)=>{for(let ie=j;ie<L.length;ie++)Z(L[ie],O,N,G,Y)},C=L=>{if(L.shapeFlag&6)return C(L.component.subTree);if(L.shapeFlag&128)return L.suspense.next();const O=_(L.anchor||L.el),N=O&&O[hl];return N?_(N):O};let M=!1;const $=(L,O,N)=>{L==null?O._vnode&&Z(O._vnode,null,null,!0):y(O._vnode||null,L,O,null,null,null,N),O._vnode=L,M||(M=!0,$r(),fo(),M=!1)},U={p:y,um:Z,m:F,r:q,mt:V,mc:S,pc:A,pbc:D,n:C,o:e};return{render:$,hydrate:void 0,createApp:Pl($)}}function Li({type:e,props:t},s){return s==="svg"&&e==="foreignObject"||s==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:s}function Ft({effect:e,job:t},s){s?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function jl(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Do(e,t,s=!1){const i=e.children,c=t.children;if(he(i)&&he(c))for(let g=0;g<i.length;g++){const v=i[g];let r=c[g];r.shapeFlag&1&&!r.dynamicChildren&&((r.patchFlag<=0||r.patchFlag===32)&&(r=c[g]=Lt(c[g]),r.el=v.el),!s&&r.patchFlag!==-2&&Do(v,r)),r.type===vi&&r.patchFlag!==-1&&(r.el=v.el),r.type===Pt&&!r.el&&(r.el=v.el)}}function ql(e){const t=e.slice(),s=[0];let i,c,g,v,r;const n=e.length;for(i=0;i<n;i++){const h=e[i];if(h!==0){if(c=s[s.length-1],e[c]<h){t[i]=c,s.push(i);continue}for(g=0,v=s.length-1;g<v;)r=g+v>>1,e[s[r]]<h?g=r+1:v=r;h<e[s[g]]&&(g>0&&(t[i]=s[g-1]),s[g]=i)}}for(g=s.length,v=s[g-1];g-- >0;)s[g]=v,v=t[v];return s}function To(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:To(t)}function Vr(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const zl=Symbol.for("v-scx"),Kl=()=>st(zl);function gs(e,t,s){return Bo(e,t,s)}function Bo(e,t,s=we){const{immediate:i,deep:c,flush:g,once:v}=s,r=$e({},s),n=t&&i||!t&&g!=="post";let h;if(Es){if(g==="sync"){const m=Kl();h=m.__watcherHandles||(m.__watcherHandles=[])}else if(!n){const m=()=>{};return m.stop=ht,m.resume=ht,m.pause=ht,m}}const f=He;r.call=(m,w,y)=>_t(m,f,w,y);let a=!1;g==="post"?r.scheduler=m=>{ze(m,f&&f.suspense)}:g!=="sync"&&(a=!0,r.scheduler=(m,w)=>{w?m():mr(m)}),r.augmentJob=m=>{t&&(m.flags|=4),a&&(m.flags|=2,f&&(m.id=f.uid,m.i=f))};const _=ol(e,t,r);return Es&&(h?h.push(_):n&&_()),_}function Vl(e,t,s){const i=this.proxy,c=Te(e)?e.includes(".")?Oo(i,e):()=>i[e]:e.bind(i,i);let g;fe(t)?g=t:(g=t.handler,s=t);const v=Ls(this),r=Bo(c,g.bind(i),s);return v(),r}function Oo(e,t){const s=t.split(".");return()=>{let i=e;for(let c=0;c<s.length&&i;c++)i=i[s[c]];return i}}const Gl=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${Ze(t)}Modifiers`]||e[`${jt(t)}Modifiers`];function Xl(e,t,...s){if(e.isUnmounted)return;const i=e.vnode.props||we;let c=s;const g=t.startsWith("update:"),v=g&&Gl(i,t.slice(7));v&&(v.trim&&(c=s.map(f=>Te(f)?f.trim():f)),v.number&&(c=s.map(Ks)));let r,n=i[r=wi(t)]||i[r=wi(Ze(t))];!n&&g&&(n=i[r=wi(jt(t))]),n&&_t(n,e,6,c);const h=i[r+"Once"];if(h){if(!e.emitted)e.emitted={};else if(e.emitted[r])return;e.emitted[r]=!0,_t(h,e,6,c)}}const Jl=new WeakMap;function Po(e,t,s=!1){const i=s?Jl:t.emitsCache,c=i.get(e);if(c!==void 0)return c;const g=e.emits;let v={},r=!1;if(!fe(e)){const n=h=>{const f=Po(h,t,!0);f&&(r=!0,$e(v,f))};!s&&t.mixins.length&&t.mixins.forEach(n),e.extends&&n(e.extends),e.mixins&&e.mixins.forEach(n)}return!g&&!r?(ke(e)&&i.set(e,null),null):(he(g)?g.forEach(n=>v[n]=null):$e(v,g),ke(e)&&i.set(e,v),v)}function gi(e,t){return!e||!ri(t)?!1:(t=t.slice(2).replace(/Once$/,""),Ce(e,t[0].toLowerCase()+t.slice(1))||Ce(e,jt(t))||Ce(e,t))}function Gr(e){const{type:t,vnode:s,proxy:i,withProxy:c,propsOptions:[g],slots:v,attrs:r,emit:n,render:h,renderCache:f,props:a,data:_,setupState:m,ctx:w,inheritAttrs:y}=e,o=Js(e);let u,l;try{if(s.shapeFlag&4){const p=c||i,b=p;u=ct(h.call(b,p,f,a,m,_,w)),l=r}else{const p=t;u=ct(p.length>1?p(a,{attrs:r,slots:v,emit:n}):p(a,null)),l=t.props?r:Yl(r)}}catch(p){vs.length=0,fi(p,e,1),u=Ee(Pt)}let d=u;if(l&&y!==!1){const p=Object.keys(l),{shapeFlag:b}=d;p.length&&b&7&&(g&&p.some(lr)&&(l=Zl(l,g)),d=es(d,l,!1,!0))}return s.dirs&&(d=es(d,null,!1,!0),d.dirs=d.dirs?d.dirs.concat(s.dirs):s.dirs),s.transition&&br(d,s.transition),u=d,Js(o),u}const Yl=e=>{let t;for(const s in e)(s==="class"||s==="style"||ri(s))&&((t||(t={}))[s]=e[s]);return t},Zl=(e,t)=>{const s={};for(const i in e)(!lr(i)||!(i.slice(9)in t))&&(s[i]=e[i]);return s};function Ql(e,t,s){const{props:i,children:c,component:g}=e,{props:v,children:r,patchFlag:n}=t,h=g.emitsOptions;if(t.dirs||t.transition)return!0;if(s&&n>=0){if(n&1024)return!0;if(n&16)return i?Xr(i,v,h):!!v;if(n&8){const f=t.dynamicProps;for(let a=0;a<f.length;a++){const _=f[a];if(v[_]!==i[_]&&!gi(h,_))return!0}}}else return(c||r)&&(!r||!r.$stable)?!0:i===v?!1:i?v?Xr(i,v,h):!0:!!v;return!1}function Xr(e,t,s){const i=Object.keys(t);if(i.length!==Object.keys(e).length)return!0;for(let c=0;c<i.length;c++){const g=i[c];if(t[g]!==e[g]&&!gi(s,g))return!0}return!1}function ec({vnode:e,parent:t},s){for(;t;){const i=t.subTree;if(i.suspense&&i.suspense.activeBranch===e&&(i.el=e.el),i===e)(e=t.vnode).el=s,t=t.parent;else break}}const Mo=e=>e.__isSuspense;function tc(e,t){t&&t.pendingBranch?he(e)?t.effects.push(...e):t.effects.push(e):cl(e)}const Ie=Symbol.for("v-fgt"),vi=Symbol.for("v-txt"),Pt=Symbol.for("v-cmt"),$s=Symbol.for("v-stc"),vs=[];let Ve=null;function le(e=!1){vs.push(Ve=e?null:[])}function sc(){vs.pop(),Ve=vs[vs.length-1]||null}let ws=1;function Qs(e,t=!1){ws+=e,e<0&&Ve&&t&&(Ve.hasOnce=!0)}function Io(e){return e.dynamicChildren=ws>0?Ve||Gt:null,sc(),ws>0&&Ve&&Ve.push(e),e}function ce(e,t,s,i,c,g){return Io(R(e,t,s,i,c,g,!0))}function ic(e,t,s,i,c){return Io(Ee(e,t,s,i,c,!0))}function ei(e){return e?e.__v_isVNode===!0:!1}function ns(e,t){return e.type===t.type&&e.key===t.key}const Ho=({key:e})=>e??null,Ns=({ref:e,ref_key:t,ref_for:s})=>(typeof e=="number"&&(e=""+e),e!=null?Te(e)||Fe(e)||fe(e)?{i:Ke,r:e,k:t,f:!!s}:e:null);function R(e,t=null,s=null,i=0,c=null,g=e===Ie?0:1,v=!1,r=!1){const n={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Ho(t),ref:t&&Ns(t),scopeId:po,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:g,patchFlag:i,dynamicProps:c,dynamicChildren:null,appContext:null,ctx:Ke};return r?(Er(n,s),g&128&&e.normalize(n)):s&&(n.shapeFlag|=Te(s)?8:16),ws>0&&!v&&Ve&&(n.patchFlag>0||g&6)&&n.patchFlag!==32&&Ve.push(n),n}const Ee=rc;function rc(e,t=null,s=null,i=0,c=null,g=!1){if((!e||e===kl)&&(e=Pt),ei(e)){const r=es(e,t,!0);return s&&Er(r,s),ws>0&&!g&&Ve&&(r.shapeFlag&6?Ve[Ve.indexOf(e)]=r:Ve.push(r)),r.patchFlag=-2,r}if(vc(e)&&(e=e.__vccOpts),t){t=nc(t);let{class:r,style:n}=t;r&&!Te(r)&&(t.class=ut(r)),ke(n)&&(vr(n)&&!he(n)&&(n=$e({},n)),t.style=ci(n))}const v=Te(e)?1:Mo(e)?128:ul(e)?64:ke(e)?4:fe(e)?2:0;return R(e,t,s,i,c,v,g,!0)}function nc(e){return e?vr(e)||Eo(e)?$e({},e):e:null}function es(e,t,s=!1,i=!1){const{props:c,ref:g,patchFlag:v,children:r,transition:n}=e,h=t?ac(c||{},t):c,f={__v_isVNode:!0,__v_skip:!0,type:e.type,props:h,key:h&&Ho(h),ref:t&&t.ref?s&&g?he(g)?g.concat(Ns(t)):[g,Ns(t)]:Ns(t):g,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:r,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Ie?v===-1?16:v|16:v,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:n,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&es(e.ssContent),ssFallback:e.ssFallback&&es(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return n&&i&&br(f,n.clone(f)),f}function Ge(e=" ",t=0){return Ee(vi,null,e,t)}function oc(e,t){const s=Ee($s,null,e);return s.staticCount=t,s}function Ct(e="",t=!1){return t?(le(),ic(Pt,null,e)):Ee(Pt,null,e)}function ct(e){return e==null||typeof e=="boolean"?Ee(Pt):he(e)?Ee(Ie,null,e.slice()):ei(e)?Lt(e):Ee(vi,null,String(e))}function Lt(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:es(e)}function Er(e,t){let s=0;const{shapeFlag:i}=e;if(t==null)t=null;else if(he(t))s=16;else if(typeof t=="object")if(i&65){const c=t.default;c&&(c._c&&(c._d=!1),Er(e,c()),c._c&&(c._d=!0));return}else{s=32;const c=t._;!c&&!Eo(t)?t._ctx=Ke:c===3&&Ke&&(Ke.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else fe(t)?(t={default:t,_ctx:Ke},s=32):(t=String(t),i&64?(s=16,t=[Ge(t)]):s=8);e.children=t,e.shapeFlag|=s}function ac(...e){const t={};for(let s=0;s<e.length;s++){const i=e[s];for(const c in i)if(c==="class")t.class!==i.class&&(t.class=ut([t.class,i.class]));else if(c==="style")t.style=ci([t.style,i.style]);else if(ri(c)){const g=t[c],v=i[c];v&&g!==v&&!(he(g)&&g.includes(v))&&(t[c]=g?[].concat(g,v):v)}else c!==""&&(t[c]=i[c])}return t}function at(e,t,s,i=null){_t(e,t,7,[s,i])}const lc=yo();let cc=0;function hc(e,t,s){const i=e.type,c=(t?t.appContext:e.appContext)||lc,g={uid:cc++,vnode:e,type:i,parent:t,appContext:c,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Oa(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(c.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:xo(i,c),emitsOptions:Po(i,c),emit:null,emitted:null,propsDefaults:we,inheritAttrs:i.inheritAttrs,ctx:we,data:we,props:we,attrs:we,slots:we,refs:we,setupState:we,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return g.ctx={_:g},g.root=t?t.root:g,g.emit=Xl.bind(null,g),e.ce&&e.ce(g),g}let He=null;const uc=()=>He||Ke;let ti,Ji;{const e=li(),t=(s,i)=>{let c;return(c=e[s])||(c=e[s]=[]),c.push(i),g=>{c.length>1?c.forEach(v=>v(g)):c[0](g)}};ti=t("__VUE_INSTANCE_SETTERS__",s=>He=s),Ji=t("__VUE_SSR_SETTERS__",s=>Es=s)}const Ls=e=>{const t=He;return ti(e),e.scope.on(),()=>{e.scope.off(),ti(t)}},Jr=()=>{He&&He.scope.off(),ti(null)};function Fo(e){return e.vnode.shapeFlag&4}let Es=!1;function dc(e,t=!1,s=!1){t&&Ji(t);const{props:i,children:c}=e.vnode,g=Fo(e);Ml(e,i,g,t),$l(e,c,s||t);const v=g?fc(e,t):void 0;return t&&Ji(!1),v}function fc(e,t){const s=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Rl);const{setup:i}=s;if(i){Et();const c=e.setupContext=i.length>1?pc(e):null,g=Ls(e),v=As(i,e,0,[e.props,c]),r=Nn(v);if(kt(),g(),(r||e.sp)&&!_s(e)&&go(e),r){if(v.then(Jr,Jr),t)return v.then(n=>{Yr(e,n)}).catch(n=>{fi(n,e,0)});e.asyncDep=v}else Yr(e,v)}else $o(e)}function Yr(e,t,s){fe(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:ke(t)&&(e.setupState=co(t)),$o(e)}function $o(e,t,s){const i=e.type;e.render||(e.render=i.render||ht);{const c=Ls(e);Et();try{Al(e)}finally{kt(),c()}}}const _c={get(e,t){return Me(e,"get",""),e[t]}};function pc(e){const t=s=>{e.exposed=s||{}};return{attrs:new Proxy(e.attrs,_c),slots:e.slots,emit:e.emit,expose:t}}function mi(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(co(Qa(e.exposed)),{get(t,s){if(s in t)return t[s];if(s in ps)return ps[s](e)},has(t,s){return s in t||s in ps}})):e.proxy}function gc(e,t=!0){return fe(e)?e.displayName||e.name:e.name||t&&e.__name}function vc(e){return fe(e)&&"__vccOpts"in e}const We=(e,t)=>rl(e,t,Es);function No(e,t,s){try{Qs(-1);const i=arguments.length;return i===2?ke(t)&&!he(t)?ei(t)?Ee(e,null,[t]):Ee(e,t):Ee(e,null,t):(i>3?s=Array.prototype.slice.call(arguments,2):i===3&&ei(s)&&(s=[s]),Ee(e,t,s))}finally{Qs(1)}}const mc="3.5.22";/**
* @vue/runtime-dom v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Yi;const Zr=typeof window<"u"&&window.trustedTypes;if(Zr)try{Yi=Zr.createPolicy("vue",{createHTML:e=>e})}catch{}const Uo=Yi?e=>Yi.createHTML(e):e=>e,Sc="http://www.w3.org/2000/svg",bc="http://www.w3.org/1998/Math/MathML",St=typeof document<"u"?document:null,Qr=St&&St.createElement("template"),yc={insert:(e,t,s)=>{t.insertBefore(e,s||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,s,i)=>{const c=t==="svg"?St.createElementNS(Sc,e):t==="mathml"?St.createElementNS(bc,e):s?St.createElement(e,{is:s}):St.createElement(e);return e==="select"&&i&&i.multiple!=null&&c.setAttribute("multiple",i.multiple),c},createText:e=>St.createTextNode(e),createComment:e=>St.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>St.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,s,i,c,g){const v=s?s.previousSibling:t.lastChild;if(c&&(c===g||c.nextSibling))for(;t.insertBefore(c.cloneNode(!0),s),!(c===g||!(c=c.nextSibling)););else{Qr.innerHTML=Uo(i==="svg"?`<svg>${e}</svg>`:i==="mathml"?`<math>${e}</math>`:e);const r=Qr.content;if(i==="svg"||i==="mathml"){const n=r.firstChild;for(;n.firstChild;)r.appendChild(n.firstChild);r.removeChild(n)}t.insertBefore(r,s)}return[v?v.nextSibling:t.firstChild,s?s.previousSibling:t.lastChild]}},Cc=Symbol("_vtc");function wc(e,t,s){const i=e[Cc];i&&(t=(t?[t,...i]:[...i]).join(" ")),t==null?e.removeAttribute("class"):s?e.setAttribute("class",t):e.className=t}const en=Symbol("_vod"),Ec=Symbol("_vsh"),kc=Symbol(""),xc=/(?:^|;)\s*display\s*:/;function Rc(e,t,s){const i=e.style,c=Te(s);let g=!1;if(s&&!c){if(t)if(Te(t))for(const v of t.split(";")){const r=v.slice(0,v.indexOf(":")).trim();s[r]==null&&Us(i,r,"")}else for(const v in t)s[v]==null&&Us(i,v,"");for(const v in s)v==="display"&&(g=!0),Us(i,v,s[v])}else if(c){if(t!==s){const v=i[kc];v&&(s+=";"+v),i.cssText=s,g=xc.test(s)}}else t&&e.removeAttribute("style");en in e&&(e[en]=g?i.display:"",e[Ec]&&(i.display="none"))}const tn=/\s*!important$/;function Us(e,t,s){if(he(s))s.forEach(i=>Us(e,t,i));else if(s==null&&(s=""),t.startsWith("--"))e.setProperty(t,s);else{const i=Ac(e,t);tn.test(s)?e.setProperty(jt(i),s.replace(tn,""),"important"):e[i]=s}}const sn=["Webkit","Moz","ms"],Di={};function Ac(e,t){const s=Di[t];if(s)return s;let i=Ze(t);if(i!=="filter"&&i in e)return Di[t]=i;i=ai(i);for(let c=0;c<sn.length;c++){const g=sn[c]+i;if(g in e)return Di[t]=g}return t}const rn="http://www.w3.org/1999/xlink";function nn(e,t,s,i,c,g=Da(t)){i&&t.startsWith("xlink:")?s==null?e.removeAttributeNS(rn,t.slice(6,t.length)):e.setAttributeNS(rn,t,s):s==null||g&&!qn(s)?e.removeAttribute(t):e.setAttribute(t,g?"":ft(s)?String(s):s)}function on(e,t,s,i,c){if(t==="innerHTML"||t==="textContent"){s!=null&&(e[t]=t==="innerHTML"?Uo(s):s);return}const g=e.tagName;if(t==="value"&&g!=="PROGRESS"&&!g.includes("-")){const r=g==="OPTION"?e.getAttribute("value")||"":e.value,n=s==null?e.type==="checkbox"?"on":"":String(s);(r!==n||!("_value"in e))&&(e.value=n),s==null&&e.removeAttribute(t),e._value=s;return}let v=!1;if(s===""||s==null){const r=typeof e[t];r==="boolean"?s=qn(s):s==null&&r==="string"?(s="",v=!0):r==="number"&&(s=0,v=!0)}try{e[t]=s}catch{}v&&e.removeAttribute(c||t)}function Nt(e,t,s,i){e.addEventListener(t,s,i)}function Lc(e,t,s,i){e.removeEventListener(t,s,i)}const an=Symbol("_vei");function Dc(e,t,s,i,c=null){const g=e[an]||(e[an]={}),v=g[t];if(i&&v)v.value=i;else{const[r,n]=Tc(t);if(i){const h=g[t]=Pc(i,c);Nt(e,r,h,n)}else v&&(Lc(e,r,v,n),g[t]=void 0)}}const ln=/(?:Once|Passive|Capture)$/;function Tc(e){let t;if(ln.test(e)){t={};let i;for(;i=e.match(ln);)e=e.slice(0,e.length-i[0].length),t[i[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):jt(e.slice(2)),t]}let Ti=0;const Bc=Promise.resolve(),Oc=()=>Ti||(Bc.then(()=>Ti=0),Ti=Date.now());function Pc(e,t){const s=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=s.attached)return;_t(Mc(i,s.value),t,5,[i])};return s.value=e,s.attached=Oc(),s}function Mc(e,t){if(he(t)){const s=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{s.call(e),e._stopped=!0},t.map(i=>c=>!c._stopped&&i&&i(c))}else return t}const cn=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Ic=(e,t,s,i,c,g)=>{const v=c==="svg";t==="class"?wc(e,i,v):t==="style"?Rc(e,s,i):ri(t)?lr(t)||Dc(e,t,s,i,g):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Hc(e,t,i,v))?(on(e,t,i),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&nn(e,t,i,v,g,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Te(i))?on(e,Ze(t),i,g,t):(t==="true-value"?e._trueValue=i:t==="false-value"&&(e._falseValue=i),nn(e,t,i,v))};function Hc(e,t,s,i){if(i)return!!(t==="innerHTML"||t==="textContent"||t in e&&cn(t)&&fe(s));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const c=e.tagName;if(c==="IMG"||c==="VIDEO"||c==="CANVAS"||c==="SOURCE")return!1}return cn(t)&&Te(s)?!1:t in e}const si=e=>{const t=e.props["onUpdate:modelValue"]||!1;return he(t)?s=>Hs(t,s):t};function Fc(e){e.target.composing=!0}function hn(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Qt=Symbol("_assign"),Le={created(e,{modifiers:{lazy:t,trim:s,number:i}},c){e[Qt]=si(c);const g=i||c.props&&c.props.type==="number";Nt(e,t?"change":"input",v=>{if(v.target.composing)return;let r=e.value;s&&(r=r.trim()),g&&(r=Ks(r)),e[Qt](r)}),s&&Nt(e,"change",()=>{e.value=e.value.trim()}),t||(Nt(e,"compositionstart",Fc),Nt(e,"compositionend",hn),Nt(e,"change",hn))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:s,modifiers:{lazy:i,trim:c,number:g}},v){if(e[Qt]=si(v),e.composing)return;const r=(g||e.type==="number")&&!/^0\d/.test(e.value)?Ks(e.value):e.value,n=t??"";r!==n&&(document.activeElement===e&&e.type!=="range"&&(i&&t===s||c&&e.value.trim()===n)||(e.value=n))}},un={deep:!0,created(e,{value:t,modifiers:{number:s}},i){const c=ni(t);Nt(e,"change",()=>{const g=Array.prototype.filter.call(e.options,v=>v.selected).map(v=>s?Ks(ii(v)):ii(v));e[Qt](e.multiple?c?new Set(g):g:g[0]),e._assigning=!0,_i(()=>{e._assigning=!1})}),e[Qt]=si(i)},mounted(e,{value:t}){dn(e,t)},beforeUpdate(e,t,s){e[Qt]=si(s)},updated(e,{value:t}){e._assigning||dn(e,t)}};function dn(e,t){const s=e.multiple,i=he(t);if(!(s&&!i&&!ni(t))){for(let c=0,g=e.options.length;c<g;c++){const v=e.options[c],r=ii(v);if(s)if(i){const n=typeof r;n==="string"||n==="number"?v.selected=t.some(h=>String(h)===String(r)):v.selected=Ba(t,r)>-1}else v.selected=t.has(r);else if(hi(ii(v),t)){e.selectedIndex!==c&&(e.selectedIndex=c);return}}!s&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function ii(e){return"_value"in e?e._value:e.value}const $c=["ctrl","shift","alt","meta"],Nc={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>$c.some(s=>e[`${s}Key`]&&!t.includes(s))},Vt=(e,t)=>{const s=e._withMods||(e._withMods={}),i=t.join(".");return s[i]||(s[i]=((c,...g)=>{for(let v=0;v<t.length;v++){const r=Nc[t[v]];if(r&&r(c,t))return}return e(c,...g)}))},Uc=$e({patchProp:Ic},yc);let fn;function Wc(){return fn||(fn=Ul(Uc))}const jc=((...e)=>{const t=Wc().createApp(...e),{mount:s}=t;return t.mount=i=>{const c=zc(i);if(!c)return;const g=t._component;!fe(g)&&!g.render&&!g.template&&(g.template=c.innerHTML),c.nodeType===1&&(c.textContent="");const v=s(c,!1,qc(c));return c instanceof Element&&(c.removeAttribute("v-cloak"),c.setAttribute("data-v-app","")),v},t});function qc(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function zc(e){return Te(e)?document.querySelector(e):e}const Kc={name:"App"},Xe=(e,t)=>{const s=e.__vccOpts||e;for(const[i,c]of t)s[i]=c;return s},Vc={id:"app"};function Gc(e,t,s,i,c,g){const v=Qe("router-view");return le(),ce("div",Vc,[Ee(v)])}const Xc=Xe(Kc,[["render",Gc]]);/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const Kt=typeof document<"u";function Wo(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function Jc(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&Wo(e.default)}const be=Object.assign;function Bi(e,t){const s={};for(const i in t){const c=t[i];s[i]=rt(c)?c.map(e):e(c)}return s}const ms=()=>{},rt=Array.isArray,jo=/#/g,Yc=/&/g,Zc=/\//g,Qc=/=/g,eh=/\?/g,qo=/\+/g,th=/%5B/g,sh=/%5D/g,zo=/%5E/g,ih=/%60/g,Ko=/%7B/g,rh=/%7C/g,Vo=/%7D/g,nh=/%20/g;function kr(e){return encodeURI(""+e).replace(rh,"|").replace(th,"[").replace(sh,"]")}function oh(e){return kr(e).replace(Ko,"{").replace(Vo,"}").replace(zo,"^")}function Zi(e){return kr(e).replace(qo,"%2B").replace(nh,"+").replace(jo,"%23").replace(Yc,"%26").replace(ih,"`").replace(Ko,"{").replace(Vo,"}").replace(zo,"^")}function ah(e){return Zi(e).replace(Qc,"%3D")}function lh(e){return kr(e).replace(jo,"%23").replace(eh,"%3F")}function ch(e){return e==null?"":lh(e).replace(Zc,"%2F")}function ks(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const hh=/\/$/,uh=e=>e.replace(hh,"");function Oi(e,t,s="/"){let i,c={},g="",v="";const r=t.indexOf("#");let n=t.indexOf("?");return r<n&&r>=0&&(n=-1),n>-1&&(i=t.slice(0,n),g=t.slice(n+1,r>-1?r:t.length),c=e(g)),r>-1&&(i=i||t.slice(0,r),v=t.slice(r,t.length)),i=ph(i??t,s),{fullPath:i+(g&&"?")+g+v,path:i,query:c,hash:ks(v)}}function dh(e,t){const s=t.query?e(t.query):"";return t.path+(s&&"?")+s+(t.hash||"")}function _n(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function fh(e,t,s){const i=t.matched.length-1,c=s.matched.length-1;return i>-1&&i===c&&ts(t.matched[i],s.matched[c])&&Go(t.params,s.params)&&e(t.query)===e(s.query)&&t.hash===s.hash}function ts(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function Go(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(!_h(e[s],t[s]))return!1;return!0}function _h(e,t){return rt(e)?pn(e,t):rt(t)?pn(t,e):e===t}function pn(e,t){return rt(t)?e.length===t.length&&e.every((s,i)=>s===t[i]):e.length===1&&e[0]===t}function ph(e,t){if(e.startsWith("/"))return e;if(!e)return t;const s=t.split("/"),i=e.split("/"),c=i[i.length-1];(c===".."||c===".")&&i.push("");let g=s.length-1,v,r;for(v=0;v<i.length;v++)if(r=i[v],r!==".")if(r==="..")g>1&&g--;else break;return s.slice(0,g).join("/")+"/"+i.slice(v).join("/")}const Rt={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var xs;(function(e){e.pop="pop",e.push="push"})(xs||(xs={}));var Ss;(function(e){e.back="back",e.forward="forward",e.unknown=""})(Ss||(Ss={}));function gh(e){if(!e)if(Kt){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),uh(e)}const vh=/^[^#]+#/;function mh(e,t){return e.replace(vh,"#")+t}function Sh(e,t){const s=document.documentElement.getBoundingClientRect(),i=e.getBoundingClientRect();return{behavior:t.behavior,left:i.left-s.left-(t.left||0),top:i.top-s.top-(t.top||0)}}const Si=()=>({left:window.scrollX,top:window.scrollY});function bh(e){let t;if("el"in e){const s=e.el,i=typeof s=="string"&&s.startsWith("#"),c=typeof s=="string"?i?document.getElementById(s.slice(1)):document.querySelector(s):s;if(!c)return;t=Sh(c,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function gn(e,t){return(history.state?history.state.position-t:-1)+e}const Qi=new Map;function yh(e,t){Qi.set(e,t)}function Ch(e){const t=Qi.get(e);return Qi.delete(e),t}let wh=()=>location.protocol+"//"+location.host;function Xo(e,t){const{pathname:s,search:i,hash:c}=t,g=e.indexOf("#");if(g>-1){let r=c.includes(e.slice(g))?e.slice(g).length:1,n=c.slice(r);return n[0]!=="/"&&(n="/"+n),_n(n,"")}return _n(s,e)+i+c}function Eh(e,t,s,i){let c=[],g=[],v=null;const r=({state:_})=>{const m=Xo(e,location),w=s.value,y=t.value;let o=0;if(_){if(s.value=m,t.value=_,v&&v===w){v=null;return}o=y?_.position-y.position:0}else i(m);c.forEach(u=>{u(s.value,w,{delta:o,type:xs.pop,direction:o?o>0?Ss.forward:Ss.back:Ss.unknown})})};function n(){v=s.value}function h(_){c.push(_);const m=()=>{const w=c.indexOf(_);w>-1&&c.splice(w,1)};return g.push(m),m}function f(){const{history:_}=window;_.state&&_.replaceState(be({},_.state,{scroll:Si()}),"")}function a(){for(const _ of g)_();g=[],window.removeEventListener("popstate",r),window.removeEventListener("beforeunload",f)}return window.addEventListener("popstate",r),window.addEventListener("beforeunload",f,{passive:!0}),{pauseListeners:n,listen:h,destroy:a}}function vn(e,t,s,i=!1,c=!1){return{back:e,current:t,forward:s,replaced:i,position:window.history.length,scroll:c?Si():null}}function kh(e){const{history:t,location:s}=window,i={value:Xo(e,s)},c={value:t.state};c.value||g(i.value,{back:null,current:i.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function g(n,h,f){const a=e.indexOf("#"),_=a>-1?(s.host&&document.querySelector("base")?e:e.slice(a))+n:wh()+e+n;try{t[f?"replaceState":"pushState"](h,"",_),c.value=h}catch(m){console.error(m),s[f?"replace":"assign"](_)}}function v(n,h){const f=be({},t.state,vn(c.value.back,n,c.value.forward,!0),h,{position:c.value.position});g(n,f,!0),i.value=n}function r(n,h){const f=be({},c.value,t.state,{forward:n,scroll:Si()});g(f.current,f,!0);const a=be({},vn(i.value,n,null),{position:f.position+1},h);g(n,a,!1),i.value=n}return{location:i,state:c,push:r,replace:v}}function xh(e){e=gh(e);const t=kh(e),s=Eh(e,t.state,t.location,t.replace);function i(g,v=!0){v||s.pauseListeners(),history.go(g)}const c=be({location:"",base:e,go:i,createHref:mh.bind(null,e)},t,s);return Object.defineProperty(c,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(c,"state",{enumerable:!0,get:()=>t.state.value}),c}function Rh(e){return typeof e=="string"||e&&typeof e=="object"}function Jo(e){return typeof e=="string"||typeof e=="symbol"}const Yo=Symbol("");var mn;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(mn||(mn={}));function ss(e,t){return be(new Error,{type:e,[Yo]:!0},t)}function mt(e,t){return e instanceof Error&&Yo in e&&(t==null||!!(e.type&t))}const Sn="[^/]+?",Ah={sensitive:!1,strict:!1,start:!0,end:!0},Lh=/[.+*?^${}()[\]/\\]/g;function Dh(e,t){const s=be({},Ah,t),i=[];let c=s.start?"^":"";const g=[];for(const h of e){const f=h.length?[]:[90];s.strict&&!h.length&&(c+="/");for(let a=0;a<h.length;a++){const _=h[a];let m=40+(s.sensitive?.25:0);if(_.type===0)a||(c+="/"),c+=_.value.replace(Lh,"\\$&"),m+=40;else if(_.type===1){const{value:w,repeatable:y,optional:o,regexp:u}=_;g.push({name:w,repeatable:y,optional:o});const l=u||Sn;if(l!==Sn){m+=10;try{new RegExp(`(${l})`)}catch(p){throw new Error(`Invalid custom RegExp for param "${w}" (${l}): `+p.message)}}let d=y?`((?:${l})(?:/(?:${l}))*)`:`(${l})`;a||(d=o&&h.length<2?`(?:/${d})`:"/"+d),o&&(d+="?"),c+=d,m+=20,o&&(m+=-8),y&&(m+=-20),l===".*"&&(m+=-50)}f.push(m)}i.push(f)}if(s.strict&&s.end){const h=i.length-1;i[h][i[h].length-1]+=.7000000000000001}s.strict||(c+="/?"),s.end?c+="$":s.strict&&!c.endsWith("/")&&(c+="(?:/|$)");const v=new RegExp(c,s.sensitive?"":"i");function r(h){const f=h.match(v),a={};if(!f)return null;for(let _=1;_<f.length;_++){const m=f[_]||"",w=g[_-1];a[w.name]=m&&w.repeatable?m.split("/"):m}return a}function n(h){let f="",a=!1;for(const _ of e){(!a||!f.endsWith("/"))&&(f+="/"),a=!1;for(const m of _)if(m.type===0)f+=m.value;else if(m.type===1){const{value:w,repeatable:y,optional:o}=m,u=w in h?h[w]:"";if(rt(u)&&!y)throw new Error(`Provided param "${w}" is an array but it is not repeatable (* or + modifiers)`);const l=rt(u)?u.join("/"):u;if(!l)if(o)_.length<2&&(f.endsWith("/")?f=f.slice(0,-1):a=!0);else throw new Error(`Missing required param "${w}"`);f+=l}}return f||"/"}return{re:v,score:i,keys:g,parse:r,stringify:n}}function Th(e,t){let s=0;for(;s<e.length&&s<t.length;){const i=t[s]-e[s];if(i)return i;s++}return e.length<t.length?e.length===1&&e[0]===80?-1:1:e.length>t.length?t.length===1&&t[0]===80?1:-1:0}function Zo(e,t){let s=0;const i=e.score,c=t.score;for(;s<i.length&&s<c.length;){const g=Th(i[s],c[s]);if(g)return g;s++}if(Math.abs(c.length-i.length)===1){if(bn(i))return 1;if(bn(c))return-1}return c.length-i.length}function bn(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const Bh={type:0,value:""},Oh=/[a-zA-Z0-9_]/;function Ph(e){if(!e)return[[]];if(e==="/")return[[Bh]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(m){throw new Error(`ERR (${s})/"${h}": ${m}`)}let s=0,i=s;const c=[];let g;function v(){g&&c.push(g),g=[]}let r=0,n,h="",f="";function a(){h&&(s===0?g.push({type:0,value:h}):s===1||s===2||s===3?(g.length>1&&(n==="*"||n==="+")&&t(`A repeatable param (${h}) must be alone in its segment. eg: '/:ids+.`),g.push({type:1,value:h,regexp:f,repeatable:n==="*"||n==="+",optional:n==="*"||n==="?"})):t("Invalid state to consume buffer"),h="")}function _(){h+=n}for(;r<e.length;){if(n=e[r++],n==="\\"&&s!==2){i=s,s=4;continue}switch(s){case 0:n==="/"?(h&&a(),v()):n===":"?(a(),s=1):_();break;case 4:_(),s=i;break;case 1:n==="("?s=2:Oh.test(n)?_():(a(),s=0,n!=="*"&&n!=="?"&&n!=="+"&&r--);break;case 2:n===")"?f[f.length-1]=="\\"?f=f.slice(0,-1)+n:s=3:f+=n;break;case 3:a(),s=0,n!=="*"&&n!=="?"&&n!=="+"&&r--,f="";break;default:t("Unknown state");break}}return s===2&&t(`Unfinished custom RegExp for param "${h}"`),a(),v(),c}function Mh(e,t,s){const i=Dh(Ph(e.path),s),c=be(i,{record:e,parent:t,children:[],alias:[]});return t&&!c.record.aliasOf==!t.record.aliasOf&&t.children.push(c),c}function Ih(e,t){const s=[],i=new Map;t=En({strict:!1,end:!0,sensitive:!1},t);function c(a){return i.get(a)}function g(a,_,m){const w=!m,y=Cn(a);y.aliasOf=m&&m.record;const o=En(t,a),u=[y];if("alias"in a){const p=typeof a.alias=="string"?[a.alias]:a.alias;for(const b of p)u.push(Cn(be({},y,{components:m?m.record.components:y.components,path:b,aliasOf:m?m.record:y})))}let l,d;for(const p of u){const{path:b}=p;if(_&&b[0]!=="/"){const E=_.record.path,x=E[E.length-1]==="/"?"":"/";p.path=_.record.path+(b&&x+b)}if(l=Mh(p,_,o),m?m.alias.push(l):(d=d||l,d!==l&&d.alias.push(l),w&&a.name&&!wn(l)&&v(a.name)),Qo(l)&&n(l),y.children){const E=y.children;for(let x=0;x<E.length;x++)g(E[x],l,m&&m.children[x])}m=m||l}return d?()=>{v(d)}:ms}function v(a){if(Jo(a)){const _=i.get(a);_&&(i.delete(a),s.splice(s.indexOf(_),1),_.children.forEach(v),_.alias.forEach(v))}else{const _=s.indexOf(a);_>-1&&(s.splice(_,1),a.record.name&&i.delete(a.record.name),a.children.forEach(v),a.alias.forEach(v))}}function r(){return s}function n(a){const _=$h(a,s);s.splice(_,0,a),a.record.name&&!wn(a)&&i.set(a.record.name,a)}function h(a,_){let m,w={},y,o;if("name"in a&&a.name){if(m=i.get(a.name),!m)throw ss(1,{location:a});o=m.record.name,w=be(yn(_.params,m.keys.filter(d=>!d.optional).concat(m.parent?m.parent.keys.filter(d=>d.optional):[]).map(d=>d.name)),a.params&&yn(a.params,m.keys.map(d=>d.name))),y=m.stringify(w)}else if(a.path!=null)y=a.path,m=s.find(d=>d.re.test(y)),m&&(w=m.parse(y),o=m.record.name);else{if(m=_.name?i.get(_.name):s.find(d=>d.re.test(_.path)),!m)throw ss(1,{location:a,currentLocation:_});o=m.record.name,w=be({},_.params,a.params),y=m.stringify(w)}const u=[];let l=m;for(;l;)u.unshift(l.record),l=l.parent;return{name:o,path:y,params:w,matched:u,meta:Fh(u)}}e.forEach(a=>g(a));function f(){s.length=0,i.clear()}return{addRoute:g,resolve:h,removeRoute:v,clearRoutes:f,getRoutes:r,getRecordMatcher:c}}function yn(e,t){const s={};for(const i of t)i in e&&(s[i]=e[i]);return s}function Cn(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:Hh(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function Hh(e){const t={},s=e.props||!1;if("component"in e)t.default=s;else for(const i in e.components)t[i]=typeof s=="object"?s[i]:s;return t}function wn(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function Fh(e){return e.reduce((t,s)=>be(t,s.meta),{})}function En(e,t){const s={};for(const i in e)s[i]=i in t?t[i]:e[i];return s}function $h(e,t){let s=0,i=t.length;for(;s!==i;){const g=s+i>>1;Zo(e,t[g])<0?i=g:s=g+1}const c=Nh(e);return c&&(i=t.lastIndexOf(c,i-1)),i}function Nh(e){let t=e;for(;t=t.parent;)if(Qo(t)&&Zo(e,t)===0)return t}function Qo({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function Uh(e){const t={};if(e===""||e==="?")return t;const i=(e[0]==="?"?e.slice(1):e).split("&");for(let c=0;c<i.length;++c){const g=i[c].replace(qo," "),v=g.indexOf("="),r=ks(v<0?g:g.slice(0,v)),n=v<0?null:ks(g.slice(v+1));if(r in t){let h=t[r];rt(h)||(h=t[r]=[h]),h.push(n)}else t[r]=n}return t}function kn(e){let t="";for(let s in e){const i=e[s];if(s=ah(s),i==null){i!==void 0&&(t+=(t.length?"&":"")+s);continue}(rt(i)?i.map(g=>g&&Zi(g)):[i&&Zi(i)]).forEach(g=>{g!==void 0&&(t+=(t.length?"&":"")+s,g!=null&&(t+="="+g))})}return t}function Wh(e){const t={};for(const s in e){const i=e[s];i!==void 0&&(t[s]=rt(i)?i.map(c=>c==null?null:""+c):i==null?i:""+i)}return t}const jh=Symbol(""),xn=Symbol(""),bi=Symbol(""),xr=Symbol(""),er=Symbol("");function os(){let e=[];function t(i){return e.push(i),()=>{const c=e.indexOf(i);c>-1&&e.splice(c,1)}}function s(){e=[]}return{add:t,list:()=>e.slice(),reset:s}}function Dt(e,t,s,i,c,g=v=>v()){const v=i&&(i.enterCallbacks[c]=i.enterCallbacks[c]||[]);return()=>new Promise((r,n)=>{const h=_=>{_===!1?n(ss(4,{from:s,to:t})):_ instanceof Error?n(_):Rh(_)?n(ss(2,{from:t,to:_})):(v&&i.enterCallbacks[c]===v&&typeof _=="function"&&v.push(_),r())},f=g(()=>e.call(i&&i.instances[c],t,s,h));let a=Promise.resolve(f);e.length<3&&(a=a.then(h)),a.catch(_=>n(_))})}function Pi(e,t,s,i,c=g=>g()){const g=[];for(const v of e)for(const r in v.components){let n=v.components[r];if(!(t!=="beforeRouteEnter"&&!v.instances[r]))if(Wo(n)){const f=(n.__vccOpts||n)[t];f&&g.push(Dt(f,s,i,v,r,c))}else{let h=n();g.push(()=>h.then(f=>{if(!f)throw new Error(`Couldn't resolve component "${r}" at "${v.path}"`);const a=Jc(f)?f.default:f;v.mods[r]=f,v.components[r]=a;const m=(a.__vccOpts||a)[t];return m&&Dt(m,s,i,v,r,c)()}))}}return g}function Rn(e){const t=st(bi),s=st(xr),i=We(()=>{const n=wt(e.to);return t.resolve(n)}),c=We(()=>{const{matched:n}=i.value,{length:h}=n,f=n[h-1],a=s.matched;if(!f||!a.length)return-1;const _=a.findIndex(ts.bind(null,f));if(_>-1)return _;const m=An(n[h-2]);return h>1&&An(f)===m&&a[a.length-1].path!==m?a.findIndex(ts.bind(null,n[h-2])):_}),g=We(()=>c.value>-1&&Gh(s.params,i.value.params)),v=We(()=>c.value>-1&&c.value===s.matched.length-1&&Go(s.params,i.value.params));function r(n={}){if(Vh(n)){const h=t[wt(e.replace)?"replace":"push"](wt(e.to)).catch(ms);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>h),h}return Promise.resolve()}return{route:i,href:We(()=>i.value.href),isActive:g,isExactActive:v,navigate:r}}function qh(e){return e.length===1?e[0]:e}const zh=nt({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:Rn,setup(e,{slots:t}){const s=di(Rn(e)),{options:i}=st(bi),c=We(()=>({[Ln(e.activeClass,i.linkActiveClass,"router-link-active")]:s.isActive,[Ln(e.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active")]:s.isExactActive}));return()=>{const g=t.default&&qh(t.default(s));return e.custom?g:No("a",{"aria-current":s.isExactActive?e.ariaCurrentValue:null,href:s.href,onClick:s.navigate,class:c.value},g)}}}),Kh=zh;function Vh(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function Gh(e,t){for(const s in t){const i=t[s],c=e[s];if(typeof i=="string"){if(i!==c)return!1}else if(!rt(c)||c.length!==i.length||i.some((g,v)=>g!==c[v]))return!1}return!0}function An(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const Ln=(e,t,s)=>e??t??s,Xh=nt({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:s}){const i=st(er),c=We(()=>e.route||i.value),g=st(xn,0),v=We(()=>{let h=wt(g);const{matched:f}=c.value;let a;for(;(a=f[h])&&!a.components;)h++;return h}),r=We(()=>c.value.matched[v.value]);Fs(xn,We(()=>v.value+1)),Fs(jh,r),Fs(er,c);const n=de();return gs(()=>[n.value,r.value,e.name],([h,f,a],[_,m,w])=>{f&&(f.instances[a]=h,m&&m!==f&&h&&h===_&&(f.leaveGuards.size||(f.leaveGuards=m.leaveGuards),f.updateGuards.size||(f.updateGuards=m.updateGuards))),h&&f&&(!m||!ts(f,m)||!_)&&(f.enterCallbacks[a]||[]).forEach(y=>y(h))},{flush:"post"}),()=>{const h=c.value,f=e.name,a=r.value,_=a&&a.components[f];if(!_)return Dn(s.default,{Component:_,route:h});const m=a.props[f],w=m?m===!0?h.params:typeof m=="function"?m(h):m:null,o=No(_,be({},w,t,{onVnodeUnmounted:u=>{u.component.isUnmounted&&(a.instances[f]=null)},ref:n}));return Dn(s.default,{Component:o,route:h})||o}}});function Dn(e,t){if(!e)return null;const s=e(t);return s.length===1?s[0]:s}const Jh=Xh;function Yh(e){const t=Ih(e.routes,e),s=e.parseQuery||Uh,i=e.stringifyQuery||kn,c=e.history,g=os(),v=os(),r=os(),n=el(Rt);let h=Rt;Kt&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const f=Bi.bind(null,C=>""+C),a=Bi.bind(null,ch),_=Bi.bind(null,ks);function m(C,M){let $,U;return Jo(C)?($=t.getRecordMatcher(C),U=M):U=C,t.addRoute(U,$)}function w(C){const M=t.getRecordMatcher(C);M&&t.removeRoute(M)}function y(){return t.getRoutes().map(C=>C.record)}function o(C){return!!t.getRecordMatcher(C)}function u(C,M){if(M=be({},M||n.value),typeof C=="string"){const N=Oi(s,C,M.path),G=t.resolve({path:N.path},M),Y=c.createHref(N.fullPath);return be(N,G,{params:_(G.params),hash:ks(N.hash),redirectedFrom:void 0,href:Y})}let $;if(C.path!=null)$=be({},C,{path:Oi(s,C.path,M.path).path});else{const N=be({},C.params);for(const G in N)N[G]==null&&delete N[G];$=be({},C,{params:a(N)}),M.params=a(M.params)}const U=t.resolve($,M),re=C.hash||"";U.params=f(_(U.params));const L=dh(i,be({},C,{hash:oh(re),path:U.path})),O=c.createHref(L);return be({fullPath:L,hash:re,query:i===kn?Wh(C.query):C.query||{}},U,{redirectedFrom:void 0,href:O})}function l(C){return typeof C=="string"?Oi(s,C,n.value.path):be({},C)}function d(C,M){if(h!==C)return ss(8,{from:M,to:C})}function p(C){return x(C)}function b(C){return p(be(l(C),{replace:!0}))}function E(C){const M=C.matched[C.matched.length-1];if(M&&M.redirect){const{redirect:$}=M;let U=typeof $=="function"?$(C):$;return typeof U=="string"&&(U=U.includes("?")||U.includes("#")?U=l(U):{path:U},U.params={}),be({query:C.query,hash:C.hash,params:U.path!=null?{}:C.params},U)}}function x(C,M){const $=h=u(C),U=n.value,re=C.state,L=C.force,O=C.replace===!0,N=E($);if(N)return x(be(l(N),{state:typeof N=="object"?be({},re,N.state):re,force:L,replace:O}),M||$);const G=$;G.redirectedFrom=M;let Y;return!L&&fh(i,U,$)&&(Y=ss(16,{to:G,from:U}),F(U,U,!0,!1)),(Y?Promise.resolve(Y):D(G,U)).catch(j=>mt(j)?mt(j,2)?j:P(j):A(j,G,U)).then(j=>{if(j){if(mt(j,2))return x(be({replace:O},l(j.to),{state:typeof j.to=="object"?be({},re,j.to.state):re,force:L}),M||G)}else j=T(G,U,!0,O,re);return H(G,U,j),j})}function S(C,M){const $=d(C,M);return $?Promise.reject($):Promise.resolve()}function k(C){const M=W.values().next().value;return M&&typeof M.runWithContext=="function"?M.runWithContext(C):C()}function D(C,M){let $;const[U,re,L]=Zh(C,M);$=Pi(U.reverse(),"beforeRouteLeave",C,M);for(const N of U)N.leaveGuards.forEach(G=>{$.push(Dt(G,C,M))});const O=S.bind(null,C,M);return $.push(O),ue($).then(()=>{$=[];for(const N of g.list())$.push(Dt(N,C,M));return $.push(O),ue($)}).then(()=>{$=Pi(re,"beforeRouteUpdate",C,M);for(const N of re)N.updateGuards.forEach(G=>{$.push(Dt(G,C,M))});return $.push(O),ue($)}).then(()=>{$=[];for(const N of L)if(N.beforeEnter)if(rt(N.beforeEnter))for(const G of N.beforeEnter)$.push(Dt(G,C,M));else $.push(Dt(N.beforeEnter,C,M));return $.push(O),ue($)}).then(()=>(C.matched.forEach(N=>N.enterCallbacks={}),$=Pi(L,"beforeRouteEnter",C,M,k),$.push(O),ue($))).then(()=>{$=[];for(const N of v.list())$.push(Dt(N,C,M));return $.push(O),ue($)}).catch(N=>mt(N,8)?N:Promise.reject(N))}function H(C,M,$){r.list().forEach(U=>k(()=>U(C,M,$)))}function T(C,M,$,U,re){const L=d(C,M);if(L)return L;const O=M===Rt,N=Kt?history.state:{};$&&(U||O?c.replace(C.fullPath,be({scroll:O&&N&&N.scroll},re)):c.push(C.fullPath,re)),n.value=C,F(C,M,$,O),P()}let I;function V(){I||(I=c.listen((C,M,$)=>{if(!z.listening)return;const U=u(C),re=E(U);if(re){x(be(re,{replace:!0,force:!0}),U).catch(ms);return}h=U;const L=n.value;Kt&&yh(gn(L.fullPath,$.delta),Si()),D(U,L).catch(O=>mt(O,12)?O:mt(O,2)?(x(be(l(O.to),{force:!0}),U).then(N=>{mt(N,20)&&!$.delta&&$.type===xs.pop&&c.go(-1,!1)}).catch(ms),Promise.reject()):($.delta&&c.go(-$.delta,!1),A(O,U,L))).then(O=>{O=O||T(U,L,!1),O&&($.delta&&!mt(O,8)?c.go(-$.delta,!1):$.type===xs.pop&&mt(O,20)&&c.go(-1,!1)),H(U,L,O)}).catch(ms)}))}let J=os(),X=os(),K;function A(C,M,$){P(C);const U=X.list();return U.length?U.forEach(re=>re(C,M,$)):console.error(C),Promise.reject(C)}function B(){return K&&n.value!==Rt?Promise.resolve():new Promise((C,M)=>{J.add([C,M])})}function P(C){return K||(K=!C,V(),J.list().forEach(([M,$])=>C?$(C):M()),J.reset()),C}function F(C,M,$,U){const{scrollBehavior:re}=e;if(!Kt||!re)return Promise.resolve();const L=!$&&Ch(gn(C.fullPath,0))||(U||!$)&&history.state&&history.state.scroll||null;return _i().then(()=>re(C,M,L)).then(O=>O&&bh(O)).catch(O=>A(O,C,M))}const Z=C=>c.go(C);let q;const W=new Set,z={currentRoute:n,listening:!0,addRoute:m,removeRoute:w,clearRoutes:t.clearRoutes,hasRoute:o,getRoutes:y,resolve:u,options:e,push:p,replace:b,go:Z,back:()=>Z(-1),forward:()=>Z(1),beforeEach:g.add,beforeResolve:v.add,afterEach:r.add,onError:X.add,isReady:B,install(C){const M=this;C.component("RouterLink",Kh),C.component("RouterView",Jh),C.config.globalProperties.$router=M,Object.defineProperty(C.config.globalProperties,"$route",{enumerable:!0,get:()=>wt(n)}),Kt&&!q&&n.value===Rt&&(q=!0,p(c.location).catch(re=>{}));const $={};for(const re in Rt)Object.defineProperty($,re,{get:()=>n.value[re],enumerable:!0});C.provide(bi,M),C.provide(xr,ao($)),C.provide(er,n);const U=C.unmount;W.add(C),C.unmount=function(){W.delete(C),W.size<1&&(h=Rt,I&&I(),I=null,n.value=Rt,q=!1,K=!1),U()}}};function ue(C){return C.reduce((M,$)=>M.then(()=>k($)),Promise.resolve())}return z}function Zh(e,t){const s=[],i=[],c=[],g=Math.max(t.matched.length,e.matched.length);for(let v=0;v<g;v++){const r=t.matched[v];r&&(e.matched.find(h=>ts(h,r))?i.push(r):s.push(r));const n=e.matched[v];n&&(t.matched.find(h=>ts(h,n))||c.push(n))}return[s,i,c]}function gt(){return st(bi)}function ea(e){return st(xr)}class Qh{tokenKey="token";isLogged=de(!!localStorage.getItem(this.tokenKey));setToken(t){localStorage.setItem(this.tokenKey,t),this.isLogged.value=!0}getToken(){return localStorage.getItem(this.tokenKey)}logout(){localStorage.removeItem(this.tokenKey),this.isLogged.value=!1}isAuthenticated(){return this.isLogged.value}}const it=new Qh,eu={class:"login"},tu={class:"Plantilla"},su={class:"form-group"},iu={class:"form-group"},ru=["disabled"],nu={class:"links"},ou={class:"register-text"},au=nt({__name:"Login",setup(e){const t=de(""),s=de(""),i=de(!1),c=gt();async function g(){if(!t.value||!s.value){alert("Por favor llena todos los campos");return}i.value=!0;try{const v=await fetch("https://sistema-de-aprendizaje-linux-production.up.railway.app/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t.value,password:s.value})});if(!v.ok)throw new Error(`Error HTTP: ${v.status}`);const r=await v.json(),n=r.token||r.access_token;it.setToken(n),localStorage.setItem("token",n),localStorage.setItem("user",JSON.stringify({id:r.user.id_Usuario,username:r.user.username,correo:r.user.correo,avatar:r.user.avatar,racha:r.user.racha,experiencia:r.user.experiencia,rol:r.user.rol})),r.user.rol==="admin"?c.push("/admin"):c.push("/dashboard")}catch(v){console.error("❌ Error en login:",v),alert("Credenciales incorrectas o error en el servidor")}finally{i.value=!1}}return(v,r)=>{const n=Qe("router-link");return le(),ce("div",eu,[r[11]||(r[11]=R("div",{class:"Background"},null,-1)),R("div",tu,[r[7]||(r[7]=R("img",{src:"https://upload.wikimedia.org/wikipedia/commons/3/35/Tux.svg",alt:"Mi logo"},null,-1)),r[8]||(r[8]=R("h1",null,"Bienvenido a Penguin Path",-1)),r[9]||(r[9]=R("p",null,"La mejor plataforma para aprender linux paso a paso.",-1)),r[10]||(r[10]=R("br",null,null,-1)),R("div",su,[r[2]||(r[2]=R("label",{class:"label-left"},"Apodo",-1)),Re(R("input",{type:"text",placeholder:"Ingresa tu apodo","onUpdate:modelValue":r[0]||(r[0]=h=>t.value=h)},null,512),[[Le,t.value]])]),R("div",iu,[r[3]||(r[3]=R("label",{class:"label-left"},"Contraseña",-1)),Re(R("input",{type:"password",placeholder:"Ingresa tu contraseña","onUpdate:modelValue":r[1]||(r[1]=h=>s.value=h)},null,512),[[Le,s.value]])]),R("button",{class:"login-btn",disabled:i.value,onClick:g},ve(i.value?"Cargando...":"Iniciar sesión"),9,ru),R("div",nu,[r[6]||(r[6]=R("a",{href:"#",class:"forgot-password"},"¿Olvidaste tu contraseña?",-1)),R("p",ou,[r[5]||(r[5]=Ge(" ¿No tienes cuenta? ",-1)),Ee(n,{to:"/registro",class:"register-link"},{default:Sr(()=>[...r[4]||(r[4]=[Ge("Regístrate",-1)])]),_:1})])])])])}}}),lu=Xe(au,[["__scopeId","data-v-cf96c827"]]),cu=nt({props:{user:{type:Object,required:!1,default:()=>({})},logout:{type:Function,required:!1}},setup(e){const t=gt(),s=de({username:"",correo:"",racha:0,experiencia:0,avatar:""});return Mt(()=>{const g=localStorage.getItem("user");if(g){const v=JSON.parse(g);s.value.username=v.username,s.value.racha=v.racha,s.value.experiencia=v.experiencia,s.value.avatar=v.avatar,s.value.correo=v.correo}}),{displayUser:We(()=>Object.keys(e.user||{}).length>0?e.user:s.value),handleLogout:()=>{e.logout?e.logout({}):(it.logout(),localStorage.removeItem("token"),localStorage.removeItem("user"),t.push("/"))}}}}),hu="/Assets/Racha.svg",uu="/Assets/xp.svg",du={class:"header"},fu={class:"status"},_u={class:"streak"},pu={class:"xp"},gu={class:"perfil"},vu=["src"];function mu(e,t,s,i,c,g){return le(),ce("header",du,[t[3]||(t[3]=R("div",{class:"logo"},[R("img",{src:"https://upload.wikimedia.org/wikipedia/commons/3/35/Tux.svg",alt:"Penguin",class:"logo"}),R("span",{class:"brand"},"Penguin Path")],-1)),R("div",fu,[R("div",_u,[t[1]||(t[1]=R("img",{src:hu,alt:"Racha"},null,-1)),R("span",null,"Racha: "+ve(e.displayUser.racha)+" días",1)]),R("div",pu,[t[2]||(t[2]=R("img",{src:uu,alt:"XP"},null,-1)),R("span",null,ve(e.displayUser.experiencia)+" XP",1)]),R("div",gu,[R("img",{src:e.displayUser.avatar,alt:"Perfil"},null,8,vu),R("span",null,ve(e.displayUser.username),1),R("button",{class:"logout-btn",onClick:t[0]||(t[0]=(...v)=>e.handleLogout&&e.handleLogout(...v))})])])])}const Ds=Xe(cu,[["render",mu],["__scopeId","data-v-e888facb"]]),Su=nt({props:{goInicio:{type:Function,required:!0},goBiblioteca:{type:Function,required:!0},goRanking:{type:Function,required:!0},goConfig:{type:Function,required:!0}}}),ta="/Assets/Inicio.svg",sa="/Assets/Biblioteca.svg",ia="/Assets/Ranking.svg",ra="/Assets/Configuraci%C3%B3n.svg",bu={class:"footer"},yu={class:"barra-inicio"},Cu={class:"barra"},wu={class:"barra"},Eu={class:"barra"};function ku(e,t,s,i,c,g){return le(),ce("footer",bu,[R("div",yu,[R("button",{type:"button",onClick:t[0]||(t[0]=(...v)=>e.goInicio&&e.goInicio(...v))},[...t[4]||(t[4]=[R("img",{src:ta,alt:"Inicio"},null,-1),Ge("Inicio",-1)])])]),R("div",Cu,[R("button",{onClick:t[1]||(t[1]=(...v)=>e.goBiblioteca&&e.goBiblioteca(...v))},[...t[5]||(t[5]=[R("img",{src:sa,alt:"Biblioteca"},null,-1),Ge(" Biblioteca ",-1)])])]),R("div",wu,[R("button",{type:"button",onClick:t[2]||(t[2]=(...v)=>e.goRanking&&e.goRanking(...v))},[...t[6]||(t[6]=[R("img",{src:ia,alt:"Ranking"},null,-1),Ge("Ranking",-1)])])]),R("div",Eu,[R("button",{type:"button",onClick:t[3]||(t[3]=(...v)=>e.goConfig&&e.goConfig(...v))},[...t[7]||(t[7]=[R("img",{src:ra,alt:"Configuración"},null,-1),Ge("Configuración",-1)])])])])}const Ts=Xe(Su,[["render",ku],["__scopeId","data-v-604d7e16"]]),xu=nt({setup(){const e=gt(),t=de({username:"",correo:"",racha:0,experiencia:0,avatar:""}),s=de([{name:"Comandos básicos",icon:""},{name:"Archivos y directorios",icon:"/Assets/Archivos.svg"},{name:"Permisos",icon:"/Assets/Permisos.svg"},{name:"Procesos y señales",icon:"/Assets/Procesos.svg"}]);return Mt(()=>{const h=localStorage.getItem("user");if(h){const f=JSON.parse(h);t.value.username=f.username,t.value.racha=f.racha,t.value.experiencia=f.experiencia,t.value.avatar=f.avatar,t.value.correo=f.correo}}),{user:t,modules:s,logout:()=>{it.logout(),localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/"},goInicio:()=>e.push("/dashboard"),goBiblioteca:()=>e.push("/biblioteca"),goRanking:()=>e.push("/ranking"),goConfig:()=>e.push("/configuracion"),goLeccion:h=>e.push(`/leccion/${h}`)}},components:{Header:Ds,Footer:Ts}}),Ru={class:"dashboard"},Au={class:"form-group"},Lu=["onClick","disabled"],Du=["src","alt"],Tu={key:1};function Bu(e,t,s,i,c,g){const v=Qe("Header"),r=Qe("Footer");return le(),ce("div",Ru,[Ee(v,{user:e.user,logout:e.logout},null,8,["user","logout"]),t[0]||(t[0]=R("h1",{class:"titulo"},"Tu progreso en Linux",-1)),t[1]||(t[1]=R("p",{class:"subtitulo"},"Domina la línea de comandos paso a paso",-1)),R("div",Au,[(le(!0),ce(Ie,null,Ut(e.modules,(n,h)=>(le(),ce("div",{class:"card",key:n.name},[R("button",{type:"button",onClick:f=>h===0?e.goLeccion(1):null,disabled:h>1},[n.icon?(le(),ce("img",{key:0,src:n.icon,alt:n.name},null,8,Du)):(le(),ce("span",Tu,">_")),R("span",null,ve(n.name),1)],8,Lu)]))),128))]),Ee(r,{goInicio:e.goInicio,goBiblioteca:e.goBiblioteca,goRanking:e.goRanking,goConfig:e.goConfig},null,8,["goInicio","goBiblioteca","goRanking","goConfig"])])}const Ou=Xe(xu,[["render",Bu],["__scopeId","data-v-5f4b40c7"]]),Pu=nt({name:"RegistroComponent",setup(){const e=de(""),t=de(""),s=de(""),i=de(!1),c=gt();return{username:e,correo:t,contraseña:s,loading:i,handleRegistro:async()=>{if(!e.value||!t.value||!s.value){alert("Por favor llena todos los campos");return}i.value=!0;try{const v=await fetch("https://sistema-de-aprendizaje-linux-production.up.railway.app/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e.value,correo:t.value,password:s.value})});if(!v.ok)throw new Error(`Error HTTP: ${v.status}`);const r=await v.json();console.log("✅ Registro exitoso:",r),alert("Usuario registrado con éxito"),c.push("/")}catch(v){console.error("❌ Error en registro:",v),alert("No se pudo registrar el usuario")}finally{i.value=!1}}}}}),Mu={class:"login"},Iu={class:"Plantilla"},Hu=["disabled"];function Fu(e,t,s,i,c,g){const v=Qe("router-link");return le(),ce("div",Mu,[t[12]||(t[12]=R("div",{class:"Background"},null,-1)),R("div",Iu,[t[8]||(t[8]=R("img",{src:"https://upload.wikimedia.org/wikipedia/commons/3/35/Tux.svg",alt:"Mi logo"},null,-1)),t[9]||(t[9]=R("h1",null,"Crear cuenta en Penguin Path",-1)),t[10]||(t[10]=R("p",null,"Llena el formulario para registrarte.",-1)),t[11]||(t[11]=R("br",null,null,-1)),R("form",{onSubmit:t[3]||(t[3]=Vt((...r)=>e.handleRegistro&&e.handleRegistro(...r),["prevent"])),class:"form-group"},[t[4]||(t[4]=R("label",{for:"username"},"Apodo:",-1)),Re(R("input",{"onUpdate:modelValue":t[0]||(t[0]=r=>e.username=r),type:"text",id:"username",placeholder:"Escribe el apodo",required:""},null,512),[[Le,e.username]]),t[5]||(t[5]=R("label",{for:"correo"},"Correo:",-1)),Re(R("input",{"onUpdate:modelValue":t[1]||(t[1]=r=>e.correo=r),type:"email",id:"correo",placeholder:"Escribe el correo",required:""},null,512),[[Le,e.correo]]),t[6]||(t[6]=R("label",{for:"contraseña"},"Contraseña:",-1)),Re(R("input",{"onUpdate:modelValue":t[2]||(t[2]=r=>e.contraseña=r),type:"password",id:"contraseña",placeholder:"Escribe la contraseña",required:""},null,512),[[Le,e.contraseña]]),R("button",{type:"submit",class:"boton-enviar",disabled:e.loading},ve(e.loading?"Registrando...":"Registrar"),9,Hu)],32),Ee(v,{to:"/",class:"login-btn"},{default:Sr(()=>[...t[7]||(t[7]=[Ge(" Volver al Login ",-1)])]),_:1})])])}const $u=Xe(Pu,[["render",Fu],["__scopeId","data-v-6c4815eb"]]),Nu={name:"Biblioteca",components:{Header:Ds,Footer:Ts},setup(){const e=gt();return{goInicio:()=>e.push("/dashboard"),goBiblioteca:()=>e.push("/biblioteca"),goRanking:()=>e.push("/ranking"),goConfig:()=>e.push("/configuracion")}},data(){return{descripciones:{ls:"Muestra el contenido de un directorio.",pwd:"Muestra el directorio actual del archivo.",cd:"Cambia el directorio de trabajo.",echo:"Muestra un mensaje o valor de variable.",clear:"Limpia la pantalla del terminal.",touch:"Crea un archivo vacío.",mkdir:"Crea un nuevo directorio.",rm:"Elimina archivos.",rmdir:"Elimina directorios vacíos.",cp:"Copia archivos o directorios.",mv:"Mueve o renombra archivos o directorios.",cat:"Muestra el contenido de un archivo.",nano:"Editor de texto en línea de comandos.",grep:"Busca texto dentro de archivos.",sudo:"Ejecuta comandos con privilegios de superusuario.",chmod:"Cambia los permisos de archivos o directorios."}}},methods:{toggleDescripcion(e,t){const s=t.target.closest("tr"),i=t.target.closest("table");if(s.nextElementSibling&&s.nextElementSibling.classList.contains("descripcion")){s.nextElementSibling.remove();return}i.querySelectorAll(".descripcion").forEach(v=>v.remove());const c=document.createElement("tr");c.className="descripcion";const g=document.createElement("td");g.colSpan=1,g.textContent=this.descripciones[e]||"Descripción no disponible.",c.appendChild(g),s.insertAdjacentElement("afterend",c)}}},Uu={class:"biblioteca"},Wu={class:"modulos"},ju={class:"tablas-container"},qu={class:"comandos-basicos"},zu={class:"archivos-y-directorios"},Ku={class:"footer"},Vu={class:"barra-inicio"},Gu={class:"barra"},Xu={class:"barra"},Ju={class:"barra"};function Yu(e,t,s,i,c,g){const v=Qe("Header");return le(),ce("div",Uu,[Ee(v),R("div",Wu,[R("div",ju,[R("div",qu,[R("table",null,[t[20]||(t[20]=R("thead",null,[R("tr",null,[R("th",{class:"titulo"},"Comandos básicos")])],-1)),R("tbody",null,[R("tr",null,[R("td",{onClick:t[0]||(t[0]=r=>g.toggleDescripcion("ls",r))},"→ ls")]),R("tr",null,[R("td",{onClick:t[1]||(t[1]=r=>g.toggleDescripcion("pwd",r))},"→ pwd")]),R("tr",null,[R("td",{onClick:t[2]||(t[2]=r=>g.toggleDescripcion("cd",r))},"→ cd")]),R("tr",null,[R("td",{onClick:t[3]||(t[3]=r=>g.toggleDescripcion("echo",r))},"→ echo")]),R("tr",null,[R("td",{onClick:t[4]||(t[4]=r=>g.toggleDescripcion("clear",r))},"→ clear")]),R("tr",null,[R("td",{onClick:t[5]||(t[5]=r=>g.toggleDescripcion("cat",r))},"→ cat")]),R("tr",null,[R("td",{onClick:t[6]||(t[6]=r=>g.toggleDescripcion("nano",r))},"→ nano")]),R("tr",null,[R("td",{onClick:t[7]||(t[7]=r=>g.toggleDescripcion("grep",r))},"→ grep")]),R("tr",null,[R("td",{onClick:t[8]||(t[8]=r=>g.toggleDescripcion("sudo",r))},"→ sudo")]),R("tr",null,[R("td",{onClick:t[9]||(t[9]=r=>g.toggleDescripcion("chmod",r))},"→ chmod")])])])]),R("div",zu,[R("table",null,[t[21]||(t[21]=R("thead",null,[R("tr",null,[R("th",{class:"titulo"},"Archivos y directorios")])],-1)),R("tbody",null,[R("tr",null,[R("td",{onClick:t[10]||(t[10]=r=>g.toggleDescripcion("touch",r))},"→ touch")]),R("tr",null,[R("td",{onClick:t[11]||(t[11]=r=>g.toggleDescripcion("mkdir",r))},"→ mkdir")]),R("tr",null,[R("td",{onClick:t[12]||(t[12]=r=>g.toggleDescripcion("rm",r))},"→ rm")]),R("tr",null,[R("td",{onClick:t[13]||(t[13]=r=>g.toggleDescripcion("rmdir",r))},"→ rmdir")]),R("tr",null,[R("td",{onClick:t[14]||(t[14]=r=>g.toggleDescripcion("cp",r))},"→ cp")]),R("tr",null,[R("td",{onClick:t[15]||(t[15]=r=>g.toggleDescripcion("mv",r))},"→ mv")])])])])]),t[22]||(t[22]=oc('<div class="bloqueados" data-v-2d5abfd2><div class="permisos" data-v-2d5abfd2>Permisos <span class="permiso" data-v-2d5abfd2>Aún no disponible</span></div><div class="procesos" data-v-2d5abfd2>Procesos y señales <span class="proceso" data-v-2d5abfd2>Aún no disponible</span></div></div>',1))]),R("footer",Ku,[R("div",Vu,[R("button",{onClick:t[16]||(t[16]=(...r)=>i.goInicio&&i.goInicio(...r))},[...t[23]||(t[23]=[R("img",{src:ta,alt:"Inicio"},null,-1),Ge("Inicio",-1)])])]),R("div",Gu,[R("button",{onClick:t[17]||(t[17]=(...r)=>i.goBiblioteca&&i.goBiblioteca(...r))},[...t[24]||(t[24]=[R("img",{src:sa,alt:"Biblioteca"},null,-1),Ge("Biblioteca",-1)])])]),R("div",Xu,[R("button",{onClick:t[18]||(t[18]=(...r)=>i.goRanking&&i.goRanking(...r))},[...t[25]||(t[25]=[R("img",{src:ia,alt:"Ranking"},null,-1),Ge("Ranking",-1)])])]),R("div",Ju,[R("button",{onClick:t[19]||(t[19]=(...r)=>i.goConfig&&i.goConfig(...r))},[...t[26]||(t[26]=[R("img",{src:ra,alt:"Configuración"},null,-1),Ge("Configuración",-1)])])])])])}const Zu=Xe(Nu,[["render",Yu],["__scopeId","data-v-2d5abfd2"]]),Qu={class:"confirm-email"},ed={class:"Plantilla"},td={key:0,class:"loading"},sd={key:1,class:"result"},id={class:"icon"},rd={key:0,class:"success-icon"},nd={key:1,class:"error-icon"},od={class:"message"},ad={key:0,class:"success-actions"},ld={class:"redirect-info"},cd={key:1,class:"error-actions"},hd=nt({__name:"ConfirmEmail",setup(e){const t=gt(),s=ea(),i=de(!0),c=de(""),g=de(!1),v=de(5);return Mt(async()=>{const r=typeof s.query.token=="string"?s.query.token:"";if(!r){c.value="Token de confirmación no encontrado",g.value=!1,i.value=!1;return}try{const n=await fetch(`https://sistema-de-aprendizaje-linux-production.up.railway.app/auth/confirm-email?token=${r}`);if(!n.ok)throw new Error(`Error HTTP: ${n.status}`);const h=await n.json();c.value="Email confirmado exitosamente. ¡Ya puedes iniciar sesión!",g.value=!0;const f=setInterval(()=>{v.value--,v.value<=0&&(clearInterval(f),t.push("/"))},1e3)}catch(n){console.error("Error confirmando email:",n),c.value="Error al confirmar el email. El token puede haber expirado o ser inválido.",g.value=!1}finally{i.value=!1}}),(r,n)=>(le(),ce("div",Qu,[n[4]||(n[4]=R("div",{class:"Background"},null,-1)),R("div",ed,[i.value?(le(),ce("div",td,[...n[3]||(n[3]=[R("div",{class:"spinner"},null,-1),R("h2",null,"Confirmando tu email...",-1),R("p",null,"Por favor espera un momento",-1)])])):(le(),ce("div",sd,[R("div",id,[g.value?(le(),ce("span",rd,"✅")):(le(),ce("span",nd,"❌"))]),R("h2",{class:ut({success:g.value,error:!g.value})},ve(g.value?"¡Confirmación exitosa!":"Error de confirmación"),3),R("p",od,ve(c.value),1),g.value?(le(),ce("div",ad,[R("p",ld," Serás redirigido al login en "+ve(v.value)+" segundos... ",1),R("button",{onClick:n[0]||(n[0]=h=>wt(t).push("/")),class:"login-btn"}," Ir al Login ahora ")])):(le(),ce("div",cd,[R("button",{onClick:n[1]||(n[1]=h=>wt(t).push("/registro")),class:"register-btn"}," Volver a registrarse "),R("button",{onClick:n[2]||(n[2]=h=>wt(t).push("/")),class:"login-btn"}," Ir al Login ")]))]))])]))}}),ud=Xe(hd,[["__scopeId","data-v-366d0706"]]),dd={name:"Ranking",components:{Header:Ds,Footer:Ts},setup(){const e=gt(),t=de([]),s=de({username:"",correo:"",racha:0,experiencia:0,avatar:""});Mt(async()=>{document.title="Ranking - Sistema de Aprendizaje Linux";const r=localStorage.getItem("user");if(r){const n=JSON.parse(r);s.value.username=n.username,s.value.racha=n.racha,s.value.experiencia=n.experiencia,s.value.avatar=n.avatar,s.value.correo=n.correo}await c()});const i=We(()=>s.value),c=async()=>{try{const r=it.getToken(),n=await fetch("https://sistema-de-aprendizaje-linux-production.up.railway.app/users/ranking",{headers:{Authorization:`Bearer ${r}`,"Content-Type":"application/json"}});if(!n.ok)throw new Error(`Error HTTP: ${n.status}`);const h=await n.json();t.value=h}catch(r){console.error("Error fetching ranking:",r),t.value=[{username:"CristianUser",experiencia:1500},{username:"Cristian",experiencia:900},{username:"juana",experiencia:600},{username:"cherry",experiencia:450}]}};return{ranking:t,displayUser:i,handleLogout:()=>{it.logout(),localStorage.removeItem("token"),localStorage.removeItem("user"),e.push("/")},getDefaultAvatar:r=>{const n=["FF6B6B","4ECDC4","45B7D1","FFA07A","98D8C8","F7DC6F","BB8FCE"],h=r.length%n.length;return`https://ui-avatars.com/api/?name=${r}&background=${n[h]}&color=fff&size=128&bold=true`}}}},fd={class:"page"},_d={class:"content"},pd={class:"ranking-container"},gd={class:"ranking-list"},vd={class:"rank-column"},md={key:0,class:"medal gold"},Sd={key:1,class:"medal silver"},bd={key:2,class:"medal bronze"},yd={key:3,class:"rank-number"},Cd={class:"user-column"},wd={class:"avatar"},Ed=["src","alt"],kd={class:"username"},xd={class:"xp-column"},Rd={class:"xp-value"};function Ad(e,t,s,i,c,g){const v=Qe("Header"),r=Qe("Footer");return le(),ce("div",fd,[Ee(v,{user:i.displayUser,logout:i.handleLogout},null,8,["user","logout"]),R("div",_d,[t[1]||(t[1]=R("h1",{class:"title"},"Ranking de Usuarios",-1)),R("div",pd,[t[0]||(t[0]=R("div",{class:"ranking-header"},[R("span",{class:"col-rank"},"Rank"),R("span",{class:"col-user"},"Usuario"),R("span",{class:"col-xp"},"Experiencia")],-1)),R("div",gd,[(le(!0),ce(Ie,null,Ut(i.ranking,(n,h)=>(le(),ce("div",{key:n.username,class:ut(["ranking-item",{"top-three":h<3,"first-place":h===0}])},[R("div",vd,[h===0?(le(),ce("span",md,"🥇")):h===1?(le(),ce("span",Sd,"🥈")):h===2?(le(),ce("span",bd,"🥉")):(le(),ce("span",yd,ve(h+1),1))]),R("div",Cd,[R("div",wd,[R("img",{src:n.avatar||i.getDefaultAvatar(n.username),alt:n.username},null,8,Ed)]),R("span",kd,ve(n.username),1)]),R("div",xd,[R("span",Rd,ve(n.experiencia)+" XP",1)])],2))),128))])])]),Ee(r,{goInicio:()=>e.$router.push("/dashboard"),goBiblioteca:()=>e.$router.push("/biblioteca"),goRanking:()=>e.$router.push("/ranking"),goConfig:()=>e.$router.push("/configuracion")},null,8,["goInicio","goBiblioteca","goRanking","goConfig"])])}const Ld=Xe(dd,[["render",Ad],["__scopeId","data-v-15de872d"]]),Dd={name:"Configuracion",components:{Header:Ds,Footer:Ts},setup(){const e=gt(),t=de({username:"",correo:"",racha:0,experiencia:0,avatar:""}),s=de(""),i=de(""),c=de({current:"",new:"",confirm:""}),g=de(["https://ui-avatars.com/api/?name=Avatar1&background=FF6B6B&color=fff&size=128&bold=true","https://ui-avatars.com/api/?name=Avatar2&background=4ECDC4&color=fff&size=128&bold=true","https://ui-avatars.com/api/?name=Avatar3&background=45B7D1&color=fff&size=128&bold=true","https://ui-avatars.com/api/?name=Avatar4&background=FFA07A&color=fff&size=128&bold=true","https://ui-avatars.com/api/?name=Avatar5&background=98D8C8&color=fff&size=128&bold=true","https://ui-avatars.com/api/?name=Avatar6&background=F7DC6F&color=fff&size=128&bold=true"]);return Mt(()=>{document.title="Configuración - Sistema de Aprendizaje Linux";const a=localStorage.getItem("user");if(a){const _=JSON.parse(a);t.value={username:_.username||"",correo:_.correo||"",racha:_.racha||0,experiencia:_.experiencia||0,avatar:_.avatar||""},s.value=_.avatar||"",i.value=_.username||""}}),{displayUser:We(()=>t.value),selectedAvatar:s,newUsername:i,passwordData:c,avatarOptions:g,getDefaultAvatar:a=>{const _=["FF6B6B","4ECDC4","45B7D1","FFA07A","98D8C8","F7DC6F","BB8FCE"],m=a.length%_.length;return`https://ui-avatars.com/api/?name=${a}&background=${_[m]}&color=fff&size=128&bold=true`},updateUsername:async()=>{if(!i.value.trim()){alert("Por favor ingresa un nombre de usuario");return}try{const a=it.getToken();if((await fetch("https://sistema-de-aprendizaje-linux-production.up.railway.app/users/update",{method:"PUT",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"},body:JSON.stringify({username:i.value})})).ok){const m={...t.value,username:i.value};t.value=m,localStorage.setItem("user",JSON.stringify(m)),alert("Nombre de usuario actualizado correctamente")}else alert("Error al actualizar el nombre de usuario")}catch(a){console.error("Error:",a),alert("Error al actualizar el nombre de usuario")}},updatePassword:async()=>{if(!c.value.current||!c.value.new||!c.value.confirm){alert("Por favor completa todos los campos");return}if(c.value.new!==c.value.confirm){alert("Las contraseñas no coinciden");return}try{const a=it.getToken();(await fetch("https://sistema-de-aprendizaje-linux-production.up.railway.app/users/change-password",{method:"PUT",headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"},body:JSON.stringify({currentPassword:c.value.current,newPassword:c.value.new})})).ok?(alert("Contraseña actualizada correctamente"),c.value={current:"",new:"",confirm:""}):alert("Error al actualizar la contraseña. Verifica tu contraseña actual.")}catch(a){console.error("Error:",a),alert("Error al actualizar la contraseña")}},handleLogout:()=>{it.logout(),localStorage.removeItem("token"),localStorage.removeItem("user"),e.push("/")}}}},Td={class:"page"},Bd={class:"content"},Od={class:"section"},Pd={class:"info-grid"},Md={class:"info-item"},Id={class:"info-value"},Hd={class:"info-item"},Fd={class:"info-value"},$d={class:"info-item"},Nd={class:"info-value"},Ud={class:"info-item"},Wd={class:"info-value"},jd={class:"avatar-section"},qd={class:"current-avatar"},zd=["src"],Kd={class:"section"},Vd={class:"avatar-grid"},Gd=["onClick"],Xd=["src","alt"],Jd={class:"section"},Yd={class:"input-group"},Zd={class:"section"},Qd={class:"input-group"},ef={class:"section"};function tf(e,t,s,i,c,g){const v=Qe("Header"),r=Qe("Footer");return le(),ce("div",Td,[Ee(v,{user:i.displayUser,logout:i.handleLogout},null,8,["user","logout"]),R("div",Bd,[t[22]||(t[22]=R("h1",{class:"title"},"Configuración",-1)),R("div",Od,[t[12]||(t[12]=R("h2",{class:"section-title"},"Información del perfil",-1)),t[13]||(t[13]=R("p",{class:"section-subtitle"},"Tu progreso te define más que palabras",-1)),R("div",Pd,[R("div",Md,[t[7]||(t[7]=R("span",{class:"info-label"},"Racha",-1)),R("span",Id,ve(i.displayUser.racha)+" días",1)]),R("div",Hd,[t[8]||(t[8]=R("span",{class:"info-label"},"Experiencia",-1)),R("span",Fd,ve(i.displayUser.experiencia)+" XP",1)]),R("div",$d,[t[9]||(t[9]=R("span",{class:"info-label"},"Nombre de usuario",-1)),R("span",Nd,ve(i.displayUser.username),1)]),R("div",Ud,[t[10]||(t[10]=R("span",{class:"info-label"},"Correo electrónico",-1)),R("span",Wd,ve(i.displayUser.correo),1)])]),R("div",jd,[R("div",qd,[R("img",{src:i.displayUser.avatar||i.getDefaultAvatar(i.displayUser.username),alt:"Avatar actual"},null,8,zd),t[11]||(t[11]=R("div",{class:"avatar-info"},[R("span",{class:"avatar-label"},"Avatar"),R("span",{class:"avatar-sublabel"},"Avatar actual")],-1))])])]),R("div",Kd,[t[14]||(t[14]=R("h2",{class:"section-title"},"Cambiar avatar",-1)),t[15]||(t[15]=R("p",{class:"section-subtitle"},"Elige un nuevo avatar de la colección.",-1)),R("div",Vd,[(le(!0),ce(Ie,null,Ut(i.avatarOptions,(n,h)=>(le(),ce("div",{key:h,class:ut(["avatar-option",{selected:i.selectedAvatar===n}]),onClick:f=>i.selectedAvatar=n},[R("img",{src:n,alt:`Avatar ${h+1}`},null,8,Xd)],10,Gd))),128))])]),R("div",Jd,[t[16]||(t[16]=R("h2",{class:"section-title"},"Cambiar nombre de usuario",-1)),t[17]||(t[17]=R("p",{class:"section-subtitle"},"Actualiza tu nombre de usuario",-1)),R("div",Yd,[Re(R("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=n=>i.newUsername=n),placeholder:"Nuevo nombre de usuario",class:"text-input"},null,512),[[Le,i.newUsername]]),R("button",{onClick:t[1]||(t[1]=(...n)=>i.updateUsername&&i.updateUsername(...n)),class:"btn-primary"}," Guardar nombre de usuario ")])]),R("div",Zd,[t[18]||(t[18]=R("h2",{class:"section-title"},"Cambiar contraseña",-1)),t[19]||(t[19]=R("p",{class:"section-subtitle"},"Necesita tu contraseña vieja para confirmar la nueva contraseña.",-1)),R("div",Qd,[Re(R("input",{type:"password","onUpdate:modelValue":t[2]||(t[2]=n=>i.passwordData.current=n),placeholder:"Contraseña actual",class:"text-input"},null,512),[[Le,i.passwordData.current]]),Re(R("input",{type:"password","onUpdate:modelValue":t[3]||(t[3]=n=>i.passwordData.new=n),placeholder:"Nueva contraseña",class:"text-input"},null,512),[[Le,i.passwordData.new]]),Re(R("input",{type:"password","onUpdate:modelValue":t[4]||(t[4]=n=>i.passwordData.confirm=n),placeholder:"Confirmar nueva contraseña",class:"text-input"},null,512),[[Le,i.passwordData.confirm]]),R("button",{onClick:t[5]||(t[5]=(...n)=>i.updatePassword&&i.updatePassword(...n)),class:"btn-primary"}," Cambiar contraseña ")])]),R("div",ef,[t[20]||(t[20]=R("h2",{class:"section-title"},"Cerrar sesión",-1)),t[21]||(t[21]=R("p",{class:"section-subtitle"},"Finaliza tu sesión actual",-1)),R("button",{onClick:t[6]||(t[6]=(...n)=>i.handleLogout&&i.handleLogout(...n)),class:"btn-danger"}," Cerrar sesión ")]),t[23]||(t[23]=R("div",{class:"footer-info"},[R("span",null,"© 2024 Penguin Path. Todos los derechos reservados."),R("div",{class:"footer-links"},[R("a",{href:"#"},"Términos de servicio"),R("a",{href:"#"},"Política de privacidad")])],-1))]),Ee(r,{goInicio:()=>e.$router.push("/dashboard"),goBiblioteca:()=>e.$router.push("/biblioteca"),goRanking:()=>e.$router.push("/ranking"),goConfig:()=>e.$router.push("/configuracion")},null,8,["goInicio","goBiblioteca","goRanking","goConfig"])])}const sf=Xe(Dd,[["render",tf],["__scopeId","data-v-17b4c581"]]),pt=Object.create(null);pt.open="0";pt.close="1";pt.ping="2";pt.pong="3";pt.message="4";pt.upgrade="5";pt.noop="6";const Ws=Object.create(null);Object.keys(pt).forEach(e=>{Ws[pt[e]]=e});const tr={type:"error",data:"parser error"},na=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",oa=typeof ArrayBuffer=="function",aa=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,Rr=({type:e,data:t},s,i)=>na&&t instanceof Blob?s?i(t):Tn(t,i):oa&&(t instanceof ArrayBuffer||aa(t))?s?i(t):Tn(new Blob([t]),i):i(pt[e]+(t||"")),Tn=(e,t)=>{const s=new FileReader;return s.onload=function(){const i=s.result.split(",")[1];t("b"+(i||""))},s.readAsDataURL(e)};function Bn(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let Mi;function rf(e,t){if(na&&e.data instanceof Blob)return e.data.arrayBuffer().then(Bn).then(t);if(oa&&(e.data instanceof ArrayBuffer||aa(e.data)))return t(Bn(e.data));Rr(e,!1,s=>{Mi||(Mi=new TextEncoder),t(Mi.encode(s))})}const On="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",cs=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<On.length;e++)cs[On.charCodeAt(e)]=e;const nf=e=>{let t=e.length*.75,s=e.length,i,c=0,g,v,r,n;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const h=new ArrayBuffer(t),f=new Uint8Array(h);for(i=0;i<s;i+=4)g=cs[e.charCodeAt(i)],v=cs[e.charCodeAt(i+1)],r=cs[e.charCodeAt(i+2)],n=cs[e.charCodeAt(i+3)],f[c++]=g<<2|v>>4,f[c++]=(v&15)<<4|r>>2,f[c++]=(r&3)<<6|n&63;return h},of=typeof ArrayBuffer=="function",Ar=(e,t)=>{if(typeof e!="string")return{type:"message",data:la(e,t)};const s=e.charAt(0);return s==="b"?{type:"message",data:af(e.substring(1),t)}:Ws[s]?e.length>1?{type:Ws[s],data:e.substring(1)}:{type:Ws[s]}:tr},af=(e,t)=>{if(of){const s=nf(e);return la(s,t)}else return{base64:!0,data:e}},la=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},ca="",lf=(e,t)=>{const s=e.length,i=new Array(s);let c=0;e.forEach((g,v)=>{Rr(g,!1,r=>{i[v]=r,++c===s&&t(i.join(ca))})})},cf=(e,t)=>{const s=e.split(ca),i=[];for(let c=0;c<s.length;c++){const g=Ar(s[c],t);if(i.push(g),g.type==="error")break}return i};function hf(){return new TransformStream({transform(e,t){rf(e,s=>{const i=s.length;let c;if(i<126)c=new Uint8Array(1),new DataView(c.buffer).setUint8(0,i);else if(i<65536){c=new Uint8Array(3);const g=new DataView(c.buffer);g.setUint8(0,126),g.setUint16(1,i)}else{c=new Uint8Array(9);const g=new DataView(c.buffer);g.setUint8(0,127),g.setBigUint64(1,BigInt(i))}e.data&&typeof e.data!="string"&&(c[0]|=128),t.enqueue(c),t.enqueue(s)})}})}let Ii;function Ms(e){return e.reduce((t,s)=>t+s.length,0)}function Is(e,t){if(e[0].length===t)return e.shift();const s=new Uint8Array(t);let i=0;for(let c=0;c<t;c++)s[c]=e[0][i++],i===e[0].length&&(e.shift(),i=0);return e.length&&i<e[0].length&&(e[0]=e[0].slice(i)),s}function uf(e,t){Ii||(Ii=new TextDecoder);const s=[];let i=0,c=-1,g=!1;return new TransformStream({transform(v,r){for(s.push(v);;){if(i===0){if(Ms(s)<1)break;const n=Is(s,1);g=(n[0]&128)===128,c=n[0]&127,c<126?i=3:c===126?i=1:i=2}else if(i===1){if(Ms(s)<2)break;const n=Is(s,2);c=new DataView(n.buffer,n.byteOffset,n.length).getUint16(0),i=3}else if(i===2){if(Ms(s)<8)break;const n=Is(s,8),h=new DataView(n.buffer,n.byteOffset,n.length),f=h.getUint32(0);if(f>Math.pow(2,21)-1){r.enqueue(tr);break}c=f*Math.pow(2,32)+h.getUint32(4),i=3}else{if(Ms(s)<c)break;const n=Is(s,c);r.enqueue(Ar(g?n:Ii.decode(n),t)),i=0}if(c===0||c>e){r.enqueue(tr);break}}}})}const ha=4;function De(e){if(e)return df(e)}function df(e){for(var t in De.prototype)e[t]=De.prototype[t];return e}De.prototype.on=De.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};De.prototype.once=function(e,t){function s(){this.off(e,s),t.apply(this,arguments)}return s.fn=t,this.on(e,s),this};De.prototype.off=De.prototype.removeListener=De.prototype.removeAllListeners=De.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var s=this._callbacks["$"+e];if(!s)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var i,c=0;c<s.length;c++)if(i=s[c],i===t||i.fn===t){s.splice(c,1);break}return s.length===0&&delete this._callbacks["$"+e],this};De.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),s=this._callbacks["$"+e],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(s){s=s.slice(0);for(var i=0,c=s.length;i<c;++i)s[i].apply(this,t)}return this};De.prototype.emitReserved=De.prototype.emit;De.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};De.prototype.hasListeners=function(e){return!!this.listeners(e).length};const yi=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,s)=>s(t,0),Je=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),ff="arraybuffer";function ua(e,...t){return t.reduce((s,i)=>(e.hasOwnProperty(i)&&(s[i]=e[i]),s),{})}const _f=Je.setTimeout,pf=Je.clearTimeout;function Ci(e,t){t.useNativeTimers?(e.setTimeoutFn=_f.bind(Je),e.clearTimeoutFn=pf.bind(Je)):(e.setTimeoutFn=Je.setTimeout.bind(Je),e.clearTimeoutFn=Je.clearTimeout.bind(Je))}const gf=1.33;function vf(e){return typeof e=="string"?mf(e):Math.ceil((e.byteLength||e.size)*gf)}function mf(e){let t=0,s=0;for(let i=0,c=e.length;i<c;i++)t=e.charCodeAt(i),t<128?s+=1:t<2048?s+=2:t<55296||t>=57344?s+=3:(i++,s+=4);return s}function da(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function Sf(e){let t="";for(let s in e)e.hasOwnProperty(s)&&(t.length&&(t+="&"),t+=encodeURIComponent(s)+"="+encodeURIComponent(e[s]));return t}function bf(e){let t={},s=e.split("&");for(let i=0,c=s.length;i<c;i++){let g=s[i].split("=");t[decodeURIComponent(g[0])]=decodeURIComponent(g[1])}return t}class yf extends Error{constructor(t,s,i){super(t),this.description=s,this.context=i,this.type="TransportError"}}class Lr extends De{constructor(t){super(),this.writable=!1,Ci(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,s,i){return super.emitReserved("error",new yf(t,s,i)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const s=Ar(t,this.socket.binaryType);this.onPacket(s)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,s={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(s)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const s=Sf(t);return s.length?"?"+s:""}}class Cf extends Lr{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const s=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let i=0;this._polling&&(i++,this.once("pollComplete",function(){--i||s()})),this.writable||(i++,this.once("drain",function(){--i||s()}))}else s()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const s=i=>{if(this.readyState==="opening"&&i.type==="open"&&this.onOpen(),i.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(i)};cf(t,this.socket.binaryType).forEach(s),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,lf(t,s=>{this.doWrite(s,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",s=this.query||{};return this.opts.timestampRequests!==!1&&(s[this.opts.timestampParam]=da()),!this.supportsBinary&&!s.sid&&(s.b64=1),this.createUri(t,s)}}let fa=!1;try{fa=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const wf=fa;function Ef(){}class kf extends Cf{constructor(t){if(super(t),typeof location<"u"){const s=location.protocol==="https:";let i=location.port;i||(i=s?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||i!==t.port}}doWrite(t,s){const i=this.request({method:"POST",data:t});i.on("success",s),i.on("error",(c,g)=>{this.onError("xhr post error",c,g)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(s,i)=>{this.onError("xhr poll error",s,i)}),this.pollXhr=t}}class dt extends De{constructor(t,s,i){super(),this.createRequest=t,Ci(this,i),this._opts=i,this._method=i.method||"GET",this._uri=s,this._data=i.data!==void 0?i.data:null,this._create()}_create(){var t;const s=ua(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");s.xdomain=!!this._opts.xd;const i=this._xhr=this.createRequest(s);try{i.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){i.setDisableHeaderCheck&&i.setDisableHeaderCheck(!0);for(let c in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(c)&&i.setRequestHeader(c,this._opts.extraHeaders[c])}}catch{}if(this._method==="POST")try{i.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{i.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(i),"withCredentials"in i&&(i.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(i.timeout=this._opts.requestTimeout),i.onreadystatechange=()=>{var c;i.readyState===3&&((c=this._opts.cookieJar)===null||c===void 0||c.parseCookies(i.getResponseHeader("set-cookie"))),i.readyState===4&&(i.status===200||i.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof i.status=="number"?i.status:0)},0))},i.send(this._data)}catch(c){this.setTimeoutFn(()=>{this._onError(c)},0);return}typeof document<"u"&&(this._index=dt.requestsCount++,dt.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=Ef,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete dt.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}dt.requestsCount=0;dt.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Pn);else if(typeof addEventListener=="function"){const e="onpagehide"in Je?"pagehide":"unload";addEventListener(e,Pn,!1)}}function Pn(){for(let e in dt.requests)dt.requests.hasOwnProperty(e)&&dt.requests[e].abort()}const xf=(function(){const e=_a({xdomain:!1});return e&&e.responseType!==null})();class Rf extends kf{constructor(t){super(t);const s=t&&t.forceBase64;this.supportsBinary=xf&&!s}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new dt(_a,this.uri(),t)}}function _a(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||wf))return new XMLHttpRequest}catch{}if(!t)try{return new Je[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const pa=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class Af extends Lr{get name(){return"websocket"}doOpen(){const t=this.uri(),s=this.opts.protocols,i=pa?{}:ua(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(i.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,s,i)}catch(c){return this.emitReserved("error",c)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let s=0;s<t.length;s++){const i=t[s],c=s===t.length-1;Rr(i,this.supportsBinary,g=>{try{this.doWrite(i,g)}catch{}c&&yi(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",s=this.query||{};return this.opts.timestampRequests&&(s[this.opts.timestampParam]=da()),this.supportsBinary||(s.b64=1),this.createUri(t,s)}}const Hi=Je.WebSocket||Je.MozWebSocket;class Lf extends Af{createSocket(t,s,i){return pa?new Hi(t,s,i):s?new Hi(t,s):new Hi(t)}doWrite(t,s){this.ws.send(s)}}class Df extends Lr{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const s=uf(Number.MAX_SAFE_INTEGER,this.socket.binaryType),i=t.readable.pipeThrough(s).getReader(),c=hf();c.readable.pipeTo(t.writable),this._writer=c.writable.getWriter();const g=()=>{i.read().then(({done:r,value:n})=>{r||(this.onPacket(n),g())}).catch(r=>{})};g();const v={type:"open"};this.query.sid&&(v.data=`{"sid":"${this.query.sid}"}`),this._writer.write(v).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let s=0;s<t.length;s++){const i=t[s],c=s===t.length-1;this._writer.write(i).then(()=>{c&&yi(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const Tf={websocket:Lf,webtransport:Df,polling:Rf},Bf=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Of=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function sr(e){if(e.length>8e3)throw"URI too long";const t=e,s=e.indexOf("["),i=e.indexOf("]");s!=-1&&i!=-1&&(e=e.substring(0,s)+e.substring(s,i).replace(/:/g,";")+e.substring(i,e.length));let c=Bf.exec(e||""),g={},v=14;for(;v--;)g[Of[v]]=c[v]||"";return s!=-1&&i!=-1&&(g.source=t,g.host=g.host.substring(1,g.host.length-1).replace(/;/g,":"),g.authority=g.authority.replace("[","").replace("]","").replace(/;/g,":"),g.ipv6uri=!0),g.pathNames=Pf(g,g.path),g.queryKey=Mf(g,g.query),g}function Pf(e,t){const s=/\/{2,9}/g,i=t.replace(s,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&i.splice(0,1),t.slice(-1)=="/"&&i.splice(i.length-1,1),i}function Mf(e,t){const s={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(i,c,g){c&&(s[c]=g)}),s}const ir=typeof addEventListener=="function"&&typeof removeEventListener=="function",js=[];ir&&addEventListener("offline",()=>{js.forEach(e=>e())},!1);class Bt extends De{constructor(t,s){if(super(),this.binaryType=ff,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(s=t,t=null),t){const i=sr(t);s.hostname=i.host,s.secure=i.protocol==="https"||i.protocol==="wss",s.port=i.port,i.query&&(s.query=i.query)}else s.host&&(s.hostname=sr(s.host).host);Ci(this,s),this.secure=s.secure!=null?s.secure:typeof location<"u"&&location.protocol==="https:",s.hostname&&!s.port&&(s.port=this.secure?"443":"80"),this.hostname=s.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=s.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},s.transports.forEach(i=>{const c=i.prototype.name;this.transports.push(c),this._transportsByName[c]=i}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},s),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=bf(this.opts.query)),ir&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},js.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const s=Object.assign({},this.opts.query);s.EIO=ha,s.transport=t,this.id&&(s.sid=this.id);const i=Object.assign({},this.opts,{query:s,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](i)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&Bt.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const s=this.createTransport(t);s.open(),this.setTransport(s)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",s=>this._onClose("transport close",s))}onOpen(){this.readyState="open",Bt.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const s=new Error("server error");s.code=t.data,this._onError(s);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let s=1;for(let i=0;i<this.writeBuffer.length;i++){const c=this.writeBuffer[i].data;if(c&&(s+=vf(c)),i>0&&s>this._maxPayload)return this.writeBuffer.slice(0,i);s+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,yi(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,s,i){return this._sendPacket("message",t,s,i),this}send(t,s,i){return this._sendPacket("message",t,s,i),this}_sendPacket(t,s,i,c){if(typeof s=="function"&&(c=s,s=void 0),typeof i=="function"&&(c=i,i=null),this.readyState==="closing"||this.readyState==="closed")return;i=i||{},i.compress=i.compress!==!1;const g={type:t,data:s,options:i};this.emitReserved("packetCreate",g),this.writeBuffer.push(g),c&&this.once("flush",c),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},s=()=>{this.off("upgrade",s),this.off("upgradeError",s),t()},i=()=>{this.once("upgrade",s),this.once("upgradeError",s)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?i():t()}):this.upgrading?i():t()),this}_onError(t){if(Bt.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,s){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),ir&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const i=js.indexOf(this._offlineEventListener);i!==-1&&js.splice(i,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,s),this.writeBuffer=[],this._prevBufferLen=0}}}Bt.protocol=ha;class If extends Bt{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let s=this.createTransport(t),i=!1;Bt.priorWebsocketSuccess=!1;const c=()=>{i||(s.send([{type:"ping",data:"probe"}]),s.once("packet",a=>{if(!i)if(a.type==="pong"&&a.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",s),!s)return;Bt.priorWebsocketSuccess=s.name==="websocket",this.transport.pause(()=>{i||this.readyState!=="closed"&&(f(),this.setTransport(s),s.send([{type:"upgrade"}]),this.emitReserved("upgrade",s),s=null,this.upgrading=!1,this.flush())})}else{const _=new Error("probe error");_.transport=s.name,this.emitReserved("upgradeError",_)}}))};function g(){i||(i=!0,f(),s.close(),s=null)}const v=a=>{const _=new Error("probe error: "+a);_.transport=s.name,g(),this.emitReserved("upgradeError",_)};function r(){v("transport closed")}function n(){v("socket closed")}function h(a){s&&a.name!==s.name&&g()}const f=()=>{s.removeListener("open",c),s.removeListener("error",v),s.removeListener("close",r),this.off("close",n),this.off("upgrading",h)};s.once("open",c),s.once("error",v),s.once("close",r),this.once("close",n),this.once("upgrading",h),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{i||s.open()},200):s.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const s=[];for(let i=0;i<t.length;i++)~this.transports.indexOf(t[i])&&s.push(t[i]);return s}}let Hf=class extends If{constructor(t,s={}){const i=typeof t=="object"?t:s;(!i.transports||i.transports&&typeof i.transports[0]=="string")&&(i.transports=(i.transports||["polling","websocket","webtransport"]).map(c=>Tf[c]).filter(c=>!!c)),super(t,i)}};function Ff(e,t="",s){let i=e;s=s||typeof location<"u"&&location,e==null&&(e=s.protocol+"//"+s.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=s.protocol+e:e=s.host+e),/^(https?|wss?):\/\//.test(e)||(typeof s<"u"?e=s.protocol+"//"+e:e="https://"+e),i=sr(e)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/";const g=i.host.indexOf(":")!==-1?"["+i.host+"]":i.host;return i.id=i.protocol+"://"+g+":"+i.port+t,i.href=i.protocol+"://"+g+(s&&s.port===i.port?"":":"+i.port),i}const $f=typeof ArrayBuffer=="function",Nf=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,ga=Object.prototype.toString,Uf=typeof Blob=="function"||typeof Blob<"u"&&ga.call(Blob)==="[object BlobConstructor]",Wf=typeof File=="function"||typeof File<"u"&&ga.call(File)==="[object FileConstructor]";function Dr(e){return $f&&(e instanceof ArrayBuffer||Nf(e))||Uf&&e instanceof Blob||Wf&&e instanceof File}function qs(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let s=0,i=e.length;s<i;s++)if(qs(e[s]))return!0;return!1}if(Dr(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return qs(e.toJSON(),!0);for(const s in e)if(Object.prototype.hasOwnProperty.call(e,s)&&qs(e[s]))return!0;return!1}function jf(e){const t=[],s=e.data,i=e;return i.data=rr(s,t),i.attachments=t.length,{packet:i,buffers:t}}function rr(e,t){if(!e)return e;if(Dr(e)){const s={_placeholder:!0,num:t.length};return t.push(e),s}else if(Array.isArray(e)){const s=new Array(e.length);for(let i=0;i<e.length;i++)s[i]=rr(e[i],t);return s}else if(typeof e=="object"&&!(e instanceof Date)){const s={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(s[i]=rr(e[i],t));return s}return e}function qf(e,t){return e.data=nr(e.data,t),delete e.attachments,e}function nr(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let s=0;s<e.length;s++)e[s]=nr(e[s],t);else if(typeof e=="object")for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(e[s]=nr(e[s],t));return e}const zf=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],Kf=5;var ge;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(ge||(ge={}));class Vf{constructor(t){this.replacer=t}encode(t){return(t.type===ge.EVENT||t.type===ge.ACK)&&qs(t)?this.encodeAsBinary({type:t.type===ge.EVENT?ge.BINARY_EVENT:ge.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let s=""+t.type;return(t.type===ge.BINARY_EVENT||t.type===ge.BINARY_ACK)&&(s+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(s+=t.nsp+","),t.id!=null&&(s+=t.id),t.data!=null&&(s+=JSON.stringify(t.data,this.replacer)),s}encodeAsBinary(t){const s=jf(t),i=this.encodeAsString(s.packet),c=s.buffers;return c.unshift(i),c}}function Mn(e){return Object.prototype.toString.call(e)==="[object Object]"}class Tr extends De{constructor(t){super(),this.reviver=t}add(t){let s;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");s=this.decodeString(t);const i=s.type===ge.BINARY_EVENT;i||s.type===ge.BINARY_ACK?(s.type=i?ge.EVENT:ge.ACK,this.reconstructor=new Gf(s),s.attachments===0&&super.emitReserved("decoded",s)):super.emitReserved("decoded",s)}else if(Dr(t)||t.base64)if(this.reconstructor)s=this.reconstructor.takeBinaryData(t),s&&(this.reconstructor=null,super.emitReserved("decoded",s));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let s=0;const i={type:Number(t.charAt(0))};if(ge[i.type]===void 0)throw new Error("unknown packet type "+i.type);if(i.type===ge.BINARY_EVENT||i.type===ge.BINARY_ACK){const g=s+1;for(;t.charAt(++s)!=="-"&&s!=t.length;);const v=t.substring(g,s);if(v!=Number(v)||t.charAt(s)!=="-")throw new Error("Illegal attachments");i.attachments=Number(v)}if(t.charAt(s+1)==="/"){const g=s+1;for(;++s&&!(t.charAt(s)===","||s===t.length););i.nsp=t.substring(g,s)}else i.nsp="/";const c=t.charAt(s+1);if(c!==""&&Number(c)==c){const g=s+1;for(;++s;){const v=t.charAt(s);if(v==null||Number(v)!=v){--s;break}if(s===t.length)break}i.id=Number(t.substring(g,s+1))}if(t.charAt(++s)){const g=this.tryParse(t.substr(s));if(Tr.isPayloadValid(i.type,g))i.data=g;else throw new Error("invalid payload")}return i}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,s){switch(t){case ge.CONNECT:return Mn(s);case ge.DISCONNECT:return s===void 0;case ge.CONNECT_ERROR:return typeof s=="string"||Mn(s);case ge.EVENT:case ge.BINARY_EVENT:return Array.isArray(s)&&(typeof s[0]=="number"||typeof s[0]=="string"&&zf.indexOf(s[0])===-1);case ge.ACK:case ge.BINARY_ACK:return Array.isArray(s)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Gf{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const s=qf(this.reconPack,this.buffers);return this.finishedReconstruction(),s}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const Xf=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Tr,Encoder:Vf,get PacketType(){return ge},protocol:Kf},Symbol.toStringTag,{value:"Module"}));function et(e,t,s){return e.on(t,s),function(){e.off(t,s)}}const Jf=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class va extends De{constructor(t,s,i){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=s,i&&i.auth&&(this.auth=i.auth),this._opts=Object.assign({},i),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[et(t,"open",this.onopen.bind(this)),et(t,"packet",this.onpacket.bind(this)),et(t,"error",this.onerror.bind(this)),et(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...s){var i,c,g;if(Jf.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(s.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(s),this;const v={type:ge.EVENT,data:s};if(v.options={},v.options.compress=this.flags.compress!==!1,typeof s[s.length-1]=="function"){const f=this.ids++,a=s.pop();this._registerAckCallback(f,a),v.id=f}const r=(c=(i=this.io.engine)===null||i===void 0?void 0:i.transport)===null||c===void 0?void 0:c.writable,n=this.connected&&!(!((g=this.io.engine)===null||g===void 0)&&g._hasPingExpired());return this.flags.volatile&&!r||(n?(this.notifyOutgoingListeners(v),this.packet(v)):this.sendBuffer.push(v)),this.flags={},this}_registerAckCallback(t,s){var i;const c=(i=this.flags.timeout)!==null&&i!==void 0?i:this._opts.ackTimeout;if(c===void 0){this.acks[t]=s;return}const g=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let r=0;r<this.sendBuffer.length;r++)this.sendBuffer[r].id===t&&this.sendBuffer.splice(r,1);s.call(this,new Error("operation has timed out"))},c),v=(...r)=>{this.io.clearTimeoutFn(g),s.apply(this,r)};v.withError=!0,this.acks[t]=v}emitWithAck(t,...s){return new Promise((i,c)=>{const g=(v,r)=>v?c(v):i(r);g.withError=!0,s.push(g),this.emit(t,...s)})}_addToQueue(t){let s;typeof t[t.length-1]=="function"&&(s=t.pop());const i={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((c,...g)=>i!==this._queue[0]?void 0:(c!==null?i.tryCount>this._opts.retries&&(this._queue.shift(),s&&s(c)):(this._queue.shift(),s&&s(null,...g)),i.pending=!1,this._drainQueue())),this._queue.push(i),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const s=this._queue[0];s.pending&&!t||(s.pending=!0,s.tryCount++,this.flags=s.flags,this.emit.apply(this,s.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:ge.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,s){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,s),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(i=>String(i.id)===t)){const i=this.acks[t];delete this.acks[t],i.withError&&i.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case ge.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case ge.EVENT:case ge.BINARY_EVENT:this.onevent(t);break;case ge.ACK:case ge.BINARY_ACK:this.onack(t);break;case ge.DISCONNECT:this.ondisconnect();break;case ge.CONNECT_ERROR:this.destroy();const i=new Error(t.data.message);i.data=t.data.data,this.emitReserved("connect_error",i);break}}onevent(t){const s=t.data||[];t.id!=null&&s.push(this.ack(t.id)),this.connected?this.emitEvent(s):this.receiveBuffer.push(Object.freeze(s))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const s=this._anyListeners.slice();for(const i of s)i.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const s=this;let i=!1;return function(...c){i||(i=!0,s.packet({type:ge.ACK,id:t,data:c}))}}onack(t){const s=this.acks[t.id];typeof s=="function"&&(delete this.acks[t.id],s.withError&&t.data.unshift(null),s.apply(this,t.data))}onconnect(t,s){this.id=t,this.recovered=s&&this._pid===s,this._pid=s,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:ge.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const s=this._anyListeners;for(let i=0;i<s.length;i++)if(t===s[i])return s.splice(i,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const s=this._anyOutgoingListeners;for(let i=0;i<s.length;i++)if(t===s[i])return s.splice(i,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const s=this._anyOutgoingListeners.slice();for(const i of s)i.apply(this,t.data)}}}function is(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}is.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),s=Math.floor(t*this.jitter*e);e=(Math.floor(t*10)&1)==0?e-s:e+s}return Math.min(e,this.max)|0};is.prototype.reset=function(){this.attempts=0};is.prototype.setMin=function(e){this.ms=e};is.prototype.setMax=function(e){this.max=e};is.prototype.setJitter=function(e){this.jitter=e};class or extends De{constructor(t,s){var i;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(s=t,t=void 0),s=s||{},s.path=s.path||"/socket.io",this.opts=s,Ci(this,s),this.reconnection(s.reconnection!==!1),this.reconnectionAttempts(s.reconnectionAttempts||1/0),this.reconnectionDelay(s.reconnectionDelay||1e3),this.reconnectionDelayMax(s.reconnectionDelayMax||5e3),this.randomizationFactor((i=s.randomizationFactor)!==null&&i!==void 0?i:.5),this.backoff=new is({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(s.timeout==null?2e4:s.timeout),this._readyState="closed",this.uri=t;const c=s.parser||Xf;this.encoder=new c.Encoder,this.decoder=new c.Decoder,this._autoConnect=s.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var s;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(s=this.backoff)===null||s===void 0||s.setMin(t),this)}randomizationFactor(t){var s;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(s=this.backoff)===null||s===void 0||s.setJitter(t),this)}reconnectionDelayMax(t){var s;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(s=this.backoff)===null||s===void 0||s.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new Hf(this.uri,this.opts);const s=this.engine,i=this;this._readyState="opening",this.skipReconnect=!1;const c=et(s,"open",function(){i.onopen(),t&&t()}),g=r=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",r),t?t(r):this.maybeReconnectOnOpen()},v=et(s,"error",g);if(this._timeout!==!1){const r=this._timeout,n=this.setTimeoutFn(()=>{c(),g(new Error("timeout")),s.close()},r);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}return this.subs.push(c),this.subs.push(v),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(et(t,"ping",this.onping.bind(this)),et(t,"data",this.ondata.bind(this)),et(t,"error",this.onerror.bind(this)),et(t,"close",this.onclose.bind(this)),et(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(s){this.onclose("parse error",s)}}ondecoded(t){yi(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,s){let i=this.nsps[t];return i?this._autoConnect&&!i.active&&i.connect():(i=new va(this,t,s),this.nsps[t]=i),i}_destroy(t){const s=Object.keys(this.nsps);for(const i of s)if(this.nsps[i].active)return;this._close()}_packet(t){const s=this.encoder.encode(t);for(let i=0;i<s.length;i++)this.engine.write(s[i],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,s){var i;this.cleanup(),(i=this.engine)===null||i===void 0||i.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,s),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const s=this.backoff.duration();this._reconnecting=!0;const i=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(c=>{c?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",c)):t.onreconnect()}))},s);this.opts.autoUnref&&i.unref(),this.subs.push(()=>{this.clearTimeoutFn(i)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const as={};function zs(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const s=Ff(e,t.path||"/socket.io"),i=s.source,c=s.id,g=s.path,v=as[c]&&g in as[c].nsps,r=t.forceNew||t["force new connection"]||t.multiplex===!1||v;let n;return r?n=new or(i,t):(as[c]||(as[c]=new or(i,t)),n=as[c]),s.query&&!t.query&&(t.query=s.queryKey),n.socket(s.path,t)}Object.assign(zs,{Manager:or,Socket:va,io:zs,connect:zs});var Fi={exports:{}},In;function Yf(){return In||(In=1,(function(e,t){(function(s,i){e.exports=i()})(self,(()=>(()=>{var s={4567:function(v,r,n){var h=this&&this.__decorate||function(d,p,b,E){var x,S=arguments.length,k=S<3?p:E===null?E=Object.getOwnPropertyDescriptor(p,b):E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(d,p,b,E);else for(var D=d.length-1;D>=0;D--)(x=d[D])&&(k=(S<3?x(k):S>3?x(p,b,k):x(p,b))||k);return S>3&&k&&Object.defineProperty(p,b,k),k},f=this&&this.__param||function(d,p){return function(b,E){p(b,E,d)}};Object.defineProperty(r,"__esModule",{value:!0}),r.AccessibilityManager=void 0;const a=n(9042),_=n(6114),m=n(9924),w=n(844),y=n(5596),o=n(4725),u=n(3656);let l=r.AccessibilityManager=class extends w.Disposable{constructor(d,p){super(),this._terminal=d,this._renderService=p,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=document.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=document.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let b=0;b<this._terminal.rows;b++)this._rowElements[b]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[b]);if(this._topBoundaryFocusListener=b=>this._handleBoundaryFocus(b,0),this._bottomBoundaryFocusListener=b=>this._handleBoundaryFocus(b,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=document.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new m.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize((b=>this._handleResize(b.rows)))),this.register(this._terminal.onRender((b=>this._refreshRows(b.start,b.end)))),this.register(this._terminal.onScroll((()=>this._refreshRows()))),this.register(this._terminal.onA11yChar((b=>this._handleChar(b)))),this.register(this._terminal.onLineFeed((()=>this._handleChar(`
`)))),this.register(this._terminal.onA11yTab((b=>this._handleTab(b)))),this.register(this._terminal.onKey((b=>this._handleKey(b.key)))),this.register(this._terminal.onBlur((()=>this._clearLiveRegion()))),this.register(this._renderService.onDimensionsChange((()=>this._refreshRowsDimensions()))),this._screenDprMonitor=new y.ScreenDprMonitor(window),this.register(this._screenDprMonitor),this._screenDprMonitor.setListener((()=>this._refreshRowsDimensions())),this.register((0,u.addDisposableDomListener)(window,"resize",(()=>this._refreshRowsDimensions()))),this._refreshRows(),this.register((0,w.toDisposable)((()=>{this._accessibilityContainer.remove(),this._rowElements.length=0})))}_handleTab(d){for(let p=0;p<d;p++)this._handleChar(" ")}_handleChar(d){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==d&&(this._charsToAnnounce+=d):this._charsToAnnounce+=d,d===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=a.tooMuchOutput)),_.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout((()=>{this._accessibilityContainer.appendChild(this._liveRegion)}),0))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0,_.isMac&&this._liveRegion.remove()}_handleKey(d){this._clearLiveRegion(),new RegExp("\\p{Control}","u").test(d)||this._charsToConsume.push(d)}_refreshRows(d,p){this._liveRegionDebouncer.refresh(d,p,this._terminal.rows)}_renderRows(d,p){const b=this._terminal.buffer,E=b.lines.length.toString();for(let x=d;x<=p;x++){const S=b.translateBufferLineToString(b.ydisp+x,!0),k=(b.ydisp+x+1).toString(),D=this._rowElements[x];D&&(S.length===0?D.innerText=" ":D.textContent=S,D.setAttribute("aria-posinset",k),D.setAttribute("aria-setsize",E))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(d,p){const b=d.target,E=this._rowElements[p===0?1:this._rowElements.length-2];if(b.getAttribute("aria-posinset")===(p===0?"1":`${this._terminal.buffer.lines.length}`)||d.relatedTarget!==E)return;let x,S;if(p===0?(x=b,S=this._rowElements.pop(),this._rowContainer.removeChild(S)):(x=this._rowElements.shift(),S=b,this._rowContainer.removeChild(x)),x.removeEventListener("focus",this._topBoundaryFocusListener),S.removeEventListener("focus",this._bottomBoundaryFocusListener),p===0){const k=this._createAccessibilityTreeNode();this._rowElements.unshift(k),this._rowContainer.insertAdjacentElement("afterbegin",k)}else{const k=this._createAccessibilityTreeNode();this._rowElements.push(k),this._rowContainer.appendChild(k)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(p===0?-1:1),this._rowElements[p===0?1:this._rowElements.length-2].focus(),d.preventDefault(),d.stopImmediatePropagation()}_handleResize(d){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let p=this._rowContainer.children.length;p<this._terminal.rows;p++)this._rowElements[p]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[p]);for(;this._rowElements.length>d;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const d=document.createElement("div");return d.setAttribute("role","listitem"),d.tabIndex=-1,this._refreshRowDimensions(d),d}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let d=0;d<this._terminal.rows;d++)this._refreshRowDimensions(this._rowElements[d])}}_refreshRowDimensions(d){d.style.height=`${this._renderService.dimensions.css.cell.height}px`}};r.AccessibilityManager=l=h([f(1,o.IRenderService)],l)},3614:(v,r)=>{function n(_){return _.replace(/\r?\n/g,"\r")}function h(_,m){return m?"\x1B[200~"+_+"\x1B[201~":_}function f(_,m,w,y){_=h(_=n(_),w.decPrivateModes.bracketedPasteMode&&y.rawOptions.ignoreBracketedPasteMode!==!0),w.triggerDataEvent(_,!0),m.value=""}function a(_,m,w){const y=w.getBoundingClientRect(),o=_.clientX-y.left-10,u=_.clientY-y.top-10;m.style.width="20px",m.style.height="20px",m.style.left=`${o}px`,m.style.top=`${u}px`,m.style.zIndex="1000",m.focus()}Object.defineProperty(r,"__esModule",{value:!0}),r.rightClickHandler=r.moveTextAreaUnderMouseCursor=r.paste=r.handlePasteEvent=r.copyHandler=r.bracketTextForPaste=r.prepareTextForTerminal=void 0,r.prepareTextForTerminal=n,r.bracketTextForPaste=h,r.copyHandler=function(_,m){_.clipboardData&&_.clipboardData.setData("text/plain",m.selectionText),_.preventDefault()},r.handlePasteEvent=function(_,m,w,y){_.stopPropagation(),_.clipboardData&&f(_.clipboardData.getData("text/plain"),m,w,y)},r.paste=f,r.moveTextAreaUnderMouseCursor=a,r.rightClickHandler=function(_,m,w,y,o){a(_,m,w),o&&y.rightClickSelect(_),m.value=y.selectionText,m.select()}},7239:(v,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.ColorContrastCache=void 0;const h=n(1505);r.ColorContrastCache=class{constructor(){this._color=new h.TwoKeyMap,this._css=new h.TwoKeyMap}setCss(f,a,_){this._css.set(f,a,_)}getCss(f,a){return this._css.get(f,a)}setColor(f,a,_){this._color.set(f,a,_)}getColor(f,a){return this._color.get(f,a)}clear(){this._color.clear(),this._css.clear()}}},3656:(v,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.addDisposableDomListener=void 0,r.addDisposableDomListener=function(n,h,f,a){n.addEventListener(h,f,a);let _=!1;return{dispose:()=>{_||(_=!0,n.removeEventListener(h,f,a))}}}},6465:function(v,r,n){var h=this&&this.__decorate||function(o,u,l,d){var p,b=arguments.length,E=b<3?u:d===null?d=Object.getOwnPropertyDescriptor(u,l):d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(o,u,l,d);else for(var x=o.length-1;x>=0;x--)(p=o[x])&&(E=(b<3?p(E):b>3?p(u,l,E):p(u,l))||E);return b>3&&E&&Object.defineProperty(u,l,E),E},f=this&&this.__param||function(o,u){return function(l,d){u(l,d,o)}};Object.defineProperty(r,"__esModule",{value:!0}),r.Linkifier2=void 0;const a=n(3656),_=n(8460),m=n(844),w=n(2585);let y=r.Linkifier2=class extends m.Disposable{get currentLink(){return this._currentLink}constructor(o){super(),this._bufferService=o,this._linkProviders=[],this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new _.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new _.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,m.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,m.toDisposable)((()=>{this._lastMouseEvent=void 0}))),this.register(this._bufferService.onResize((()=>{this._clearCurrentLink(),this._wasResized=!0})))}registerLinkProvider(o){return this._linkProviders.push(o),{dispose:()=>{const u=this._linkProviders.indexOf(o);u!==-1&&this._linkProviders.splice(u,1)}}}attachToDom(o,u,l){this._element=o,this._mouseService=u,this._renderService=l,this.register((0,a.addDisposableDomListener)(this._element,"mouseleave",(()=>{this._isMouseOut=!0,this._clearCurrentLink()}))),this.register((0,a.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,a.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,a.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(o){if(this._lastMouseEvent=o,!this._element||!this._mouseService)return;const u=this._positionFromMouseEvent(o,this._element,this._mouseService);if(!u)return;this._isMouseOut=!1;const l=o.composedPath();for(let d=0;d<l.length;d++){const p=l[d];if(p.classList.contains("xterm"))break;if(p.classList.contains("xterm-hover"))return}this._lastBufferCell&&u.x===this._lastBufferCell.x&&u.y===this._lastBufferCell.y||(this._handleHover(u),this._lastBufferCell=u)}_handleHover(o){if(this._activeLine!==o.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(o,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,o)||(this._clearCurrentLink(),this._askForLink(o,!0))}_askForLink(o,u){var l,d;this._activeProviderReplies&&u||((l=this._activeProviderReplies)===null||l===void 0||l.forEach((b=>{b?.forEach((E=>{E.link.dispose&&E.link.dispose()}))})),this._activeProviderReplies=new Map,this._activeLine=o.y);let p=!1;for(const[b,E]of this._linkProviders.entries())u?!((d=this._activeProviderReplies)===null||d===void 0)&&d.get(b)&&(p=this._checkLinkProviderResult(b,o,p)):E.provideLinks(o.y,(x=>{var S,k;if(this._isMouseOut)return;const D=x?.map((H=>({link:H})));(S=this._activeProviderReplies)===null||S===void 0||S.set(b,D),p=this._checkLinkProviderResult(b,o,p),((k=this._activeProviderReplies)===null||k===void 0?void 0:k.size)===this._linkProviders.length&&this._removeIntersectingLinks(o.y,this._activeProviderReplies)}))}_removeIntersectingLinks(o,u){const l=new Set;for(let d=0;d<u.size;d++){const p=u.get(d);if(p)for(let b=0;b<p.length;b++){const E=p[b],x=E.link.range.start.y<o?0:E.link.range.start.x,S=E.link.range.end.y>o?this._bufferService.cols:E.link.range.end.x;for(let k=x;k<=S;k++){if(l.has(k)){p.splice(b--,1);break}l.add(k)}}}}_checkLinkProviderResult(o,u,l){var d;if(!this._activeProviderReplies)return l;const p=this._activeProviderReplies.get(o);let b=!1;for(let E=0;E<o;E++)this._activeProviderReplies.has(E)&&!this._activeProviderReplies.get(E)||(b=!0);if(!b&&p){const E=p.find((x=>this._linkAtPosition(x.link,u)));E&&(l=!0,this._handleNewLink(E))}if(this._activeProviderReplies.size===this._linkProviders.length&&!l)for(let E=0;E<this._activeProviderReplies.size;E++){const x=(d=this._activeProviderReplies.get(E))===null||d===void 0?void 0:d.find((S=>this._linkAtPosition(S.link,u)));if(x){l=!0,this._handleNewLink(x);break}}return l}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(o){if(!this._element||!this._mouseService||!this._currentLink)return;const u=this._positionFromMouseEvent(o,this._element,this._mouseService);u&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,u)&&this._currentLink.link.activate(o,this._currentLink.link.text)}_clearCurrentLink(o,u){this._element&&this._currentLink&&this._lastMouseEvent&&(!o||!u||this._currentLink.link.range.start.y>=o&&this._currentLink.link.range.end.y<=u)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,m.disposeArray)(this._linkCacheDisposables))}_handleNewLink(o){if(!this._element||!this._lastMouseEvent||!this._mouseService)return;const u=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);u&&this._linkAtPosition(o.link,u)&&(this._currentLink=o,this._currentLink.state={decorations:{underline:o.link.decorations===void 0||o.link.decorations.underline,pointerCursor:o.link.decorations===void 0||o.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,o.link,this._lastMouseEvent),o.link.decorations={},Object.defineProperties(o.link.decorations,{pointerCursor:{get:()=>{var l,d;return(d=(l=this._currentLink)===null||l===void 0?void 0:l.state)===null||d===void 0?void 0:d.decorations.pointerCursor},set:l=>{var d,p;!((d=this._currentLink)===null||d===void 0)&&d.state&&this._currentLink.state.decorations.pointerCursor!==l&&(this._currentLink.state.decorations.pointerCursor=l,this._currentLink.state.isHovered&&((p=this._element)===null||p===void 0||p.classList.toggle("xterm-cursor-pointer",l)))}},underline:{get:()=>{var l,d;return(d=(l=this._currentLink)===null||l===void 0?void 0:l.state)===null||d===void 0?void 0:d.decorations.underline},set:l=>{var d,p,b;!((d=this._currentLink)===null||d===void 0)&&d.state&&((b=(p=this._currentLink)===null||p===void 0?void 0:p.state)===null||b===void 0?void 0:b.decorations.underline)!==l&&(this._currentLink.state.decorations.underline=l,this._currentLink.state.isHovered&&this._fireUnderlineEvent(o.link,l))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange((l=>{if(!this._currentLink)return;const d=l.start===0?0:l.start+1+this._bufferService.buffer.ydisp,p=this._bufferService.buffer.ydisp+1+l.end;if(this._currentLink.link.range.start.y>=d&&this._currentLink.link.range.end.y<=p&&(this._clearCurrentLink(d,p),this._lastMouseEvent&&this._element)){const b=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);b&&this._askForLink(b,!1)}}))))}_linkHover(o,u,l){var d;!((d=this._currentLink)===null||d===void 0)&&d.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(u,!0),this._currentLink.state.decorations.pointerCursor&&o.classList.add("xterm-cursor-pointer")),u.hover&&u.hover(l,u.text)}_fireUnderlineEvent(o,u){const l=o.range,d=this._bufferService.buffer.ydisp,p=this._createLinkUnderlineEvent(l.start.x-1,l.start.y-d-1,l.end.x,l.end.y-d-1,void 0);(u?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(p)}_linkLeave(o,u,l){var d;!((d=this._currentLink)===null||d===void 0)&&d.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(u,!1),this._currentLink.state.decorations.pointerCursor&&o.classList.remove("xterm-cursor-pointer")),u.leave&&u.leave(l,u.text)}_linkAtPosition(o,u){const l=o.range.start.y*this._bufferService.cols+o.range.start.x,d=o.range.end.y*this._bufferService.cols+o.range.end.x,p=u.y*this._bufferService.cols+u.x;return l<=p&&p<=d}_positionFromMouseEvent(o,u,l){const d=l.getCoords(o,u,this._bufferService.cols,this._bufferService.rows);if(d)return{x:d[0],y:d[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(o,u,l,d,p){return{x1:o,y1:u,x2:l,y2:d,cols:this._bufferService.cols,fg:p}}};r.Linkifier2=y=h([f(0,w.IBufferService)],y)},9042:(v,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.tooMuchOutput=r.promptLabel=void 0,r.promptLabel="Terminal input",r.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(v,r,n){var h=this&&this.__decorate||function(y,o,u,l){var d,p=arguments.length,b=p<3?o:l===null?l=Object.getOwnPropertyDescriptor(o,u):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(y,o,u,l);else for(var E=y.length-1;E>=0;E--)(d=y[E])&&(b=(p<3?d(b):p>3?d(o,u,b):d(o,u))||b);return p>3&&b&&Object.defineProperty(o,u,b),b},f=this&&this.__param||function(y,o){return function(u,l){o(u,l,y)}};Object.defineProperty(r,"__esModule",{value:!0}),r.OscLinkProvider=void 0;const a=n(511),_=n(2585);let m=r.OscLinkProvider=class{constructor(y,o,u){this._bufferService=y,this._optionsService=o,this._oscLinkService=u}provideLinks(y,o){var u;const l=this._bufferService.buffer.lines.get(y-1);if(!l)return void o(void 0);const d=[],p=this._optionsService.rawOptions.linkHandler,b=new a.CellData,E=l.getTrimmedLength();let x=-1,S=-1,k=!1;for(let D=0;D<E;D++)if(S!==-1||l.hasContent(D)){if(l.loadCell(D,b),b.hasExtendedAttrs()&&b.extended.urlId){if(S===-1){S=D,x=b.extended.urlId;continue}k=b.extended.urlId!==x}else S!==-1&&(k=!0);if(k||S!==-1&&D===E-1){const H=(u=this._oscLinkService.getLinkData(x))===null||u===void 0?void 0:u.uri;if(H){const T={start:{x:S+1,y},end:{x:D+(k||D!==E-1?0:1),y}};let I=!1;if(!p?.allowNonHttpProtocols)try{const V=new URL(H);["http:","https:"].includes(V.protocol)||(I=!0)}catch{I=!0}I||d.push({text:H,range:T,activate:(V,J)=>p?p.activate(V,J,T):w(0,J),hover:(V,J)=>{var X;return(X=p?.hover)===null||X===void 0?void 0:X.call(p,V,J,T)},leave:(V,J)=>{var X;return(X=p?.leave)===null||X===void 0?void 0:X.call(p,V,J,T)}})}k=!1,b.hasExtendedAttrs()&&b.extended.urlId?(S=D,x=b.extended.urlId):(S=-1,x=-1)}}o(d)}};function w(y,o){if(confirm(`Do you want to navigate to ${o}?

WARNING: This link could potentially be dangerous`)){const u=window.open();if(u){try{u.opener=null}catch{}u.location.href=o}else console.warn("Opening link blocked as opener could not be cleared")}}r.OscLinkProvider=m=h([f(0,_.IBufferService),f(1,_.IOptionsService),f(2,_.IOscLinkService)],m)},6193:(v,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.RenderDebouncer=void 0,r.RenderDebouncer=class{constructor(n,h){this._parentWindow=n,this._renderCallback=h,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._parentWindow.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(n){return this._refreshCallbacks.push(n),this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame((()=>this._innerRefresh()))),this._animationFrame}refresh(n,h,f){this._rowCount=f,n=n!==void 0?n:0,h=h!==void 0?h:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,n):n,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,h):h,this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame((()=>this._innerRefresh())))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const n=Math.max(this._rowStart,0),h=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(n,h),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const n of this._refreshCallbacks)n(0);this._refreshCallbacks=[]}}},5596:(v,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.ScreenDprMonitor=void 0;const h=n(844);class f extends h.Disposable{constructor(_){super(),this._parentWindow=_,this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this.register((0,h.toDisposable)((()=>{this.clearListener()})))}setListener(_){this._listener&&this.clearListener(),this._listener=_,this._outerListener=()=>{this._listener&&(this._listener(this._parentWindow.devicePixelRatio,this._currentDevicePixelRatio),this._updateDpr())},this._updateDpr()}_updateDpr(){var _;this._outerListener&&((_=this._resolutionMediaMatchList)===null||_===void 0||_.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)}}r.ScreenDprMonitor=f},3236:(v,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.Terminal=void 0;const h=n(3614),f=n(3656),a=n(6465),_=n(9042),m=n(3730),w=n(1680),y=n(3107),o=n(5744),u=n(2950),l=n(1296),d=n(428),p=n(4269),b=n(5114),E=n(8934),x=n(3230),S=n(9312),k=n(4725),D=n(6731),H=n(8055),T=n(8969),I=n(8460),V=n(844),J=n(6114),X=n(8437),K=n(2584),A=n(7399),B=n(5941),P=n(9074),F=n(2585),Z=n(5435),q=n(4567),W=typeof window<"u"?window.document:null;class z extends T.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(C={}){super(C),this.browser=J,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new V.MutableDisposable),this._onCursorMove=this.register(new I.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new I.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new I.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new I.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new I.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new I.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new I.EventEmitter),this._onBlur=this.register(new I.EventEmitter),this._onA11yCharEmitter=this.register(new I.EventEmitter),this._onA11yTabEmitter=this.register(new I.EventEmitter),this._onWillOpen=this.register(new I.EventEmitter),this._setup(),this.linkifier2=this.register(this._instantiationService.createInstance(a.Linkifier2)),this.linkifier2.registerLinkProvider(this._instantiationService.createInstance(m.OscLinkProvider)),this._decorationService=this._instantiationService.createInstance(P.DecorationService),this._instantiationService.setService(F.IDecorationService,this._decorationService),this.register(this._inputHandler.onRequestBell((()=>this._onBell.fire()))),this.register(this._inputHandler.onRequestRefreshRows(((M,$)=>this.refresh(M,$)))),this.register(this._inputHandler.onRequestSendFocus((()=>this._reportFocus()))),this.register(this._inputHandler.onRequestReset((()=>this.reset()))),this.register(this._inputHandler.onRequestWindowsOptionsReport((M=>this._reportWindowsOptions(M)))),this.register(this._inputHandler.onColor((M=>this._handleColorEvent(M)))),this.register((0,I.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,I.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,I.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,I.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize((M=>this._afterResize(M.cols,M.rows)))),this.register((0,V.toDisposable)((()=>{var M,$;this._customKeyEventHandler=void 0,($=(M=this.element)===null||M===void 0?void 0:M.parentNode)===null||$===void 0||$.removeChild(this.element)})))}_handleColorEvent(C){if(this._themeService)for(const M of C){let $,U="";switch(M.index){case 256:$="foreground",U="10";break;case 257:$="background",U="11";break;case 258:$="cursor",U="12";break;default:$="ansi",U="4;"+M.index}switch(M.type){case 0:const re=H.color.toColorRGB($==="ansi"?this._themeService.colors.ansi[M.index]:this._themeService.colors[$]);this.coreService.triggerDataEvent(`${K.C0.ESC}]${U};${(0,B.toRgbString)(re)}${K.C1_ESCAPED.ST}`);break;case 1:if($==="ansi")this._themeService.modifyColors((L=>L.ansi[M.index]=H.rgba.toColor(...M.color)));else{const L=$;this._themeService.modifyColors((O=>O[L]=H.rgba.toColor(...M.color)))}break;case 2:this._themeService.restoreColor(M.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(C){C?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(q.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(C){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(K.C0.ESC+"[I"),this.updateCursorStyle(C),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var C;return(C=this.textarea)===null||C===void 0?void 0:C.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(K.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const C=this.buffer.ybase+this.buffer.y,M=this.buffer.lines.get(C);if(!M)return;const $=Math.min(this.buffer.x,this.cols-1),U=this._renderService.dimensions.css.cell.height,re=M.getWidth($),L=this._renderService.dimensions.css.cell.width*re,O=this.buffer.y*this._renderService.dimensions.css.cell.height,N=$*this._renderService.dimensions.css.cell.width;this.textarea.style.left=N+"px",this.textarea.style.top=O+"px",this.textarea.style.width=L+"px",this.textarea.style.height=U+"px",this.textarea.style.lineHeight=U+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,f.addDisposableDomListener)(this.element,"copy",(M=>{this.hasSelection()&&(0,h.copyHandler)(M,this._selectionService)})));const C=M=>(0,h.handlePasteEvent)(M,this.textarea,this.coreService,this.optionsService);this.register((0,f.addDisposableDomListener)(this.textarea,"paste",C)),this.register((0,f.addDisposableDomListener)(this.element,"paste",C)),J.isFirefox?this.register((0,f.addDisposableDomListener)(this.element,"mousedown",(M=>{M.button===2&&(0,h.rightClickHandler)(M,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)}))):this.register((0,f.addDisposableDomListener)(this.element,"contextmenu",(M=>{(0,h.rightClickHandler)(M,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)}))),J.isLinux&&this.register((0,f.addDisposableDomListener)(this.element,"auxclick",(M=>{M.button===1&&(0,h.moveTextAreaUnderMouseCursor)(M,this.textarea,this.screenElement)})))}_bindKeys(){this.register((0,f.addDisposableDomListener)(this.textarea,"keyup",(C=>this._keyUp(C)),!0)),this.register((0,f.addDisposableDomListener)(this.textarea,"keydown",(C=>this._keyDown(C)),!0)),this.register((0,f.addDisposableDomListener)(this.textarea,"keypress",(C=>this._keyPress(C)),!0)),this.register((0,f.addDisposableDomListener)(this.textarea,"compositionstart",(()=>this._compositionHelper.compositionstart()))),this.register((0,f.addDisposableDomListener)(this.textarea,"compositionupdate",(C=>this._compositionHelper.compositionupdate(C)))),this.register((0,f.addDisposableDomListener)(this.textarea,"compositionend",(()=>this._compositionHelper.compositionend()))),this.register((0,f.addDisposableDomListener)(this.textarea,"input",(C=>this._inputEvent(C)),!0)),this.register(this.onRender((()=>this._compositionHelper.updateCompositionElements())))}open(C){var M;if(!C)throw new Error("Terminal requires a parent element.");C.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=C.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),C.appendChild(this.element);const $=W.createDocumentFragment();this._viewportElement=W.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),$.appendChild(this._viewportElement),this._viewportScrollArea=W.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=W.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=W.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),$.appendChild(this.screenElement),this.textarea=W.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",_.promptLabel),J.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this._instantiationService.createInstance(b.CoreBrowserService,this.textarea,(M=this._document.defaultView)!==null&&M!==void 0?M:window),this._instantiationService.setService(k.ICoreBrowserService,this._coreBrowserService),this.register((0,f.addDisposableDomListener)(this.textarea,"focus",(U=>this._handleTextAreaFocus(U)))),this.register((0,f.addDisposableDomListener)(this.textarea,"blur",(()=>this._handleTextAreaBlur()))),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(d.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(k.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(D.ThemeService),this._instantiationService.setService(k.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(p.CharacterJoinerService),this._instantiationService.setService(k.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(x.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(k.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange((U=>this._onRender.fire(U)))),this.onResize((U=>this._renderService.resize(U.cols,U.rows))),this._compositionView=W.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(u.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild($);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this._mouseService=this._instantiationService.createInstance(E.MouseService),this._instantiationService.setService(k.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(w.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines((U=>this.scrollLines(U.amount,U.suppressScrollEvent,1))),this.register(this._inputHandler.onRequestSyncScrollBar((()=>this.viewport.syncScrollArea()))),this.register(this.viewport),this.register(this.onCursorMove((()=>{this._renderService.handleCursorMove(),this._syncTextArea()}))),this.register(this.onResize((()=>this._renderService.handleResize(this.cols,this.rows)))),this.register(this.onBlur((()=>this._renderService.handleBlur()))),this.register(this.onFocus((()=>this._renderService.handleFocus()))),this.register(this._renderService.onDimensionsChange((()=>this.viewport.syncScrollArea()))),this._selectionService=this.register(this._instantiationService.createInstance(S.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(k.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines((U=>this.scrollLines(U.amount,U.suppressScrollEvent)))),this.register(this._selectionService.onSelectionChange((()=>this._onSelectionChange.fire()))),this.register(this._selectionService.onRequestRedraw((U=>this._renderService.handleSelectionChanged(U.start,U.end,U.columnSelectMode)))),this.register(this._selectionService.onLinuxMouseSelection((U=>{this.textarea.value=U,this.textarea.focus(),this.textarea.select()}))),this.register(this._onScroll.event((U=>{this.viewport.syncScrollArea(),this._selectionService.refresh()}))),this.register((0,f.addDisposableDomListener)(this._viewportElement,"scroll",(()=>this._selectionService.refresh()))),this.linkifier2.attachToDom(this.screenElement,this._mouseService,this._renderService),this.register(this._instantiationService.createInstance(y.BufferDecorationRenderer,this.screenElement)),this.register((0,f.addDisposableDomListener)(this.element,"mousedown",(U=>this._selectionService.handleMouseDown(U)))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(q.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",(U=>this._handleScreenReaderModeOptionChange(U)))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(o.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",(U=>{!this._overviewRulerRenderer&&U&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(o.OverviewRulerRenderer,this._viewportElement,this.screenElement)))})),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(l.DomRenderer,this.element,this.screenElement,this._viewportElement,this.linkifier2)}bindMouse(){const C=this,M=this.element;function $(L){const O=C._mouseService.getMouseReportCoords(L,C.screenElement);if(!O)return!1;let N,G;switch(L.overrideType||L.type){case"mousemove":G=32,L.buttons===void 0?(N=3,L.button!==void 0&&(N=L.button<3?L.button:3)):N=1&L.buttons?0:4&L.buttons?1:2&L.buttons?2:3;break;case"mouseup":G=0,N=L.button<3?L.button:3;break;case"mousedown":G=1,N=L.button<3?L.button:3;break;case"wheel":if(C.viewport.getLinesScrolled(L)===0)return!1;G=L.deltaY<0?0:1,N=4;break;default:return!1}return!(G===void 0||N===void 0||N>4)&&C.coreMouseService.triggerMouseEvent({col:O.col,row:O.row,x:O.x,y:O.y,button:N,action:G,ctrl:L.ctrlKey,alt:L.altKey,shift:L.shiftKey})}const U={mouseup:null,wheel:null,mousedrag:null,mousemove:null},re={mouseup:L=>($(L),L.buttons||(this._document.removeEventListener("mouseup",U.mouseup),U.mousedrag&&this._document.removeEventListener("mousemove",U.mousedrag)),this.cancel(L)),wheel:L=>($(L),this.cancel(L,!0)),mousedrag:L=>{L.buttons&&$(L)},mousemove:L=>{L.buttons||$(L)}};this.register(this.coreMouseService.onProtocolChange((L=>{L?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(L)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&L?U.mousemove||(M.addEventListener("mousemove",re.mousemove),U.mousemove=re.mousemove):(M.removeEventListener("mousemove",U.mousemove),U.mousemove=null),16&L?U.wheel||(M.addEventListener("wheel",re.wheel,{passive:!1}),U.wheel=re.wheel):(M.removeEventListener("wheel",U.wheel),U.wheel=null),2&L?U.mouseup||(M.addEventListener("mouseup",re.mouseup),U.mouseup=re.mouseup):(this._document.removeEventListener("mouseup",U.mouseup),M.removeEventListener("mouseup",U.mouseup),U.mouseup=null),4&L?U.mousedrag||(U.mousedrag=re.mousedrag):(this._document.removeEventListener("mousemove",U.mousedrag),U.mousedrag=null)}))),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,f.addDisposableDomListener)(M,"mousedown",(L=>{if(L.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(L))return $(L),U.mouseup&&this._document.addEventListener("mouseup",U.mouseup),U.mousedrag&&this._document.addEventListener("mousemove",U.mousedrag),this.cancel(L)}))),this.register((0,f.addDisposableDomListener)(M,"wheel",(L=>{if(!U.wheel){if(!this.buffer.hasScrollback){const O=this.viewport.getLinesScrolled(L);if(O===0)return;const N=K.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(L.deltaY<0?"A":"B");let G="";for(let Y=0;Y<Math.abs(O);Y++)G+=N;return this.coreService.triggerDataEvent(G,!0),this.cancel(L,!0)}return this.viewport.handleWheel(L)?this.cancel(L):void 0}}),{passive:!1})),this.register((0,f.addDisposableDomListener)(M,"touchstart",(L=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(L),this.cancel(L)}),{passive:!0})),this.register((0,f.addDisposableDomListener)(M,"touchmove",(L=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(L)?void 0:this.cancel(L)}),{passive:!1}))}refresh(C,M){var $;($=this._renderService)===null||$===void 0||$.refreshRows(C,M)}updateCursorStyle(C){var M;!((M=this._selectionService)===null||M===void 0)&&M.shouldColumnSelect(C)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(C,M,$=0){var U;$===1?(super.scrollLines(C,M,$),this.refresh(0,this.rows-1)):(U=this.viewport)===null||U===void 0||U.scrollLines(C)}paste(C){(0,h.paste)(C,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(C){this._customKeyEventHandler=C}registerLinkProvider(C){return this.linkifier2.registerLinkProvider(C)}registerCharacterJoiner(C){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const M=this._characterJoinerService.register(C);return this.refresh(0,this.rows-1),M}deregisterCharacterJoiner(C){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(C)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(C){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+C)}registerDecoration(C){return this._decorationService.registerDecoration(C)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(C,M,$){this._selectionService.setSelection(C,M,$)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var C;(C=this._selectionService)===null||C===void 0||C.clearSelection()}selectAll(){var C;(C=this._selectionService)===null||C===void 0||C.selectAll()}selectLines(C,M){var $;($=this._selectionService)===null||$===void 0||$.selectLines(C,M)}_keyDown(C){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(C)===!1)return!1;const M=this.browser.isMac&&this.options.macOptionIsMeta&&C.altKey;if(!M&&!this._compositionHelper.keydown(C))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;M||C.key!=="Dead"&&C.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const $=(0,A.evaluateKeyboardEvent)(C,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(C),$.type===3||$.type===2){const U=this.rows-1;return this.scrollLines($.type===2?-U:U),this.cancel(C,!0)}return $.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,C)||($.cancel&&this.cancel(C,!0),!$.key||!!(C.key&&!C.ctrlKey&&!C.altKey&&!C.metaKey&&C.key.length===1&&C.key.charCodeAt(0)>=65&&C.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):($.key!==K.C0.ETX&&$.key!==K.C0.CR||(this.textarea.value=""),this._onKey.fire({key:$.key,domEvent:C}),this._showCursor(),this.coreService.triggerDataEvent($.key,!0),!this.optionsService.rawOptions.screenReaderMode||C.altKey||C.ctrlKey?this.cancel(C,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(C,M){const $=C.isMac&&!this.options.macOptionIsMeta&&M.altKey&&!M.ctrlKey&&!M.metaKey||C.isWindows&&M.altKey&&M.ctrlKey&&!M.metaKey||C.isWindows&&M.getModifierState("AltGraph");return M.type==="keypress"?$:$&&(!M.keyCode||M.keyCode>47)}_keyUp(C){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(C)===!1||((function(M){return M.keyCode===16||M.keyCode===17||M.keyCode===18})(C)||this.focus(),this.updateCursorStyle(C),this._keyPressHandled=!1)}_keyPress(C){let M;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(C)===!1)return!1;if(this.cancel(C),C.charCode)M=C.charCode;else if(C.which===null||C.which===void 0)M=C.keyCode;else{if(C.which===0||C.charCode===0)return!1;M=C.which}return!(!M||(C.altKey||C.ctrlKey||C.metaKey)&&!this._isThirdLevelShift(this.browser,C)||(M=String.fromCharCode(M),this._onKey.fire({key:M,domEvent:C}),this._showCursor(),this.coreService.triggerDataEvent(M,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(C){if(C.data&&C.inputType==="insertText"&&(!C.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const M=C.data;return this.coreService.triggerDataEvent(M,!0),this.cancel(C),!0}return!1}resize(C,M){C!==this.cols||M!==this.rows?super.resize(C,M):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(C,M){var $,U;($=this._charSizeService)===null||$===void 0||$.measure(),(U=this.viewport)===null||U===void 0||U.syncScrollArea(!0)}clear(){var C;if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let M=1;M<this.rows;M++)this.buffer.lines.push(this.buffer.getBlankLine(X.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),(C=this.viewport)===null||C===void 0||C.reset(),this.refresh(0,this.rows-1)}}reset(){var C,M;this.options.rows=this.rows,this.options.cols=this.cols;const $=this._customKeyEventHandler;this._setup(),super.reset(),(C=this._selectionService)===null||C===void 0||C.reset(),this._decorationService.reset(),(M=this.viewport)===null||M===void 0||M.reset(),this._customKeyEventHandler=$,this.refresh(0,this.rows-1)}clearTextureAtlas(){var C;(C=this._renderService)===null||C===void 0||C.clearTextureAtlas()}_reportFocus(){var C;!((C=this.element)===null||C===void 0)&&C.classList.contains("focus")?this.coreService.triggerDataEvent(K.C0.ESC+"[I"):this.coreService.triggerDataEvent(K.C0.ESC+"[O")}_reportWindowsOptions(C){if(this._renderService)switch(C){case Z.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const M=this._renderService.dimensions.css.canvas.width.toFixed(0),$=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${K.C0.ESC}[4;${$};${M}t`);break;case Z.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const U=this._renderService.dimensions.css.cell.width.toFixed(0),re=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${K.C0.ESC}[6;${re};${U}t`)}}cancel(C,M){if(this.options.cancelEvents||M)return C.preventDefault(),C.stopPropagation(),!1}}r.Terminal=z},9924:(v,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.TimeBasedDebouncer=void 0,r.TimeBasedDebouncer=class{constructor(n,h=1e3){this._renderCallback=n,this._debounceThresholdMS=h,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(n,h,f){this._rowCount=f,n=n!==void 0?n:0,h=h!==void 0?h:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,n):n,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,h):h;const a=Date.now();if(a-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=a,this._innerRefresh();else if(!this._additionalRefreshRequested){const _=a-this._lastRefreshMs,m=this._debounceThresholdMS-_;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout((()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0}),m)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const n=Math.max(this._rowStart,0),h=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(n,h)}}},1680:function(v,r,n){var h=this&&this.__decorate||function(u,l,d,p){var b,E=arguments.length,x=E<3?l:p===null?p=Object.getOwnPropertyDescriptor(l,d):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(u,l,d,p);else for(var S=u.length-1;S>=0;S--)(b=u[S])&&(x=(E<3?b(x):E>3?b(l,d,x):b(l,d))||x);return E>3&&x&&Object.defineProperty(l,d,x),x},f=this&&this.__param||function(u,l){return function(d,p){l(d,p,u)}};Object.defineProperty(r,"__esModule",{value:!0}),r.Viewport=void 0;const a=n(3656),_=n(4725),m=n(8460),w=n(844),y=n(2585);let o=r.Viewport=class extends w.Disposable{constructor(u,l,d,p,b,E,x,S){super(),this._viewportElement=u,this._scrollArea=l,this._bufferService=d,this._optionsService=p,this._charSizeService=b,this._renderService=E,this._coreBrowserService=x,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new m.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,a.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate((k=>this._activeBuffer=k.activeBuffer))),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange((k=>this._renderDimensions=k))),this._handleThemeChange(S.colors),this.register(S.onChangeColors((k=>this._handleThemeChange(k)))),this.register(this._optionsService.onSpecificOptionChange("scrollback",(()=>this.syncScrollArea()))),setTimeout((()=>this.syncScrollArea()))}_handleThemeChange(u){this._viewportElement.style.backgroundColor=u.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame((()=>this.syncScrollArea()))}_refresh(u){if(u)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>this._innerRefresh())))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderService.dimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const l=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.css.canvas.height);this._lastRecordedBufferHeight!==l&&(this._lastRecordedBufferHeight=l,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const u=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==u&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=u),this._refreshAnimationFrame=null}syncScrollArea(u=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(u);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(u)}_handleScroll(u){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const l=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:l,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const u=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(u*(this._smoothScrollState.target-this._smoothScrollState.origin)),u<1?this._coreBrowserService.window.requestAnimationFrame((()=>this._smoothScroll())):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(u,l){const d=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(l<0&&this._viewportElement.scrollTop!==0||l>0&&d<this._lastRecordedBufferHeight)||(u.cancelable&&u.preventDefault(),!1)}handleWheel(u){const l=this._getPixelsScrolled(u);return l!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+l:this._smoothScrollState.target+=l,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=l,this._bubbleScroll(u,l))}scrollLines(u){if(u!==0)if(this._optionsService.rawOptions.smoothScrollDuration){const l=u*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+l,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:u,suppressScrollEvent:!1})}_getPixelsScrolled(u){if(u.deltaY===0||u.shiftKey)return 0;let l=this._applyScrollModifier(u.deltaY,u);return u.deltaMode===WheelEvent.DOM_DELTA_LINE?l*=this._currentRowHeight:u.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(l*=this._currentRowHeight*this._bufferService.rows),l}getBufferElements(u,l){var d;let p,b="";const E=[],x=l??this._bufferService.buffer.lines.length,S=this._bufferService.buffer.lines;for(let k=u;k<x;k++){const D=S.get(k);if(!D)continue;const H=(d=S.get(k+1))===null||d===void 0?void 0:d.isWrapped;if(b+=D.translateToString(!H),!H||k===S.length-1){const T=document.createElement("div");T.textContent=b,E.push(T),b.length>0&&(p=T),b=""}}return{bufferElements:E,cursorElement:p}}getLinesScrolled(u){if(u.deltaY===0||u.shiftKey)return 0;let l=this._applyScrollModifier(u.deltaY,u);return u.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(l/=this._currentRowHeight+0,this._wheelPartialScroll+=l,l=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):u.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(l*=this._bufferService.rows),l}_applyScrollModifier(u,l){const d=this._optionsService.rawOptions.fastScrollModifier;return d==="alt"&&l.altKey||d==="ctrl"&&l.ctrlKey||d==="shift"&&l.shiftKey?u*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:u*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(u){this._lastTouchY=u.touches[0].pageY}handleTouchMove(u){const l=this._lastTouchY-u.touches[0].pageY;return this._lastTouchY=u.touches[0].pageY,l!==0&&(this._viewportElement.scrollTop+=l,this._bubbleScroll(u,l))}};r.Viewport=o=h([f(2,y.IBufferService),f(3,y.IOptionsService),f(4,_.ICharSizeService),f(5,_.IRenderService),f(6,_.ICoreBrowserService),f(7,_.IThemeService)],o)},3107:function(v,r,n){var h=this&&this.__decorate||function(o,u,l,d){var p,b=arguments.length,E=b<3?u:d===null?d=Object.getOwnPropertyDescriptor(u,l):d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(o,u,l,d);else for(var x=o.length-1;x>=0;x--)(p=o[x])&&(E=(b<3?p(E):b>3?p(u,l,E):p(u,l))||E);return b>3&&E&&Object.defineProperty(u,l,E),E},f=this&&this.__param||function(o,u){return function(l,d){u(l,d,o)}};Object.defineProperty(r,"__esModule",{value:!0}),r.BufferDecorationRenderer=void 0;const a=n(3656),_=n(4725),m=n(844),w=n(2585);let y=r.BufferDecorationRenderer=class extends m.Disposable{constructor(o,u,l,d){super(),this._screenElement=o,this._bufferService=u,this._decorationService=l,this._renderService=d,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange((()=>this._doRefreshDecorations()))),this.register(this._renderService.onDimensionsChange((()=>{this._dimensionsChanged=!0,this._queueRefresh()}))),this.register((0,a.addDisposableDomListener)(window,"resize",(()=>this._queueRefresh()))),this.register(this._bufferService.buffers.onBufferActivate((()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt}))),this.register(this._decorationService.onDecorationRegistered((()=>this._queueRefresh()))),this.register(this._decorationService.onDecorationRemoved((p=>this._removeDecoration(p)))),this.register((0,m.toDisposable)((()=>{this._container.remove(),this._decorationElements.clear()})))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback((()=>{this._doRefreshDecorations(),this._animationFrame=void 0})))}_doRefreshDecorations(){for(const o of this._decorationService.decorations)this._renderDecoration(o);this._dimensionsChanged=!1}_renderDecoration(o){this._refreshStyle(o),this._dimensionsChanged&&this._refreshXPosition(o)}_createElement(o){var u,l;const d=document.createElement("div");d.classList.add("xterm-decoration"),d.classList.toggle("xterm-decoration-top-layer",((u=o?.options)===null||u===void 0?void 0:u.layer)==="top"),d.style.width=`${Math.round((o.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,d.style.height=(o.options.height||1)*this._renderService.dimensions.css.cell.height+"px",d.style.top=(o.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",d.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const p=(l=o.options.x)!==null&&l!==void 0?l:0;return p&&p>this._bufferService.cols&&(d.style.display="none"),this._refreshXPosition(o,d),d}_refreshStyle(o){const u=o.marker.line-this._bufferService.buffers.active.ydisp;if(u<0||u>=this._bufferService.rows)o.element&&(o.element.style.display="none",o.onRenderEmitter.fire(o.element));else{let l=this._decorationElements.get(o);l||(l=this._createElement(o),o.element=l,this._decorationElements.set(o,l),this._container.appendChild(l),o.onDispose((()=>{this._decorationElements.delete(o),l.remove()}))),l.style.top=u*this._renderService.dimensions.css.cell.height+"px",l.style.display=this._altBufferIsActive?"none":"block",o.onRenderEmitter.fire(l)}}_refreshXPosition(o,u=o.element){var l;if(!u)return;const d=(l=o.options.x)!==null&&l!==void 0?l:0;(o.options.anchor||"left")==="right"?u.style.right=d?d*this._renderService.dimensions.css.cell.width+"px":"":u.style.left=d?d*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(o){var u;(u=this._decorationElements.get(o))===null||u===void 0||u.remove(),this._decorationElements.delete(o),o.dispose()}};r.BufferDecorationRenderer=y=h([f(1,w.IBufferService),f(2,w.IDecorationService),f(3,_.IRenderService)],y)},5871:(v,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.ColorZoneStore=void 0,r.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(n){if(n.options.overviewRulerOptions){for(const h of this._zones)if(h.color===n.options.overviewRulerOptions.color&&h.position===n.options.overviewRulerOptions.position){if(this._lineIntersectsZone(h,n.marker.line))return;if(this._lineAdjacentToZone(h,n.marker.line,n.options.overviewRulerOptions.position))return void this._addLineToZone(h,n.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=n.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=n.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=n.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=n.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:n.options.overviewRulerOptions.color,position:n.options.overviewRulerOptions.position,startBufferLine:n.marker.line,endBufferLine:n.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(n){this._linePadding=n}_lineIntersectsZone(n,h){return h>=n.startBufferLine&&h<=n.endBufferLine}_lineAdjacentToZone(n,h,f){return h>=n.startBufferLine-this._linePadding[f||"full"]&&h<=n.endBufferLine+this._linePadding[f||"full"]}_addLineToZone(n,h){n.startBufferLine=Math.min(n.startBufferLine,h),n.endBufferLine=Math.max(n.endBufferLine,h)}}},5744:function(v,r,n){var h=this&&this.__decorate||function(p,b,E,x){var S,k=arguments.length,D=k<3?b:x===null?x=Object.getOwnPropertyDescriptor(b,E):x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(p,b,E,x);else for(var H=p.length-1;H>=0;H--)(S=p[H])&&(D=(k<3?S(D):k>3?S(b,E,D):S(b,E))||D);return k>3&&D&&Object.defineProperty(b,E,D),D},f=this&&this.__param||function(p,b){return function(E,x){b(E,x,p)}};Object.defineProperty(r,"__esModule",{value:!0}),r.OverviewRulerRenderer=void 0;const a=n(5871),_=n(3656),m=n(4725),w=n(844),y=n(2585),o={full:0,left:0,center:0,right:0},u={full:0,left:0,center:0,right:0},l={full:0,left:0,center:0,right:0};let d=r.OverviewRulerRenderer=class extends w.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(p,b,E,x,S,k,D){var H;super(),this._viewportElement=p,this._screenElement=b,this._bufferService=E,this._decorationService=x,this._renderService=S,this._optionsService=k,this._coreBrowseService=D,this._colorZoneStore=new a.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(H=this._viewportElement.parentElement)===null||H===void 0||H.insertBefore(this._canvas,this._viewportElement);const T=this._canvas.getContext("2d");if(!T)throw new Error("Ctx cannot be null");this._ctx=T,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,w.toDisposable)((()=>{var I;(I=this._canvas)===null||I===void 0||I.remove()})))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered((()=>this._queueRefresh(void 0,!0)))),this.register(this._decorationService.onDecorationRemoved((()=>this._queueRefresh(void 0,!0))))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange((()=>this._queueRefresh()))),this.register(this._bufferService.buffers.onBufferActivate((()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"}))),this.register(this._bufferService.onScroll((()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())})))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender((()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)}))),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",(()=>this._queueRefresh(!0)))),this.register((0,_.addDisposableDomListener)(this._coreBrowseService.window,"resize",(()=>this._queueRefresh(!0)))),this._queueRefresh(!0)}_refreshDrawConstants(){const p=Math.floor(this._canvas.width/3),b=Math.ceil(this._canvas.width/3);u.full=this._canvas.width,u.left=p,u.center=b,u.right=p,this._refreshDrawHeightConstants(),l.full=0,l.left=0,l.center=u.left,l.right=u.left+u.center}_refreshDrawHeightConstants(){o.full=Math.round(2*this._coreBrowseService.dpr);const p=this._canvas.height/this._bufferService.buffer.lines.length,b=Math.round(Math.max(Math.min(p,12),6)*this._coreBrowseService.dpr);o.left=b,o.center=b,o.right=b}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*o.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*o.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*o.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*o.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowseService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowseService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const b of this._decorationService.decorations)this._colorZoneStore.addDecoration(b);this._ctx.lineWidth=1;const p=this._colorZoneStore.zones;for(const b of p)b.position!=="full"&&this._renderColorZone(b);for(const b of p)b.position==="full"&&this._renderColorZone(b);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(p){this._ctx.fillStyle=p.color,this._ctx.fillRect(l[p.position||"full"],Math.round((this._canvas.height-1)*(p.startBufferLine/this._bufferService.buffers.active.lines.length)-o[p.position||"full"]/2),u[p.position||"full"],Math.round((this._canvas.height-1)*((p.endBufferLine-p.startBufferLine)/this._bufferService.buffers.active.lines.length)+o[p.position||"full"]))}_queueRefresh(p,b){this._shouldUpdateDimensions=p||this._shouldUpdateDimensions,this._shouldUpdateAnchor=b||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowseService.window.requestAnimationFrame((()=>{this._refreshDecorations(),this._animationFrame=void 0})))}};r.OverviewRulerRenderer=d=h([f(2,y.IBufferService),f(3,y.IDecorationService),f(4,m.IRenderService),f(5,y.IOptionsService),f(6,m.ICoreBrowserService)],d)},2950:function(v,r,n){var h=this&&this.__decorate||function(y,o,u,l){var d,p=arguments.length,b=p<3?o:l===null?l=Object.getOwnPropertyDescriptor(o,u):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(y,o,u,l);else for(var E=y.length-1;E>=0;E--)(d=y[E])&&(b=(p<3?d(b):p>3?d(o,u,b):d(o,u))||b);return p>3&&b&&Object.defineProperty(o,u,b),b},f=this&&this.__param||function(y,o){return function(u,l){o(u,l,y)}};Object.defineProperty(r,"__esModule",{value:!0}),r.CompositionHelper=void 0;const a=n(4725),_=n(2585),m=n(2584);let w=r.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(y,o,u,l,d,p){this._textarea=y,this._compositionView=o,this._bufferService=u,this._optionsService=l,this._coreService=d,this._renderService=p,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(y){this._compositionView.textContent=y.data,this.updateCompositionElements(),setTimeout((()=>{this._compositionPosition.end=this._textarea.value.length}),0)}compositionend(){this._finalizeComposition(!0)}keydown(y){if(this._isComposing||this._isSendingComposition){if(y.keyCode===229||y.keyCode===16||y.keyCode===17||y.keyCode===18)return!1;this._finalizeComposition(!1)}return y.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(y){if(this._compositionView.classList.remove("active"),this._isComposing=!1,y){const o={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout((()=>{if(this._isSendingComposition){let u;this._isSendingComposition=!1,o.start+=this._dataAlreadySent.length,u=this._isComposing?this._textarea.value.substring(o.start,o.end):this._textarea.value.substring(o.start),u.length>0&&this._coreService.triggerDataEvent(u,!0)}}),0)}else{this._isSendingComposition=!1;const o=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(o,!0)}}_handleAnyTextareaChanges(){const y=this._textarea.value;setTimeout((()=>{if(!this._isComposing){const o=this._textarea.value,u=o.replace(y,"");this._dataAlreadySent=u,o.length>y.length?this._coreService.triggerDataEvent(u,!0):o.length<y.length?this._coreService.triggerDataEvent(`${m.C0.DEL}`,!0):o.length===y.length&&o!==y&&this._coreService.triggerDataEvent(o,!0)}}),0)}updateCompositionElements(y){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const o=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),u=this._renderService.dimensions.css.cell.height,l=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,d=o*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=d+"px",this._compositionView.style.top=l+"px",this._compositionView.style.height=u+"px",this._compositionView.style.lineHeight=u+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const p=this._compositionView.getBoundingClientRect();this._textarea.style.left=d+"px",this._textarea.style.top=l+"px",this._textarea.style.width=Math.max(p.width,1)+"px",this._textarea.style.height=Math.max(p.height,1)+"px",this._textarea.style.lineHeight=p.height+"px"}y||setTimeout((()=>this.updateCompositionElements(!0)),0)}}};r.CompositionHelper=w=h([f(2,_.IBufferService),f(3,_.IOptionsService),f(4,_.ICoreService),f(5,a.IRenderService)],w)},9806:(v,r)=>{function n(h,f,a){const _=a.getBoundingClientRect(),m=h.getComputedStyle(a),w=parseInt(m.getPropertyValue("padding-left")),y=parseInt(m.getPropertyValue("padding-top"));return[f.clientX-_.left-w,f.clientY-_.top-y]}Object.defineProperty(r,"__esModule",{value:!0}),r.getCoords=r.getCoordsRelativeToElement=void 0,r.getCoordsRelativeToElement=n,r.getCoords=function(h,f,a,_,m,w,y,o,u){if(!w)return;const l=n(h,f,a);return l?(l[0]=Math.ceil((l[0]+(u?y/2:0))/y),l[1]=Math.ceil(l[1]/o),l[0]=Math.min(Math.max(l[0],1),_+(u?1:0)),l[1]=Math.min(Math.max(l[1],1),m),l):void 0}},9504:(v,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.moveToCellSequence=void 0;const h=n(2584);function f(o,u,l,d){const p=o-a(o,l),b=u-a(u,l),E=Math.abs(p-b)-(function(x,S,k){let D=0;const H=x-a(x,k),T=S-a(S,k);for(let I=0;I<Math.abs(H-T);I++){const V=_(x,S)==="A"?-1:1,J=k.buffer.lines.get(H+V*I);J?.isWrapped&&D++}return D})(o,u,l);return y(E,w(_(o,u),d))}function a(o,u){let l=0,d=u.buffer.lines.get(o),p=d?.isWrapped;for(;p&&o>=0&&o<u.rows;)l++,d=u.buffer.lines.get(--o),p=d?.isWrapped;return l}function _(o,u){return o>u?"A":"B"}function m(o,u,l,d,p,b){let E=o,x=u,S="";for(;E!==l||x!==d;)E+=p?1:-1,p&&E>b.cols-1?(S+=b.buffer.translateBufferLineToString(x,!1,o,E),E=0,o=0,x++):!p&&E<0&&(S+=b.buffer.translateBufferLineToString(x,!1,0,o+1),E=b.cols-1,o=E,x--);return S+b.buffer.translateBufferLineToString(x,!1,o,E)}function w(o,u){const l=u?"O":"[";return h.C0.ESC+l+o}function y(o,u){o=Math.floor(o);let l="";for(let d=0;d<o;d++)l+=u;return l}r.moveToCellSequence=function(o,u,l,d){const p=l.buffer.x,b=l.buffer.y;if(!l.buffer.hasScrollback)return(function(S,k,D,H,T,I){return f(k,H,T,I).length===0?"":y(m(S,k,S,k-a(k,T),!1,T).length,w("D",I))})(p,b,0,u,l,d)+f(b,u,l,d)+(function(S,k,D,H,T,I){let V;V=f(k,H,T,I).length>0?H-a(H,T):k;const J=H,X=(function(K,A,B,P,F,Z){let q;return q=f(B,P,F,Z).length>0?P-a(P,F):A,K<B&&q<=P||K>=B&&q<P?"C":"D"})(S,k,D,H,T,I);return y(m(S,V,D,J,X==="C",T).length,w(X,I))})(p,b,o,u,l,d);let E;if(b===u)return E=p>o?"D":"C",y(Math.abs(p-o),w(E,d));E=b>u?"D":"C";const x=Math.abs(b-u);return y((function(S,k){return k.cols-S})(b>u?o:p,l)+(x-1)*l.cols+1+((b>u?p:o)-1),w(E,d))}},1296:function(v,r,n){var h=this&&this.__decorate||function(T,I,V,J){var X,K=arguments.length,A=K<3?I:J===null?J=Object.getOwnPropertyDescriptor(I,V):J;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(T,I,V,J);else for(var B=T.length-1;B>=0;B--)(X=T[B])&&(A=(K<3?X(A):K>3?X(I,V,A):X(I,V))||A);return K>3&&A&&Object.defineProperty(I,V,A),A},f=this&&this.__param||function(T,I){return function(V,J){I(V,J,T)}};Object.defineProperty(r,"__esModule",{value:!0}),r.DomRenderer=void 0;const a=n(3787),_=n(2550),m=n(2223),w=n(6171),y=n(4725),o=n(8055),u=n(8460),l=n(844),d=n(2585),p="xterm-dom-renderer-owner-",b="xterm-rows",E="xterm-fg-",x="xterm-bg-",S="xterm-focus",k="xterm-selection";let D=1,H=r.DomRenderer=class extends l.Disposable{constructor(T,I,V,J,X,K,A,B,P,F){super(),this._element=T,this._screenElement=I,this._viewportElement=V,this._linkifier2=J,this._charSizeService=K,this._optionsService=A,this._bufferService=B,this._coreBrowserService=P,this._themeService=F,this._terminalClass=D++,this._rowElements=[],this.onRequestRedraw=this.register(new u.EventEmitter).event,this._rowContainer=document.createElement("div"),this._rowContainer.classList.add(b),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=document.createElement("div"),this._selectionContainer.classList.add(k),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,w.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange((()=>this._handleOptionsChanged()))),this.register(this._themeService.onChangeColors((Z=>this._injectCss(Z)))),this._injectCss(this._themeService.colors),this._rowFactory=X.createInstance(a.DomRendererRowFactory,document),this._element.classList.add(p+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline((Z=>this._handleLinkHover(Z)))),this.register(this._linkifier2.onHideLinkUnderline((Z=>this._handleLinkLeave(Z)))),this.register((0,l.toDisposable)((()=>{this._element.classList.remove(p+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()}))),this._widthCache=new _.WidthCache(document),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const T=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*T,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*T),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/T),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/T),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const V of this._rowElements)V.style.width=`${this.dimensions.css.canvas.width}px`,V.style.height=`${this.dimensions.css.cell.height}px`,V.style.lineHeight=`${this.dimensions.css.cell.height}px`,V.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const I=`${this._terminalSelector} .${b} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=I,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(T){this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let I=`${this._terminalSelector} .${b} { color: ${T.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;I+=`${this._terminalSelector} .${b} .xterm-dim { color: ${o.color.multiplyOpacity(T.foreground,.5).css};}`,I+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`,I+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  border-bottom-style: hidden; }}",I+="@keyframes blink_block_"+this._terminalClass+` { 0% {  background-color: ${T.cursor.css};  color: ${T.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${T.cursor.css}; }}`,I+=`${this._terminalSelector} .${b}.${S} .xterm-cursor.xterm-cursor-blink:not(.xterm-cursor-block) { animation: blink_box_shadow_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${b}.${S} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: blink_block_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${b} .xterm-cursor.xterm-cursor-block { background-color: ${T.cursor.css}; color: ${T.cursorAccent.css};}${this._terminalSelector} .${b} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${T.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${b} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${T.cursor.css} inset;}${this._terminalSelector} .${b} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${T.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,I+=`${this._terminalSelector} .${k} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${k} div { position: absolute; background-color: ${T.selectionBackgroundOpaque.css};}${this._terminalSelector} .${k} div { position: absolute; background-color: ${T.selectionInactiveBackgroundOpaque.css};}`;for(const[V,J]of T.ansi.entries())I+=`${this._terminalSelector} .${E}${V} { color: ${J.css}; }${this._terminalSelector} .${E}${V}.xterm-dim { color: ${o.color.multiplyOpacity(J,.5).css}; }${this._terminalSelector} .${x}${V} { background-color: ${J.css}; }`;I+=`${this._terminalSelector} .${E}${m.INVERTED_DEFAULT_COLOR} { color: ${o.color.opaque(T.background).css}; }${this._terminalSelector} .${E}${m.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${o.color.multiplyOpacity(o.color.opaque(T.background),.5).css}; }${this._terminalSelector} .${x}${m.INVERTED_DEFAULT_COLOR} { background-color: ${T.foreground.css}; }`,this._themeStyleElement.textContent=I}_setDefaultSpacing(){const T=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${T}px`,this._rowFactory.defaultSpacing=T}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(T,I){for(let V=this._rowElements.length;V<=I;V++){const J=document.createElement("div");this._rowContainer.appendChild(J),this._rowElements.push(J)}for(;this._rowElements.length>I;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(T,I){this._refreshRowElements(T,I),this._updateDimensions()}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(S)}handleFocus(){this._rowContainer.classList.add(S),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(T,I,V){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(T,I,V),this.renderRows(0,this._bufferService.rows-1),!T||!I)return;const J=T[1]-this._bufferService.buffer.ydisp,X=I[1]-this._bufferService.buffer.ydisp,K=Math.max(J,0),A=Math.min(X,this._bufferService.rows-1);if(K>=this._bufferService.rows||A<0)return;const B=document.createDocumentFragment();if(V){const P=T[0]>I[0];B.appendChild(this._createSelectionElement(K,P?I[0]:T[0],P?T[0]:I[0],A-K+1))}else{const P=J===K?T[0]:0,F=K===X?I[0]:this._bufferService.cols;B.appendChild(this._createSelectionElement(K,P,F));const Z=A-K-1;if(B.appendChild(this._createSelectionElement(K+1,0,this._bufferService.cols,Z)),K!==A){const q=X===A?I[0]:this._bufferService.cols;B.appendChild(this._createSelectionElement(A,0,q))}}this._selectionContainer.appendChild(B)}_createSelectionElement(T,I,V,J=1){const X=document.createElement("div");return X.style.height=J*this.dimensions.css.cell.height+"px",X.style.top=T*this.dimensions.css.cell.height+"px",X.style.left=I*this.dimensions.css.cell.width+"px",X.style.width=this.dimensions.css.cell.width*(V-I)+"px",X}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const T of this._rowElements)T.replaceChildren()}renderRows(T,I){const V=this._bufferService.buffer,J=V.ybase+V.y,X=Math.min(V.x,this._bufferService.cols-1),K=this._optionsService.rawOptions.cursorBlink,A=this._optionsService.rawOptions.cursorStyle,B=this._optionsService.rawOptions.cursorInactiveStyle;for(let P=T;P<=I;P++){const F=P+V.ydisp,Z=this._rowElements[P],q=V.lines.get(F);if(!Z||!q)break;Z.replaceChildren(...this._rowFactory.createRow(q,F,F===J,A,B,X,K,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${p}${this._terminalClass}`}_handleLinkHover(T){this._setCellUnderline(T.x1,T.x2,T.y1,T.y2,T.cols,!0)}_handleLinkLeave(T){this._setCellUnderline(T.x1,T.x2,T.y1,T.y2,T.cols,!1)}_setCellUnderline(T,I,V,J,X,K){V<0&&(T=0),J<0&&(I=0);const A=this._bufferService.rows-1;V=Math.max(Math.min(V,A),0),J=Math.max(Math.min(J,A),0),X=Math.min(X,this._bufferService.cols);const B=this._bufferService.buffer,P=B.ybase+B.y,F=Math.min(B.x,X-1),Z=this._optionsService.rawOptions.cursorBlink,q=this._optionsService.rawOptions.cursorStyle,W=this._optionsService.rawOptions.cursorInactiveStyle;for(let z=V;z<=J;++z){const ue=z+B.ydisp,C=this._rowElements[z],M=B.lines.get(ue);if(!C||!M)break;C.replaceChildren(...this._rowFactory.createRow(M,ue,ue===P,q,W,F,Z,this.dimensions.css.cell.width,this._widthCache,K?z===V?T:0:-1,K?(z===J?I:X)-1:-1))}}};r.DomRenderer=H=h([f(4,d.IInstantiationService),f(5,y.ICharSizeService),f(6,d.IOptionsService),f(7,d.IBufferService),f(8,y.ICoreBrowserService),f(9,y.IThemeService)],H)},3787:function(v,r,n){var h=this&&this.__decorate||function(E,x,S,k){var D,H=arguments.length,T=H<3?x:k===null?k=Object.getOwnPropertyDescriptor(x,S):k;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(E,x,S,k);else for(var I=E.length-1;I>=0;I--)(D=E[I])&&(T=(H<3?D(T):H>3?D(x,S,T):D(x,S))||T);return H>3&&T&&Object.defineProperty(x,S,T),T},f=this&&this.__param||function(E,x){return function(S,k){x(S,k,E)}};Object.defineProperty(r,"__esModule",{value:!0}),r.DomRendererRowFactory=void 0;const a=n(2223),_=n(643),m=n(511),w=n(2585),y=n(8055),o=n(4725),u=n(4269),l=n(6171),d=n(3734);let p=r.DomRendererRowFactory=class{constructor(E,x,S,k,D,H,T){this._document=E,this._characterJoinerService=x,this._optionsService=S,this._coreBrowserService=k,this._coreService=D,this._decorationService=H,this._themeService=T,this._workCell=new m.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(E,x,S){this._selectionStart=E,this._selectionEnd=x,this._columnSelectMode=S}createRow(E,x,S,k,D,H,T,I,V,J,X){const K=[],A=this._characterJoinerService.getJoinedCharacters(x),B=this._themeService.colors;let P,F=E.getNoBgTrimmedLength();S&&F<H+1&&(F=H+1);let Z=0,q="",W=0,z=0,ue=0,C=!1,M=0,$=!1,U=0;const re=[],L=J!==-1&&X!==-1;for(let O=0;O<F;O++){E.loadCell(O,this._workCell);let N=this._workCell.getWidth();if(N===0)continue;let G=!1,Y=O,j=this._workCell;if(A.length>0&&O===A[0][0]){G=!0;const me=A.shift();j=new u.JoinedCellData(this._workCell,E.translateToString(!0,me[0],me[1]),me[1]-me[0]),Y=me[1]-1,N=j.getWidth()}const ie=this._isCellInSelection(O,x),te=S&&O===H,ee=L&&O>=J&&O<=X;let Q=!1;this._decorationService.forEachDecorationAtCell(O,x,void 0,(me=>{Q=!0}));let ae=j.getChars()||_.WHITESPACE_CELL_CHAR;if(ae===" "&&(j.isUnderline()||j.isOverline())&&(ae=" "),U=N*I-V.get(ae,j.isBold(),j.isItalic()),P){if(Z&&(ie&&$||!ie&&!$&&j.bg===W)&&(ie&&$&&B.selectionForeground||j.fg===z)&&j.extended.ext===ue&&ee===C&&U===M&&!te&&!G&&!Q){q+=ae,Z++;continue}Z&&(P.textContent=q),P=this._document.createElement("span"),Z=0,q=""}else P=this._document.createElement("span");if(W=j.bg,z=j.fg,ue=j.extended.ext,C=ee,M=U,$=ie,G&&H>=O&&H<=Y&&(H=O),!this._coreService.isCursorHidden&&te){if(re.push("xterm-cursor"),this._coreBrowserService.isFocused)T&&re.push("xterm-cursor-blink"),re.push(k==="bar"?"xterm-cursor-bar":k==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(D)switch(D){case"outline":re.push("xterm-cursor-outline");break;case"block":re.push("xterm-cursor-block");break;case"bar":re.push("xterm-cursor-bar");break;case"underline":re.push("xterm-cursor-underline")}}if(j.isBold()&&re.push("xterm-bold"),j.isItalic()&&re.push("xterm-italic"),j.isDim()&&re.push("xterm-dim"),q=j.isInvisible()?_.WHITESPACE_CELL_CHAR:j.getChars()||_.WHITESPACE_CELL_CHAR,j.isUnderline()&&(re.push(`xterm-underline-${j.extended.underlineStyle}`),q===" "&&(q=" "),!j.isUnderlineColorDefault()))if(j.isUnderlineColorRGB())P.style.textDecorationColor=`rgb(${d.AttributeData.toColorRGB(j.getUnderlineColor()).join(",")})`;else{let me=j.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&j.isBold()&&me<8&&(me+=8),P.style.textDecorationColor=B.ansi[me].css}j.isOverline()&&(re.push("xterm-overline"),q===" "&&(q=" ")),j.isStrikethrough()&&re.push("xterm-strikethrough"),ee&&(P.style.textDecoration="underline");let se=j.getFgColor(),ne=j.getFgColorMode(),oe=j.getBgColor(),_e=j.getBgColorMode();const Se=!!j.isInverse();if(Se){const me=se;se=oe,oe=me;const It=ne;ne=_e,_e=It}let pe,Be,Ae,Pe=!1;switch(this._decorationService.forEachDecorationAtCell(O,x,void 0,(me=>{me.options.layer!=="top"&&Pe||(me.backgroundColorRGB&&(_e=50331648,oe=me.backgroundColorRGB.rgba>>8&16777215,pe=me.backgroundColorRGB),me.foregroundColorRGB&&(ne=50331648,se=me.foregroundColorRGB.rgba>>8&16777215,Be=me.foregroundColorRGB),Pe=me.options.layer==="top")})),!Pe&&ie&&(pe=this._coreBrowserService.isFocused?B.selectionBackgroundOpaque:B.selectionInactiveBackgroundOpaque,oe=pe.rgba>>8&16777215,_e=50331648,Pe=!0,B.selectionForeground&&(ne=50331648,se=B.selectionForeground.rgba>>8&16777215,Be=B.selectionForeground)),Pe&&re.push("xterm-decoration-top"),_e){case 16777216:case 33554432:Ae=B.ansi[oe],re.push(`xterm-bg-${oe}`);break;case 50331648:Ae=y.rgba.toColor(oe>>16,oe>>8&255,255&oe),this._addStyle(P,`background-color:#${b((oe>>>0).toString(16),"0",6)}`);break;default:Se?(Ae=B.foreground,re.push(`xterm-bg-${a.INVERTED_DEFAULT_COLOR}`)):Ae=B.background}switch(pe||j.isDim()&&(pe=y.color.multiplyOpacity(Ae,.5)),ne){case 16777216:case 33554432:j.isBold()&&se<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(se+=8),this._applyMinimumContrast(P,Ae,B.ansi[se],j,pe,void 0)||re.push(`xterm-fg-${se}`);break;case 50331648:const me=y.rgba.toColor(se>>16&255,se>>8&255,255&se);this._applyMinimumContrast(P,Ae,me,j,pe,Be)||this._addStyle(P,`color:#${b(se.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(P,Ae,B.foreground,j,pe,void 0)||Se&&re.push(`xterm-fg-${a.INVERTED_DEFAULT_COLOR}`)}re.length&&(P.className=re.join(" "),re.length=0),te||G||Q?P.textContent=q:Z++,U!==this.defaultSpacing&&(P.style.letterSpacing=`${U}px`),K.push(P),O=Y}return P&&Z&&(P.textContent=q),K}_applyMinimumContrast(E,x,S,k,D,H){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,l.excludeFromContrastRatioDemands)(k.getCode()))return!1;const T=this._getContrastCache(k);let I;if(D||H||(I=T.getColor(x.rgba,S.rgba)),I===void 0){const V=this._optionsService.rawOptions.minimumContrastRatio/(k.isDim()?2:1);I=y.color.ensureContrastRatio(D||x,H||S,V),T.setColor((D||x).rgba,(H||S).rgba,I??null)}return!!I&&(this._addStyle(E,`color:${I.css}`),!0)}_getContrastCache(E){return E.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(E,x){E.setAttribute("style",`${E.getAttribute("style")||""}${x};`)}_isCellInSelection(E,x){const S=this._selectionStart,k=this._selectionEnd;return!(!S||!k)&&(this._columnSelectMode?S[0]<=k[0]?E>=S[0]&&x>=S[1]&&E<k[0]&&x<=k[1]:E<S[0]&&x>=S[1]&&E>=k[0]&&x<=k[1]:x>S[1]&&x<k[1]||S[1]===k[1]&&x===S[1]&&E>=S[0]&&E<k[0]||S[1]<k[1]&&x===k[1]&&E<k[0]||S[1]<k[1]&&x===S[1]&&E>=S[0])}};function b(E,x,S){for(;E.length<S;)E=x+E;return E}r.DomRendererRowFactory=p=h([f(1,o.ICharacterJoinerService),f(2,w.IOptionsService),f(3,o.ICoreBrowserService),f(4,w.ICoreService),f(5,w.IDecorationService),f(6,o.IThemeService)],p)},2550:(v,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.WidthCache=void 0,r.WidthCache=class{constructor(n){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=n.createElement("div"),this._container.style.position="absolute",this._container.style.top="-50000px",this._container.style.width="50000px",this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const h=n.createElement("span"),f=n.createElement("span");f.style.fontWeight="bold";const a=n.createElement("span");a.style.fontStyle="italic";const _=n.createElement("span");_.style.fontWeight="bold",_.style.fontStyle="italic",this._measureElements=[h,f,a,_],this._container.appendChild(h),this._container.appendChild(f),this._container.appendChild(a),this._container.appendChild(_),n.body.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(n,h,f,a){n===this._font&&h===this._fontSize&&f===this._weight&&a===this._weightBold||(this._font=n,this._fontSize=h,this._weight=f,this._weightBold=a,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${f}`,this._measureElements[1].style.fontWeight=`${a}`,this._measureElements[2].style.fontWeight=`${f}`,this._measureElements[3].style.fontWeight=`${a}`,this.clear())}get(n,h,f){let a=0;if(!h&&!f&&n.length===1&&(a=n.charCodeAt(0))<256)return this._flat[a]!==-9999?this._flat[a]:this._flat[a]=this._measure(n,0);let _=n;h&&(_+="B"),f&&(_+="I");let m=this._holey.get(_);if(m===void 0){let w=0;h&&(w|=1),f&&(w|=2),m=this._measure(n,w),this._holey.set(_,m)}return m}_measure(n,h){const f=this._measureElements[h];return f.textContent=n.repeat(32),f.offsetWidth/32}}},2223:(v,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.TEXT_BASELINE=r.DIM_OPACITY=r.INVERTED_DEFAULT_COLOR=void 0;const h=n(6114);r.INVERTED_DEFAULT_COLOR=257,r.DIM_OPACITY=.5,r.TEXT_BASELINE=h.isFirefox||h.isLegacyEdge?"bottom":"ideographic"},6171:(v,r)=>{function n(h){return 57508<=h&&h<=57558}Object.defineProperty(r,"__esModule",{value:!0}),r.createRenderDimensions=r.excludeFromContrastRatioDemands=r.isRestrictedPowerlineGlyph=r.isPowerlineGlyph=r.throwIfFalsy=void 0,r.throwIfFalsy=function(h){if(!h)throw new Error("value must not be falsy");return h},r.isPowerlineGlyph=n,r.isRestrictedPowerlineGlyph=function(h){return 57520<=h&&h<=57527},r.excludeFromContrastRatioDemands=function(h){return n(h)||(function(f){return 9472<=f&&f<=9631})(h)},r.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},456:(v,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.SelectionModel=void 0,r.SelectionModel=class{constructor(n){this._bufferService=n,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const n=this.selectionStart[0]+this.selectionStartLength;return n>this._bufferService.cols?n%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(n/this._bufferService.cols)-1]:[n%this._bufferService.cols,this.selectionStart[1]+Math.floor(n/this._bufferService.cols)]:[n,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const n=this.selectionStart[0]+this.selectionStartLength;return n>this._bufferService.cols?[n%this._bufferService.cols,this.selectionStart[1]+Math.floor(n/this._bufferService.cols)]:[Math.max(n,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const n=this.selectionStart,h=this.selectionEnd;return!(!n||!h)&&(n[1]>h[1]||n[1]===h[1]&&n[0]>h[0])}handleTrim(n){return this.selectionStart&&(this.selectionStart[1]-=n),this.selectionEnd&&(this.selectionEnd[1]-=n),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(v,r,n){var h=this&&this.__decorate||function(o,u,l,d){var p,b=arguments.length,E=b<3?u:d===null?d=Object.getOwnPropertyDescriptor(u,l):d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(o,u,l,d);else for(var x=o.length-1;x>=0;x--)(p=o[x])&&(E=(b<3?p(E):b>3?p(u,l,E):p(u,l))||E);return b>3&&E&&Object.defineProperty(u,l,E),E},f=this&&this.__param||function(o,u){return function(l,d){u(l,d,o)}};Object.defineProperty(r,"__esModule",{value:!0}),r.CharSizeService=void 0;const a=n(2585),_=n(8460),m=n(844);let w=r.CharSizeService=class extends m.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(o,u,l){super(),this._optionsService=l,this.width=0,this.height=0,this._onCharSizeChange=this.register(new _.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event,this._measureStrategy=new y(o,u,this._optionsService),this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],(()=>this.measure())))}measure(){const o=this._measureStrategy.measure();o.width===this.width&&o.height===this.height||(this.width=o.width,this.height=o.height,this._onCharSizeChange.fire())}};r.CharSizeService=w=h([f(2,a.IOptionsService)],w);class y{constructor(u,l,d){this._document=u,this._parentElement=l,this._optionsService=d,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`;const u={height:Number(this._measureElement.offsetHeight),width:Number(this._measureElement.offsetWidth)};return u.width!==0&&u.height!==0&&(this._result.width=u.width/32,this._result.height=Math.ceil(u.height)),this._result}}},4269:function(v,r,n){var h=this&&this.__decorate||function(u,l,d,p){var b,E=arguments.length,x=E<3?l:p===null?p=Object.getOwnPropertyDescriptor(l,d):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(u,l,d,p);else for(var S=u.length-1;S>=0;S--)(b=u[S])&&(x=(E<3?b(x):E>3?b(l,d,x):b(l,d))||x);return E>3&&x&&Object.defineProperty(l,d,x),x},f=this&&this.__param||function(u,l){return function(d,p){l(d,p,u)}};Object.defineProperty(r,"__esModule",{value:!0}),r.CharacterJoinerService=r.JoinedCellData=void 0;const a=n(3734),_=n(643),m=n(511),w=n(2585);class y extends a.AttributeData{constructor(l,d,p){super(),this.content=0,this.combinedData="",this.fg=l.fg,this.bg=l.bg,this.combinedData=d,this._width=p}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(l){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}r.JoinedCellData=y;let o=r.CharacterJoinerService=class ma{constructor(l){this._bufferService=l,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new m.CellData}register(l){const d={id:this._nextCharacterJoinerId++,handler:l};return this._characterJoiners.push(d),d.id}deregister(l){for(let d=0;d<this._characterJoiners.length;d++)if(this._characterJoiners[d].id===l)return this._characterJoiners.splice(d,1),!0;return!1}getJoinedCharacters(l){if(this._characterJoiners.length===0)return[];const d=this._bufferService.buffer.lines.get(l);if(!d||d.length===0)return[];const p=[],b=d.translateToString(!0);let E=0,x=0,S=0,k=d.getFg(0),D=d.getBg(0);for(let H=0;H<d.getTrimmedLength();H++)if(d.loadCell(H,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==k||this._workCell.bg!==D){if(H-E>1){const T=this._getJoinedRanges(b,S,x,d,E);for(let I=0;I<T.length;I++)p.push(T[I])}E=H,S=x,k=this._workCell.fg,D=this._workCell.bg}x+=this._workCell.getChars().length||_.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-E>1){const H=this._getJoinedRanges(b,S,x,d,E);for(let T=0;T<H.length;T++)p.push(H[T])}return p}_getJoinedRanges(l,d,p,b,E){const x=l.substring(d,p);let S=[];try{S=this._characterJoiners[0].handler(x)}catch(k){console.error(k)}for(let k=1;k<this._characterJoiners.length;k++)try{const D=this._characterJoiners[k].handler(x);for(let H=0;H<D.length;H++)ma._mergeRanges(S,D[H])}catch(D){console.error(D)}return this._stringRangesToCellRanges(S,b,E),S}_stringRangesToCellRanges(l,d,p){let b=0,E=!1,x=0,S=l[b];if(S){for(let k=p;k<this._bufferService.cols;k++){const D=d.getWidth(k),H=d.getString(k).length||_.WHITESPACE_CELL_CHAR.length;if(D!==0){if(!E&&S[0]<=x&&(S[0]=k,E=!0),S[1]<=x){if(S[1]=k,S=l[++b],!S)break;S[0]<=x?(S[0]=k,E=!0):E=!1}x+=H}}S&&(S[1]=this._bufferService.cols)}}static _mergeRanges(l,d){let p=!1;for(let b=0;b<l.length;b++){const E=l[b];if(p){if(d[1]<=E[0])return l[b-1][1]=d[1],l;if(d[1]<=E[1])return l[b-1][1]=Math.max(d[1],E[1]),l.splice(b,1),l;l.splice(b,1),b--}else{if(d[1]<=E[0])return l.splice(b,0,d),l;if(d[1]<=E[1])return E[0]=Math.min(d[0],E[0]),l;d[0]<E[1]&&(E[0]=Math.min(d[0],E[0]),p=!0)}}return p?l[l.length-1][1]=d[1]:l.push(d),l}};r.CharacterJoinerService=o=h([f(0,w.IBufferService)],o)},5114:(v,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.CoreBrowserService=void 0,r.CoreBrowserService=class{constructor(n,h){this._textarea=n,this.window=h,this._isFocused=!1,this._cachedIsFocused=void 0,this._textarea.addEventListener("focus",(()=>this._isFocused=!0)),this._textarea.addEventListener("blur",(()=>this._isFocused=!1))}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask((()=>this._cachedIsFocused=void 0))),this._cachedIsFocused}}},8934:function(v,r,n){var h=this&&this.__decorate||function(w,y,o,u){var l,d=arguments.length,p=d<3?y:u===null?u=Object.getOwnPropertyDescriptor(y,o):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")p=Reflect.decorate(w,y,o,u);else for(var b=w.length-1;b>=0;b--)(l=w[b])&&(p=(d<3?l(p):d>3?l(y,o,p):l(y,o))||p);return d>3&&p&&Object.defineProperty(y,o,p),p},f=this&&this.__param||function(w,y){return function(o,u){y(o,u,w)}};Object.defineProperty(r,"__esModule",{value:!0}),r.MouseService=void 0;const a=n(4725),_=n(9806);let m=r.MouseService=class{constructor(w,y){this._renderService=w,this._charSizeService=y}getCoords(w,y,o,u,l){return(0,_.getCoords)(window,w,y,o,u,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,l)}getMouseReportCoords(w,y){const o=(0,_.getCoordsRelativeToElement)(window,w,y);if(this._charSizeService.hasValidSize)return o[0]=Math.min(Math.max(o[0],0),this._renderService.dimensions.css.canvas.width-1),o[1]=Math.min(Math.max(o[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(o[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(o[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(o[0]),y:Math.floor(o[1])}}};r.MouseService=m=h([f(0,a.IRenderService),f(1,a.ICharSizeService)],m)},3230:function(v,r,n){var h=this&&this.__decorate||function(p,b,E,x){var S,k=arguments.length,D=k<3?b:x===null?x=Object.getOwnPropertyDescriptor(b,E):x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(p,b,E,x);else for(var H=p.length-1;H>=0;H--)(S=p[H])&&(D=(k<3?S(D):k>3?S(b,E,D):S(b,E))||D);return k>3&&D&&Object.defineProperty(b,E,D),D},f=this&&this.__param||function(p,b){return function(E,x){b(E,x,p)}};Object.defineProperty(r,"__esModule",{value:!0}),r.RenderService=void 0;const a=n(3656),_=n(6193),m=n(5596),w=n(4725),y=n(8460),o=n(844),u=n(7226),l=n(2585);let d=r.RenderService=class extends o.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(p,b,E,x,S,k,D,H){if(super(),this._rowCount=p,this._charSizeService=x,this._renderer=this.register(new o.MutableDisposable),this._pausedResizeTask=new u.DebouncedIdleTask,this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new y.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new y.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new y.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new y.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new _.RenderDebouncer(D.window,((T,I)=>this._renderRows(T,I))),this.register(this._renderDebouncer),this._screenDprMonitor=new m.ScreenDprMonitor(D.window),this._screenDprMonitor.setListener((()=>this.handleDevicePixelRatioChange())),this.register(this._screenDprMonitor),this.register(k.onResize((()=>this._fullRefresh()))),this.register(k.buffers.onBufferActivate((()=>{var T;return(T=this._renderer.value)===null||T===void 0?void 0:T.clear()}))),this.register(E.onOptionChange((()=>this._handleOptionsChanged()))),this.register(this._charSizeService.onCharSizeChange((()=>this.handleCharSizeChanged()))),this.register(S.onDecorationRegistered((()=>this._fullRefresh()))),this.register(S.onDecorationRemoved((()=>this._fullRefresh()))),this.register(E.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio"],(()=>{this.clear(),this.handleResize(k.cols,k.rows),this._fullRefresh()}))),this.register(E.onMultipleOptionChange(["cursorBlink","cursorStyle"],(()=>this.refreshRows(k.buffer.y,k.buffer.y,!0)))),this.register((0,a.addDisposableDomListener)(D.window,"resize",(()=>this.handleDevicePixelRatioChange()))),this.register(H.onChangeColors((()=>this._fullRefresh()))),"IntersectionObserver"in D.window){const T=new D.window.IntersectionObserver((I=>this._handleIntersectionChange(I[I.length-1])),{threshold:0});T.observe(b),this.register({dispose:()=>T.disconnect()})}}_handleIntersectionChange(p){this._isPaused=p.isIntersecting===void 0?p.intersectionRatio===0:!p.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(p,b,E=!1){this._isPaused?this._needsFullRefresh=!0:(E||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(p,b,this._rowCount))}_renderRows(p,b){this._renderer.value&&(p=Math.min(p,this._rowCount-1),b=Math.min(b,this._rowCount-1),this._renderer.value.renderRows(p,b),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:p,end:b}),this._onRender.fire({start:p,end:b}),this._isNextRenderRedrawOnly=!0)}resize(p,b){this._rowCount=b,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(p){this._renderer.value=p,this._renderer.value.onRequestRedraw((b=>this.refreshRows(b.start,b.end,!0))),this._needsSelectionRefresh=!0,this._fullRefresh()}addRefreshCallback(p){return this._renderDebouncer.addRefreshCallback(p)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var p,b;this._renderer.value&&((b=(p=this._renderer.value).clearTextureAtlas)===null||b===void 0||b.call(p),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(p,b){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set((()=>this._renderer.value.handleResize(p,b))):this._renderer.value.handleResize(p,b),this._fullRefresh())}handleCharSizeChanged(){var p;(p=this._renderer.value)===null||p===void 0||p.handleCharSizeChanged()}handleBlur(){var p;(p=this._renderer.value)===null||p===void 0||p.handleBlur()}handleFocus(){var p;(p=this._renderer.value)===null||p===void 0||p.handleFocus()}handleSelectionChanged(p,b,E){var x;this._selectionState.start=p,this._selectionState.end=b,this._selectionState.columnSelectMode=E,(x=this._renderer.value)===null||x===void 0||x.handleSelectionChanged(p,b,E)}handleCursorMove(){var p;(p=this._renderer.value)===null||p===void 0||p.handleCursorMove()}clear(){var p;(p=this._renderer.value)===null||p===void 0||p.clear()}};r.RenderService=d=h([f(2,l.IOptionsService),f(3,w.ICharSizeService),f(4,l.IDecorationService),f(5,l.IBufferService),f(6,w.ICoreBrowserService),f(7,w.IThemeService)],d)},9312:function(v,r,n){var h=this&&this.__decorate||function(S,k,D,H){var T,I=arguments.length,V=I<3?k:H===null?H=Object.getOwnPropertyDescriptor(k,D):H;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")V=Reflect.decorate(S,k,D,H);else for(var J=S.length-1;J>=0;J--)(T=S[J])&&(V=(I<3?T(V):I>3?T(k,D,V):T(k,D))||V);return I>3&&V&&Object.defineProperty(k,D,V),V},f=this&&this.__param||function(S,k){return function(D,H){k(D,H,S)}};Object.defineProperty(r,"__esModule",{value:!0}),r.SelectionService=void 0;const a=n(9806),_=n(9504),m=n(456),w=n(4725),y=n(8460),o=n(844),u=n(6114),l=n(4841),d=n(511),p=n(2585),b=" ",E=new RegExp(b,"g");let x=r.SelectionService=class extends o.Disposable{constructor(S,k,D,H,T,I,V,J,X){super(),this._element=S,this._screenElement=k,this._linkifier=D,this._bufferService=H,this._coreService=T,this._mouseService=I,this._optionsService=V,this._renderService=J,this._coreBrowserService=X,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new d.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new y.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new y.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new y.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new y.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=K=>this._handleMouseMove(K),this._mouseUpListener=K=>this._handleMouseUp(K),this._coreService.onUserInput((()=>{this.hasSelection&&this.clearSelection()})),this._trimListener=this._bufferService.buffer.lines.onTrim((K=>this._handleTrim(K))),this.register(this._bufferService.buffers.onBufferActivate((K=>this._handleBufferActivate(K)))),this.enable(),this._model=new m.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,o.toDisposable)((()=>{this._removeMouseDownListeners()})))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const S=this._model.finalSelectionStart,k=this._model.finalSelectionEnd;return!(!S||!k||S[0]===k[0]&&S[1]===k[1])}get selectionText(){const S=this._model.finalSelectionStart,k=this._model.finalSelectionEnd;if(!S||!k)return"";const D=this._bufferService.buffer,H=[];if(this._activeSelectionMode===3){if(S[0]===k[0])return"";const T=S[0]<k[0]?S[0]:k[0],I=S[0]<k[0]?k[0]:S[0];for(let V=S[1];V<=k[1];V++){const J=D.translateBufferLineToString(V,!0,T,I);H.push(J)}}else{const T=S[1]===k[1]?k[0]:void 0;H.push(D.translateBufferLineToString(S[1],!0,S[0],T));for(let I=S[1]+1;I<=k[1]-1;I++){const V=D.lines.get(I),J=D.translateBufferLineToString(I,!0);V?.isWrapped?H[H.length-1]+=J:H.push(J)}if(S[1]!==k[1]){const I=D.lines.get(k[1]),V=D.translateBufferLineToString(k[1],!0,0,k[0]);I&&I.isWrapped?H[H.length-1]+=V:H.push(V)}}return H.map((T=>T.replace(E," "))).join(u.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(S){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>this._refresh()))),u.isLinux&&S&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(S){const k=this._getMouseBufferCoords(S),D=this._model.finalSelectionStart,H=this._model.finalSelectionEnd;return!!(D&&H&&k)&&this._areCoordsInSelection(k,D,H)}isCellInSelection(S,k){const D=this._model.finalSelectionStart,H=this._model.finalSelectionEnd;return!(!D||!H)&&this._areCoordsInSelection([S,k],D,H)}_areCoordsInSelection(S,k,D){return S[1]>k[1]&&S[1]<D[1]||k[1]===D[1]&&S[1]===k[1]&&S[0]>=k[0]&&S[0]<D[0]||k[1]<D[1]&&S[1]===D[1]&&S[0]<D[0]||k[1]<D[1]&&S[1]===k[1]&&S[0]>=k[0]}_selectWordAtCursor(S,k){var D,H;const T=(H=(D=this._linkifier.currentLink)===null||D===void 0?void 0:D.link)===null||H===void 0?void 0:H.range;if(T)return this._model.selectionStart=[T.start.x-1,T.start.y-1],this._model.selectionStartLength=(0,l.getRangeLength)(T,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const I=this._getMouseBufferCoords(S);return!!I&&(this._selectWordAt(I,k),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(S,k){this._model.clearSelection(),S=Math.max(S,0),k=Math.min(k,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,S],this._model.selectionEnd=[this._bufferService.cols,k],this.refresh(),this._onSelectionChange.fire()}_handleTrim(S){this._model.handleTrim(S)&&this.refresh()}_getMouseBufferCoords(S){const k=this._mouseService.getCoords(S,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(k)return k[0]--,k[1]--,k[1]+=this._bufferService.buffer.ydisp,k}_getMouseEventScrollAmount(S){let k=(0,a.getCoordsRelativeToElement)(this._coreBrowserService.window,S,this._screenElement)[1];const D=this._renderService.dimensions.css.canvas.height;return k>=0&&k<=D?0:(k>D&&(k-=D),k=Math.min(Math.max(k,-50),50),k/=50,k/Math.abs(k)+Math.round(14*k))}shouldForceSelection(S){return u.isMac?S.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:S.shiftKey}handleMouseDown(S){if(this._mouseDownTimeStamp=S.timeStamp,(S.button!==2||!this.hasSelection)&&S.button===0){if(!this._enabled){if(!this.shouldForceSelection(S))return;S.stopPropagation()}S.preventDefault(),this._dragScrollAmount=0,this._enabled&&S.shiftKey?this._handleIncrementalClick(S):S.detail===1?this._handleSingleClick(S):S.detail===2?this._handleDoubleClick(S):S.detail===3&&this._handleTripleClick(S),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval((()=>this._dragScroll()),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(S){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(S))}_handleSingleClick(S){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(S)?3:0,this._model.selectionStart=this._getMouseBufferCoords(S),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const k=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);k&&k.length!==this._model.selectionStart[0]&&k.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(S){this._selectWordAtCursor(S,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(S){const k=this._getMouseBufferCoords(S);k&&(this._activeSelectionMode=2,this._selectLineAt(k[1]))}shouldColumnSelect(S){return S.altKey&&!(u.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(S){if(S.stopImmediatePropagation(),!this._model.selectionStart)return;const k=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(S),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(S),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const D=this._bufferService.buffer;if(this._model.selectionEnd[1]<D.lines.length){const H=D.lines.get(this._model.selectionEnd[1]);H&&H.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]++}k&&k[0]===this._model.selectionEnd[0]&&k[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const S=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(S.ydisp+this._bufferService.rows,S.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=S.ydisp),this.refresh()}}_handleMouseUp(S){const k=S.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&k<500&&S.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const D=this._mouseService.getCoords(S,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(D&&D[0]!==void 0&&D[1]!==void 0){const H=(0,_.moveToCellSequence)(D[0]-1,D[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(H,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const S=this._model.finalSelectionStart,k=this._model.finalSelectionEnd,D=!(!S||!k||S[0]===k[0]&&S[1]===k[1]);D?S&&k&&(this._oldSelectionStart&&this._oldSelectionEnd&&S[0]===this._oldSelectionStart[0]&&S[1]===this._oldSelectionStart[1]&&k[0]===this._oldSelectionEnd[0]&&k[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(S,k,D)):this._oldHasSelection&&this._fireOnSelectionChange(S,k,D)}_fireOnSelectionChange(S,k,D){this._oldSelectionStart=S,this._oldSelectionEnd=k,this._oldHasSelection=D,this._onSelectionChange.fire()}_handleBufferActivate(S){this.clearSelection(),this._trimListener.dispose(),this._trimListener=S.activeBuffer.lines.onTrim((k=>this._handleTrim(k)))}_convertViewportColToCharacterIndex(S,k){let D=k;for(let H=0;k>=H;H++){const T=S.loadCell(H,this._workCell).getChars().length;this._workCell.getWidth()===0?D--:T>1&&k!==H&&(D+=T-1)}return D}setSelection(S,k,D){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[S,k],this._model.selectionStartLength=D,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(S){this._isClickInSelection(S)||(this._selectWordAtCursor(S,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(S,k,D=!0,H=!0){if(S[0]>=this._bufferService.cols)return;const T=this._bufferService.buffer,I=T.lines.get(S[1]);if(!I)return;const V=T.translateBufferLineToString(S[1],!1);let J=this._convertViewportColToCharacterIndex(I,S[0]),X=J;const K=S[0]-J;let A=0,B=0,P=0,F=0;if(V.charAt(J)===" "){for(;J>0&&V.charAt(J-1)===" ";)J--;for(;X<V.length&&V.charAt(X+1)===" ";)X++}else{let W=S[0],z=S[0];I.getWidth(W)===0&&(A++,W--),I.getWidth(z)===2&&(B++,z++);const ue=I.getString(z).length;for(ue>1&&(F+=ue-1,X+=ue-1);W>0&&J>0&&!this._isCharWordSeparator(I.loadCell(W-1,this._workCell));){I.loadCell(W-1,this._workCell);const C=this._workCell.getChars().length;this._workCell.getWidth()===0?(A++,W--):C>1&&(P+=C-1,J-=C-1),J--,W--}for(;z<I.length&&X+1<V.length&&!this._isCharWordSeparator(I.loadCell(z+1,this._workCell));){I.loadCell(z+1,this._workCell);const C=this._workCell.getChars().length;this._workCell.getWidth()===2?(B++,z++):C>1&&(F+=C-1,X+=C-1),X++,z++}}X++;let Z=J+K-A+P,q=Math.min(this._bufferService.cols,X-J+A+B-P-F);if(k||V.slice(J,X).trim()!==""){if(D&&Z===0&&I.getCodePoint(0)!==32){const W=T.lines.get(S[1]-1);if(W&&I.isWrapped&&W.getCodePoint(this._bufferService.cols-1)!==32){const z=this._getWordAt([this._bufferService.cols-1,S[1]-1],!1,!0,!1);if(z){const ue=this._bufferService.cols-z.start;Z-=ue,q+=ue}}}if(H&&Z+q===this._bufferService.cols&&I.getCodePoint(this._bufferService.cols-1)!==32){const W=T.lines.get(S[1]+1);if(W?.isWrapped&&W.getCodePoint(0)!==32){const z=this._getWordAt([0,S[1]+1],!1,!1,!0);z&&(q+=z.length)}}return{start:Z,length:q}}}_selectWordAt(S,k){const D=this._getWordAt(S,k);if(D){for(;D.start<0;)D.start+=this._bufferService.cols,S[1]--;this._model.selectionStart=[D.start,S[1]],this._model.selectionStartLength=D.length}}_selectToWordAt(S){const k=this._getWordAt(S,!0);if(k){let D=S[1];for(;k.start<0;)k.start+=this._bufferService.cols,D--;if(!this._model.areSelectionValuesReversed())for(;k.start+k.length>this._bufferService.cols;)k.length-=this._bufferService.cols,D++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?k.start:k.start+k.length,D]}}_isCharWordSeparator(S){return S.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(S.getChars())>=0}_selectLineAt(S){const k=this._bufferService.buffer.getWrappedRangeForLine(S),D={start:{x:0,y:k.first},end:{x:this._bufferService.cols-1,y:k.last}};this._model.selectionStart=[0,k.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,l.getRangeLength)(D,this._bufferService.cols)}};r.SelectionService=x=h([f(3,p.IBufferService),f(4,p.ICoreService),f(5,w.IMouseService),f(6,p.IOptionsService),f(7,w.IRenderService),f(8,w.ICoreBrowserService)],x)},4725:(v,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.IThemeService=r.ICharacterJoinerService=r.ISelectionService=r.IRenderService=r.IMouseService=r.ICoreBrowserService=r.ICharSizeService=void 0;const h=n(8343);r.ICharSizeService=(0,h.createDecorator)("CharSizeService"),r.ICoreBrowserService=(0,h.createDecorator)("CoreBrowserService"),r.IMouseService=(0,h.createDecorator)("MouseService"),r.IRenderService=(0,h.createDecorator)("RenderService"),r.ISelectionService=(0,h.createDecorator)("SelectionService"),r.ICharacterJoinerService=(0,h.createDecorator)("CharacterJoinerService"),r.IThemeService=(0,h.createDecorator)("ThemeService")},6731:function(v,r,n){var h=this&&this.__decorate||function(x,S,k,D){var H,T=arguments.length,I=T<3?S:D===null?D=Object.getOwnPropertyDescriptor(S,k):D;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")I=Reflect.decorate(x,S,k,D);else for(var V=x.length-1;V>=0;V--)(H=x[V])&&(I=(T<3?H(I):T>3?H(S,k,I):H(S,k))||I);return T>3&&I&&Object.defineProperty(S,k,I),I},f=this&&this.__param||function(x,S){return function(k,D){S(k,D,x)}};Object.defineProperty(r,"__esModule",{value:!0}),r.ThemeService=r.DEFAULT_ANSI_COLORS=void 0;const a=n(7239),_=n(8055),m=n(8460),w=n(844),y=n(2585),o=_.css.toColor("#ffffff"),u=_.css.toColor("#000000"),l=_.css.toColor("#ffffff"),d=_.css.toColor("#000000"),p={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};r.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const x=[_.css.toColor("#2e3436"),_.css.toColor("#cc0000"),_.css.toColor("#4e9a06"),_.css.toColor("#c4a000"),_.css.toColor("#3465a4"),_.css.toColor("#75507b"),_.css.toColor("#06989a"),_.css.toColor("#d3d7cf"),_.css.toColor("#555753"),_.css.toColor("#ef2929"),_.css.toColor("#8ae234"),_.css.toColor("#fce94f"),_.css.toColor("#729fcf"),_.css.toColor("#ad7fa8"),_.css.toColor("#34e2e2"),_.css.toColor("#eeeeec")],S=[0,95,135,175,215,255];for(let k=0;k<216;k++){const D=S[k/36%6|0],H=S[k/6%6|0],T=S[k%6];x.push({css:_.channels.toCss(D,H,T),rgba:_.channels.toRgba(D,H,T)})}for(let k=0;k<24;k++){const D=8+10*k;x.push({css:_.channels.toCss(D,D,D),rgba:_.channels.toRgba(D,D,D)})}return x})());let b=r.ThemeService=class extends w.Disposable{get colors(){return this._colors}constructor(x){super(),this._optionsService=x,this._contrastCache=new a.ColorContrastCache,this._halfContrastCache=new a.ColorContrastCache,this._onChangeColors=this.register(new m.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:o,background:u,cursor:l,cursorAccent:d,selectionForeground:void 0,selectionBackgroundTransparent:p,selectionBackgroundOpaque:_.color.blend(u,p),selectionInactiveBackgroundTransparent:p,selectionInactiveBackgroundOpaque:_.color.blend(u,p),ansi:r.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",(()=>this._contrastCache.clear()))),this.register(this._optionsService.onSpecificOptionChange("theme",(()=>this._setTheme(this._optionsService.rawOptions.theme))))}_setTheme(x={}){const S=this._colors;if(S.foreground=E(x.foreground,o),S.background=E(x.background,u),S.cursor=E(x.cursor,l),S.cursorAccent=E(x.cursorAccent,d),S.selectionBackgroundTransparent=E(x.selectionBackground,p),S.selectionBackgroundOpaque=_.color.blend(S.background,S.selectionBackgroundTransparent),S.selectionInactiveBackgroundTransparent=E(x.selectionInactiveBackground,S.selectionBackgroundTransparent),S.selectionInactiveBackgroundOpaque=_.color.blend(S.background,S.selectionInactiveBackgroundTransparent),S.selectionForeground=x.selectionForeground?E(x.selectionForeground,_.NULL_COLOR):void 0,S.selectionForeground===_.NULL_COLOR&&(S.selectionForeground=void 0),_.color.isOpaque(S.selectionBackgroundTransparent)&&(S.selectionBackgroundTransparent=_.color.opacity(S.selectionBackgroundTransparent,.3)),_.color.isOpaque(S.selectionInactiveBackgroundTransparent)&&(S.selectionInactiveBackgroundTransparent=_.color.opacity(S.selectionInactiveBackgroundTransparent,.3)),S.ansi=r.DEFAULT_ANSI_COLORS.slice(),S.ansi[0]=E(x.black,r.DEFAULT_ANSI_COLORS[0]),S.ansi[1]=E(x.red,r.DEFAULT_ANSI_COLORS[1]),S.ansi[2]=E(x.green,r.DEFAULT_ANSI_COLORS[2]),S.ansi[3]=E(x.yellow,r.DEFAULT_ANSI_COLORS[3]),S.ansi[4]=E(x.blue,r.DEFAULT_ANSI_COLORS[4]),S.ansi[5]=E(x.magenta,r.DEFAULT_ANSI_COLORS[5]),S.ansi[6]=E(x.cyan,r.DEFAULT_ANSI_COLORS[6]),S.ansi[7]=E(x.white,r.DEFAULT_ANSI_COLORS[7]),S.ansi[8]=E(x.brightBlack,r.DEFAULT_ANSI_COLORS[8]),S.ansi[9]=E(x.brightRed,r.DEFAULT_ANSI_COLORS[9]),S.ansi[10]=E(x.brightGreen,r.DEFAULT_ANSI_COLORS[10]),S.ansi[11]=E(x.brightYellow,r.DEFAULT_ANSI_COLORS[11]),S.ansi[12]=E(x.brightBlue,r.DEFAULT_ANSI_COLORS[12]),S.ansi[13]=E(x.brightMagenta,r.DEFAULT_ANSI_COLORS[13]),S.ansi[14]=E(x.brightCyan,r.DEFAULT_ANSI_COLORS[14]),S.ansi[15]=E(x.brightWhite,r.DEFAULT_ANSI_COLORS[15]),x.extendedAnsi){const k=Math.min(S.ansi.length-16,x.extendedAnsi.length);for(let D=0;D<k;D++)S.ansi[D+16]=E(x.extendedAnsi[D],r.DEFAULT_ANSI_COLORS[D+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(x){this._restoreColor(x),this._onChangeColors.fire(this.colors)}_restoreColor(x){if(x!==void 0)switch(x){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[x]=this._restoreColors.ansi[x]}else for(let S=0;S<this._restoreColors.ansi.length;++S)this._colors.ansi[S]=this._restoreColors.ansi[S]}modifyColors(x){x(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function E(x,S){if(x!==void 0)try{return _.css.toColor(x)}catch{}return S}r.ThemeService=b=h([f(0,y.IOptionsService)],b)},6349:(v,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.CircularList=void 0;const h=n(8460),f=n(844);class a extends f.Disposable{constructor(m){super(),this._maxLength=m,this.onDeleteEmitter=this.register(new h.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new h.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new h.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(m){if(this._maxLength===m)return;const w=new Array(m);for(let y=0;y<Math.min(m,this.length);y++)w[y]=this._array[this._getCyclicIndex(y)];this._array=w,this._maxLength=m,this._startIndex=0}get length(){return this._length}set length(m){if(m>this._length)for(let w=this._length;w<m;w++)this._array[w]=void 0;this._length=m}get(m){return this._array[this._getCyclicIndex(m)]}set(m,w){this._array[this._getCyclicIndex(m)]=w}push(m){this._array[this._getCyclicIndex(this._length)]=m,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(m,w,...y){if(w){for(let o=m;o<this._length-w;o++)this._array[this._getCyclicIndex(o)]=this._array[this._getCyclicIndex(o+w)];this._length-=w,this.onDeleteEmitter.fire({index:m,amount:w})}for(let o=this._length-1;o>=m;o--)this._array[this._getCyclicIndex(o+y.length)]=this._array[this._getCyclicIndex(o)];for(let o=0;o<y.length;o++)this._array[this._getCyclicIndex(m+o)]=y[o];if(y.length&&this.onInsertEmitter.fire({index:m,amount:y.length}),this._length+y.length>this._maxLength){const o=this._length+y.length-this._maxLength;this._startIndex+=o,this._length=this._maxLength,this.onTrimEmitter.fire(o)}else this._length+=y.length}trimStart(m){m>this._length&&(m=this._length),this._startIndex+=m,this._length-=m,this.onTrimEmitter.fire(m)}shiftElements(m,w,y){if(!(w<=0)){if(m<0||m>=this._length)throw new Error("start argument out of range");if(m+y<0)throw new Error("Cannot shift elements in list beyond index 0");if(y>0){for(let u=w-1;u>=0;u--)this.set(m+u+y,this.get(m+u));const o=m+w+y-this._length;if(o>0)for(this._length+=o;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let o=0;o<w;o++)this.set(m+o+y,this.get(m+o))}}_getCyclicIndex(m){return(this._startIndex+m)%this._maxLength}}r.CircularList=a},1439:(v,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.clone=void 0,r.clone=function n(h,f=5){if(typeof h!="object")return h;const a=Array.isArray(h)?[]:{};for(const _ in h)a[_]=f<=1?h[_]:h[_]&&n(h[_],f-1);return a}},8055:(v,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.contrastRatio=r.toPaddedHex=r.rgba=r.rgb=r.css=r.color=r.channels=r.NULL_COLOR=void 0;const h=n(6114);let f=0,a=0,_=0,m=0;var w,y,o,u,l;function d(b){const E=b.toString(16);return E.length<2?"0"+E:E}function p(b,E){return b<E?(E+.05)/(b+.05):(b+.05)/(E+.05)}r.NULL_COLOR={css:"#00000000",rgba:0},(function(b){b.toCss=function(E,x,S,k){return k!==void 0?`#${d(E)}${d(x)}${d(S)}${d(k)}`:`#${d(E)}${d(x)}${d(S)}`},b.toRgba=function(E,x,S,k=255){return(E<<24|x<<16|S<<8|k)>>>0}})(w||(r.channels=w={})),(function(b){function E(x,S){return m=Math.round(255*S),[f,a,_]=l.toChannels(x.rgba),{css:w.toCss(f,a,_,m),rgba:w.toRgba(f,a,_,m)}}b.blend=function(x,S){if(m=(255&S.rgba)/255,m===1)return{css:S.css,rgba:S.rgba};const k=S.rgba>>24&255,D=S.rgba>>16&255,H=S.rgba>>8&255,T=x.rgba>>24&255,I=x.rgba>>16&255,V=x.rgba>>8&255;return f=T+Math.round((k-T)*m),a=I+Math.round((D-I)*m),_=V+Math.round((H-V)*m),{css:w.toCss(f,a,_),rgba:w.toRgba(f,a,_)}},b.isOpaque=function(x){return(255&x.rgba)==255},b.ensureContrastRatio=function(x,S,k){const D=l.ensureContrastRatio(x.rgba,S.rgba,k);if(D)return l.toColor(D>>24&255,D>>16&255,D>>8&255)},b.opaque=function(x){const S=(255|x.rgba)>>>0;return[f,a,_]=l.toChannels(S),{css:w.toCss(f,a,_),rgba:S}},b.opacity=E,b.multiplyOpacity=function(x,S){return m=255&x.rgba,E(x,m*S/255)},b.toColorRGB=function(x){return[x.rgba>>24&255,x.rgba>>16&255,x.rgba>>8&255]}})(y||(r.color=y={})),(function(b){let E,x;if(!h.isNode){const S=document.createElement("canvas");S.width=1,S.height=1;const k=S.getContext("2d",{willReadFrequently:!0});k&&(E=k,E.globalCompositeOperation="copy",x=E.createLinearGradient(0,0,1,1))}b.toColor=function(S){if(S.match(/#[\da-f]{3,8}/i))switch(S.length){case 4:return f=parseInt(S.slice(1,2).repeat(2),16),a=parseInt(S.slice(2,3).repeat(2),16),_=parseInt(S.slice(3,4).repeat(2),16),l.toColor(f,a,_);case 5:return f=parseInt(S.slice(1,2).repeat(2),16),a=parseInt(S.slice(2,3).repeat(2),16),_=parseInt(S.slice(3,4).repeat(2),16),m=parseInt(S.slice(4,5).repeat(2),16),l.toColor(f,a,_,m);case 7:return{css:S,rgba:(parseInt(S.slice(1),16)<<8|255)>>>0};case 9:return{css:S,rgba:parseInt(S.slice(1),16)>>>0}}const k=S.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(k)return f=parseInt(k[1]),a=parseInt(k[2]),_=parseInt(k[3]),m=Math.round(255*(k[5]===void 0?1:parseFloat(k[5]))),l.toColor(f,a,_,m);if(!E||!x)throw new Error("css.toColor: Unsupported css format");if(E.fillStyle=x,E.fillStyle=S,typeof E.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(E.fillRect(0,0,1,1),[f,a,_,m]=E.getImageData(0,0,1,1).data,m!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:w.toRgba(f,a,_,m),css:S}}})(o||(r.css=o={})),(function(b){function E(x,S,k){const D=x/255,H=S/255,T=k/255;return .2126*(D<=.03928?D/12.92:Math.pow((D+.055)/1.055,2.4))+.7152*(H<=.03928?H/12.92:Math.pow((H+.055)/1.055,2.4))+.0722*(T<=.03928?T/12.92:Math.pow((T+.055)/1.055,2.4))}b.relativeLuminance=function(x){return E(x>>16&255,x>>8&255,255&x)},b.relativeLuminance2=E})(u||(r.rgb=u={})),(function(b){function E(S,k,D){const H=S>>24&255,T=S>>16&255,I=S>>8&255;let V=k>>24&255,J=k>>16&255,X=k>>8&255,K=p(u.relativeLuminance2(V,J,X),u.relativeLuminance2(H,T,I));for(;K<D&&(V>0||J>0||X>0);)V-=Math.max(0,Math.ceil(.1*V)),J-=Math.max(0,Math.ceil(.1*J)),X-=Math.max(0,Math.ceil(.1*X)),K=p(u.relativeLuminance2(V,J,X),u.relativeLuminance2(H,T,I));return(V<<24|J<<16|X<<8|255)>>>0}function x(S,k,D){const H=S>>24&255,T=S>>16&255,I=S>>8&255;let V=k>>24&255,J=k>>16&255,X=k>>8&255,K=p(u.relativeLuminance2(V,J,X),u.relativeLuminance2(H,T,I));for(;K<D&&(V<255||J<255||X<255);)V=Math.min(255,V+Math.ceil(.1*(255-V))),J=Math.min(255,J+Math.ceil(.1*(255-J))),X=Math.min(255,X+Math.ceil(.1*(255-X))),K=p(u.relativeLuminance2(V,J,X),u.relativeLuminance2(H,T,I));return(V<<24|J<<16|X<<8|255)>>>0}b.ensureContrastRatio=function(S,k,D){const H=u.relativeLuminance(S>>8),T=u.relativeLuminance(k>>8);if(p(H,T)<D){if(T<H){const J=E(S,k,D),X=p(H,u.relativeLuminance(J>>8));if(X<D){const K=x(S,k,D);return X>p(H,u.relativeLuminance(K>>8))?J:K}return J}const I=x(S,k,D),V=p(H,u.relativeLuminance(I>>8));if(V<D){const J=E(S,k,D);return V>p(H,u.relativeLuminance(J>>8))?I:J}return I}},b.reduceLuminance=E,b.increaseLuminance=x,b.toChannels=function(S){return[S>>24&255,S>>16&255,S>>8&255,255&S]},b.toColor=function(S,k,D,H){return{css:w.toCss(S,k,D,H),rgba:w.toRgba(S,k,D,H)}}})(l||(r.rgba=l={})),r.toPaddedHex=d,r.contrastRatio=p},8969:(v,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.CoreTerminal=void 0;const h=n(844),f=n(2585),a=n(4348),_=n(7866),m=n(744),w=n(7302),y=n(6975),o=n(8460),u=n(1753),l=n(1480),d=n(7994),p=n(9282),b=n(5435),E=n(5981),x=n(2660);let S=!1;class k extends h.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new o.EventEmitter),this._onScroll.event((H=>{var T;(T=this._onScrollApi)===null||T===void 0||T.fire(H.position)}))),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(H){for(const T in H)this.optionsService.options[T]=H[T]}constructor(H){super(),this._windowsWrappingHeuristics=this.register(new h.MutableDisposable),this._onBinary=this.register(new o.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new o.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new o.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new o.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new o.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new o.EventEmitter),this._instantiationService=new a.InstantiationService,this.optionsService=this.register(new w.OptionsService(H)),this._instantiationService.setService(f.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(m.BufferService)),this._instantiationService.setService(f.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(_.LogService)),this._instantiationService.setService(f.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(y.CoreService)),this._instantiationService.setService(f.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(u.CoreMouseService)),this._instantiationService.setService(f.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(l.UnicodeService)),this._instantiationService.setService(f.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(d.CharsetService),this._instantiationService.setService(f.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(x.OscLinkService),this._instantiationService.setService(f.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new b.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,o.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,o.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,o.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,o.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom((()=>this.scrollToBottom()))),this.register(this.coreService.onUserInput((()=>this._writeBuffer.handleUserInput()))),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],(()=>this._handleWindowsPtyOptionChange()))),this.register(this._bufferService.onScroll((T=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)}))),this.register(this._inputHandler.onScroll((T=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)}))),this._writeBuffer=this.register(new E.WriteBuffer(((T,I)=>this._inputHandler.parse(T,I)))),this.register((0,o.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(H,T){this._writeBuffer.write(H,T)}writeSync(H,T){this._logService.logLevel<=f.LogLevelEnum.WARN&&!S&&(this._logService.warn("writeSync is unreliable and will be removed soon."),S=!0),this._writeBuffer.writeSync(H,T)}resize(H,T){isNaN(H)||isNaN(T)||(H=Math.max(H,m.MINIMUM_COLS),T=Math.max(T,m.MINIMUM_ROWS),this._bufferService.resize(H,T))}scroll(H,T=!1){this._bufferService.scroll(H,T)}scrollLines(H,T,I){this._bufferService.scrollLines(H,T,I)}scrollPages(H){this.scrollLines(H*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(H){const T=H-this._bufferService.buffer.ydisp;T!==0&&this.scrollLines(T)}registerEscHandler(H,T){return this._inputHandler.registerEscHandler(H,T)}registerDcsHandler(H,T){return this._inputHandler.registerDcsHandler(H,T)}registerCsiHandler(H,T){return this._inputHandler.registerCsiHandler(H,T)}registerOscHandler(H,T){return this._inputHandler.registerOscHandler(H,T)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let H=!1;const T=this.optionsService.rawOptions.windowsPty;T&&T.buildNumber!==void 0&&T.buildNumber!==void 0?H=T.backend==="conpty"&&T.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(H=!0),H?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const H=[];H.push(this.onLineFeed(p.updateWindowsModeWrappedState.bind(null,this._bufferService))),H.push(this.registerCsiHandler({final:"H"},(()=>((0,p.updateWindowsModeWrappedState)(this._bufferService),!1)))),this._windowsWrappingHeuristics.value=(0,h.toDisposable)((()=>{for(const T of H)T.dispose()}))}}}r.CoreTerminal=k},8460:(v,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.forwardEvent=r.EventEmitter=void 0,r.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=n=>(this._listeners.push(n),{dispose:()=>{if(!this._disposed){for(let h=0;h<this._listeners.length;h++)if(this._listeners[h]===n)return void this._listeners.splice(h,1)}}})),this._event}fire(n,h){const f=[];for(let a=0;a<this._listeners.length;a++)f.push(this._listeners[a]);for(let a=0;a<f.length;a++)f[a].call(void 0,n,h)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},r.forwardEvent=function(n,h){return n((f=>h.fire(f)))}},5435:function(v,r,n){var h=this&&this.__decorate||function(K,A,B,P){var F,Z=arguments.length,q=Z<3?A:P===null?P=Object.getOwnPropertyDescriptor(A,B):P;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")q=Reflect.decorate(K,A,B,P);else for(var W=K.length-1;W>=0;W--)(F=K[W])&&(q=(Z<3?F(q):Z>3?F(A,B,q):F(A,B))||q);return Z>3&&q&&Object.defineProperty(A,B,q),q},f=this&&this.__param||function(K,A){return function(B,P){A(B,P,K)}};Object.defineProperty(r,"__esModule",{value:!0}),r.InputHandler=r.WindowsOptionsReportType=void 0;const a=n(2584),_=n(7116),m=n(2015),w=n(844),y=n(482),o=n(8437),u=n(8460),l=n(643),d=n(511),p=n(3734),b=n(2585),E=n(6242),x=n(6351),S=n(5941),k={"(":0,")":1,"*":2,"+":3,"-":1,".":2},D=131072;function H(K,A){if(K>24)return A.setWinLines||!1;switch(K){case 1:return!!A.restoreWin;case 2:return!!A.minimizeWin;case 3:return!!A.setWinPosition;case 4:return!!A.setWinSizePixels;case 5:return!!A.raiseWin;case 6:return!!A.lowerWin;case 7:return!!A.refreshWin;case 8:return!!A.setWinSizeChars;case 9:return!!A.maximizeWin;case 10:return!!A.fullscreenWin;case 11:return!!A.getWinState;case 13:return!!A.getWinPosition;case 14:return!!A.getWinSizePixels;case 15:return!!A.getScreenSizePixels;case 16:return!!A.getCellSizePixels;case 18:return!!A.getWinSizeChars;case 19:return!!A.getScreenSizeChars;case 20:return!!A.getIconTitle;case 21:return!!A.getWinTitle;case 22:return!!A.pushTitle;case 23:return!!A.popTitle;case 24:return!!A.setWinLines}return!1}var T;(function(K){K[K.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",K[K.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(T||(r.WindowsOptionsReportType=T={}));let I=0;class V extends w.Disposable{getAttrData(){return this._curAttrData}constructor(A,B,P,F,Z,q,W,z,ue=new m.EscapeSequenceParser){super(),this._bufferService=A,this._charsetService=B,this._coreService=P,this._logService=F,this._optionsService=Z,this._oscLinkService=q,this._coreMouseService=W,this._unicodeService=z,this._parser=ue,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new y.StringToUtf32,this._utf8Decoder=new y.Utf8ToUtf32,this._workCell=new d.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=o.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=o.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new u.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new u.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new u.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new u.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new u.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new u.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new u.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new u.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new u.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new u.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new u.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new u.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new u.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new J(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate((C=>this._activeBuffer=C.activeBuffer))),this._parser.setCsiHandlerFallback(((C,M)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(C),params:M.toArray()})})),this._parser.setEscHandlerFallback((C=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(C)})})),this._parser.setExecuteHandlerFallback((C=>{this._logService.debug("Unknown EXECUTE code: ",{code:C})})),this._parser.setOscHandlerFallback(((C,M,$)=>{this._logService.debug("Unknown OSC code: ",{identifier:C,action:M,data:$})})),this._parser.setDcsHandlerFallback(((C,M,$)=>{M==="HOOK"&&($=$.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(C),action:M,payload:$})})),this._parser.setPrintHandler(((C,M,$)=>this.print(C,M,$))),this._parser.registerCsiHandler({final:"@"},(C=>this.insertChars(C))),this._parser.registerCsiHandler({intermediates:" ",final:"@"},(C=>this.scrollLeft(C))),this._parser.registerCsiHandler({final:"A"},(C=>this.cursorUp(C))),this._parser.registerCsiHandler({intermediates:" ",final:"A"},(C=>this.scrollRight(C))),this._parser.registerCsiHandler({final:"B"},(C=>this.cursorDown(C))),this._parser.registerCsiHandler({final:"C"},(C=>this.cursorForward(C))),this._parser.registerCsiHandler({final:"D"},(C=>this.cursorBackward(C))),this._parser.registerCsiHandler({final:"E"},(C=>this.cursorNextLine(C))),this._parser.registerCsiHandler({final:"F"},(C=>this.cursorPrecedingLine(C))),this._parser.registerCsiHandler({final:"G"},(C=>this.cursorCharAbsolute(C))),this._parser.registerCsiHandler({final:"H"},(C=>this.cursorPosition(C))),this._parser.registerCsiHandler({final:"I"},(C=>this.cursorForwardTab(C))),this._parser.registerCsiHandler({final:"J"},(C=>this.eraseInDisplay(C,!1))),this._parser.registerCsiHandler({prefix:"?",final:"J"},(C=>this.eraseInDisplay(C,!0))),this._parser.registerCsiHandler({final:"K"},(C=>this.eraseInLine(C,!1))),this._parser.registerCsiHandler({prefix:"?",final:"K"},(C=>this.eraseInLine(C,!0))),this._parser.registerCsiHandler({final:"L"},(C=>this.insertLines(C))),this._parser.registerCsiHandler({final:"M"},(C=>this.deleteLines(C))),this._parser.registerCsiHandler({final:"P"},(C=>this.deleteChars(C))),this._parser.registerCsiHandler({final:"S"},(C=>this.scrollUp(C))),this._parser.registerCsiHandler({final:"T"},(C=>this.scrollDown(C))),this._parser.registerCsiHandler({final:"X"},(C=>this.eraseChars(C))),this._parser.registerCsiHandler({final:"Z"},(C=>this.cursorBackwardTab(C))),this._parser.registerCsiHandler({final:"`"},(C=>this.charPosAbsolute(C))),this._parser.registerCsiHandler({final:"a"},(C=>this.hPositionRelative(C))),this._parser.registerCsiHandler({final:"b"},(C=>this.repeatPrecedingCharacter(C))),this._parser.registerCsiHandler({final:"c"},(C=>this.sendDeviceAttributesPrimary(C))),this._parser.registerCsiHandler({prefix:">",final:"c"},(C=>this.sendDeviceAttributesSecondary(C))),this._parser.registerCsiHandler({final:"d"},(C=>this.linePosAbsolute(C))),this._parser.registerCsiHandler({final:"e"},(C=>this.vPositionRelative(C))),this._parser.registerCsiHandler({final:"f"},(C=>this.hVPosition(C))),this._parser.registerCsiHandler({final:"g"},(C=>this.tabClear(C))),this._parser.registerCsiHandler({final:"h"},(C=>this.setMode(C))),this._parser.registerCsiHandler({prefix:"?",final:"h"},(C=>this.setModePrivate(C))),this._parser.registerCsiHandler({final:"l"},(C=>this.resetMode(C))),this._parser.registerCsiHandler({prefix:"?",final:"l"},(C=>this.resetModePrivate(C))),this._parser.registerCsiHandler({final:"m"},(C=>this.charAttributes(C))),this._parser.registerCsiHandler({final:"n"},(C=>this.deviceStatus(C))),this._parser.registerCsiHandler({prefix:"?",final:"n"},(C=>this.deviceStatusPrivate(C))),this._parser.registerCsiHandler({intermediates:"!",final:"p"},(C=>this.softReset(C))),this._parser.registerCsiHandler({intermediates:" ",final:"q"},(C=>this.setCursorStyle(C))),this._parser.registerCsiHandler({final:"r"},(C=>this.setScrollRegion(C))),this._parser.registerCsiHandler({final:"s"},(C=>this.saveCursor(C))),this._parser.registerCsiHandler({final:"t"},(C=>this.windowOptions(C))),this._parser.registerCsiHandler({final:"u"},(C=>this.restoreCursor(C))),this._parser.registerCsiHandler({intermediates:"'",final:"}"},(C=>this.insertColumns(C))),this._parser.registerCsiHandler({intermediates:"'",final:"~"},(C=>this.deleteColumns(C))),this._parser.registerCsiHandler({intermediates:'"',final:"q"},(C=>this.selectProtected(C))),this._parser.registerCsiHandler({intermediates:"$",final:"p"},(C=>this.requestMode(C,!0))),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},(C=>this.requestMode(C,!1))),this._parser.setExecuteHandler(a.C0.BEL,(()=>this.bell())),this._parser.setExecuteHandler(a.C0.LF,(()=>this.lineFeed())),this._parser.setExecuteHandler(a.C0.VT,(()=>this.lineFeed())),this._parser.setExecuteHandler(a.C0.FF,(()=>this.lineFeed())),this._parser.setExecuteHandler(a.C0.CR,(()=>this.carriageReturn())),this._parser.setExecuteHandler(a.C0.BS,(()=>this.backspace())),this._parser.setExecuteHandler(a.C0.HT,(()=>this.tab())),this._parser.setExecuteHandler(a.C0.SO,(()=>this.shiftOut())),this._parser.setExecuteHandler(a.C0.SI,(()=>this.shiftIn())),this._parser.setExecuteHandler(a.C1.IND,(()=>this.index())),this._parser.setExecuteHandler(a.C1.NEL,(()=>this.nextLine())),this._parser.setExecuteHandler(a.C1.HTS,(()=>this.tabSet())),this._parser.registerOscHandler(0,new E.OscHandler((C=>(this.setTitle(C),this.setIconName(C),!0)))),this._parser.registerOscHandler(1,new E.OscHandler((C=>this.setIconName(C)))),this._parser.registerOscHandler(2,new E.OscHandler((C=>this.setTitle(C)))),this._parser.registerOscHandler(4,new E.OscHandler((C=>this.setOrReportIndexedColor(C)))),this._parser.registerOscHandler(8,new E.OscHandler((C=>this.setHyperlink(C)))),this._parser.registerOscHandler(10,new E.OscHandler((C=>this.setOrReportFgColor(C)))),this._parser.registerOscHandler(11,new E.OscHandler((C=>this.setOrReportBgColor(C)))),this._parser.registerOscHandler(12,new E.OscHandler((C=>this.setOrReportCursorColor(C)))),this._parser.registerOscHandler(104,new E.OscHandler((C=>this.restoreIndexedColor(C)))),this._parser.registerOscHandler(110,new E.OscHandler((C=>this.restoreFgColor(C)))),this._parser.registerOscHandler(111,new E.OscHandler((C=>this.restoreBgColor(C)))),this._parser.registerOscHandler(112,new E.OscHandler((C=>this.restoreCursorColor(C)))),this._parser.registerEscHandler({final:"7"},(()=>this.saveCursor())),this._parser.registerEscHandler({final:"8"},(()=>this.restoreCursor())),this._parser.registerEscHandler({final:"D"},(()=>this.index())),this._parser.registerEscHandler({final:"E"},(()=>this.nextLine())),this._parser.registerEscHandler({final:"H"},(()=>this.tabSet())),this._parser.registerEscHandler({final:"M"},(()=>this.reverseIndex())),this._parser.registerEscHandler({final:"="},(()=>this.keypadApplicationMode())),this._parser.registerEscHandler({final:">"},(()=>this.keypadNumericMode())),this._parser.registerEscHandler({final:"c"},(()=>this.fullReset())),this._parser.registerEscHandler({final:"n"},(()=>this.setgLevel(2))),this._parser.registerEscHandler({final:"o"},(()=>this.setgLevel(3))),this._parser.registerEscHandler({final:"|"},(()=>this.setgLevel(3))),this._parser.registerEscHandler({final:"}"},(()=>this.setgLevel(2))),this._parser.registerEscHandler({final:"~"},(()=>this.setgLevel(1))),this._parser.registerEscHandler({intermediates:"%",final:"@"},(()=>this.selectDefaultCharset())),this._parser.registerEscHandler({intermediates:"%",final:"G"},(()=>this.selectDefaultCharset()));for(const C in _.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:C},(()=>this.selectCharset("("+C))),this._parser.registerEscHandler({intermediates:")",final:C},(()=>this.selectCharset(")"+C))),this._parser.registerEscHandler({intermediates:"*",final:C},(()=>this.selectCharset("*"+C))),this._parser.registerEscHandler({intermediates:"+",final:C},(()=>this.selectCharset("+"+C))),this._parser.registerEscHandler({intermediates:"-",final:C},(()=>this.selectCharset("-"+C))),this._parser.registerEscHandler({intermediates:".",final:C},(()=>this.selectCharset("."+C))),this._parser.registerEscHandler({intermediates:"/",final:C},(()=>this.selectCharset("/"+C)));this._parser.registerEscHandler({intermediates:"#",final:"8"},(()=>this.screenAlignmentPattern())),this._parser.setErrorHandler((C=>(this._logService.error("Parsing error: ",C),C))),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new x.DcsHandler(((C,M)=>this.requestStatusString(C,M))))}_preserveStack(A,B,P,F){this._parseStack.paused=!0,this._parseStack.cursorStartX=A,this._parseStack.cursorStartY=B,this._parseStack.decodedLength=P,this._parseStack.position=F}_logSlowResolvingAsync(A){this._logService.logLevel<=b.LogLevelEnum.WARN&&Promise.race([A,new Promise(((B,P)=>setTimeout((()=>P("#SLOW_TIMEOUT")),5e3)))]).catch((B=>{if(B!=="#SLOW_TIMEOUT")throw B;console.warn("async parser handler taking longer than 5000 ms")}))}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(A,B){let P,F=this._activeBuffer.x,Z=this._activeBuffer.y,q=0;const W=this._parseStack.paused;if(W){if(P=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,B))return this._logSlowResolvingAsync(P),P;F=this._parseStack.cursorStartX,Z=this._parseStack.cursorStartY,this._parseStack.paused=!1,A.length>D&&(q=this._parseStack.position+D)}if(this._logService.logLevel<=b.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof A=="string"?` "${A}"`:` "${Array.prototype.map.call(A,(z=>String.fromCharCode(z))).join("")}"`),typeof A=="string"?A.split("").map((z=>z.charCodeAt(0))):A),this._parseBuffer.length<A.length&&this._parseBuffer.length<D&&(this._parseBuffer=new Uint32Array(Math.min(A.length,D))),W||this._dirtyRowTracker.clearRange(),A.length>D)for(let z=q;z<A.length;z+=D){const ue=z+D<A.length?z+D:A.length,C=typeof A=="string"?this._stringDecoder.decode(A.substring(z,ue),this._parseBuffer):this._utf8Decoder.decode(A.subarray(z,ue),this._parseBuffer);if(P=this._parser.parse(this._parseBuffer,C))return this._preserveStack(F,Z,C,z),this._logSlowResolvingAsync(P),P}else if(!W){const z=typeof A=="string"?this._stringDecoder.decode(A,this._parseBuffer):this._utf8Decoder.decode(A,this._parseBuffer);if(P=this._parser.parse(this._parseBuffer,z))return this._preserveStack(F,Z,z,0),this._logSlowResolvingAsync(P),P}this._activeBuffer.x===F&&this._activeBuffer.y===Z||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowTracker.start,this._dirtyRowTracker.end)}print(A,B,P){let F,Z;const q=this._charsetService.charset,W=this._optionsService.rawOptions.screenReaderMode,z=this._bufferService.cols,ue=this._coreService.decPrivateModes.wraparound,C=this._coreService.modes.insertMode,M=this._curAttrData;let $=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&P-B>0&&$.getWidth(this._activeBuffer.x-1)===2&&$.setCellFromCodePoint(this._activeBuffer.x-1,0,1,M.fg,M.bg,M.extended);for(let U=B;U<P;++U){if(F=A[U],Z=this._unicodeService.wcwidth(F),F<127&&q){const re=q[String.fromCharCode(F)];re&&(F=re.charCodeAt(0))}if(W&&this._onA11yChar.fire((0,y.stringFromCodePoint)(F)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),Z||!this._activeBuffer.x){if(this._activeBuffer.x+Z-1>=z){if(ue){for(;this._activeBuffer.x<z;)$.setCellFromCodePoint(this._activeBuffer.x++,0,1,M.fg,M.bg,M.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),$=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=z-1,Z===2)continue}if(C&&($.insertCells(this._activeBuffer.x,Z,this._activeBuffer.getNullCell(M),M),$.getWidth(z-1)===2&&$.setCellFromCodePoint(z-1,l.NULL_CELL_CODE,l.NULL_CELL_WIDTH,M.fg,M.bg,M.extended)),$.setCellFromCodePoint(this._activeBuffer.x++,F,Z,M.fg,M.bg,M.extended),Z>0)for(;--Z;)$.setCellFromCodePoint(this._activeBuffer.x++,0,0,M.fg,M.bg,M.extended)}else $.getWidth(this._activeBuffer.x-1)?$.addCodepointToCell(this._activeBuffer.x-1,F):$.addCodepointToCell(this._activeBuffer.x-2,F)}P-B>0&&($.loadCell(this._activeBuffer.x-1,this._workCell),this._workCell.getWidth()===2||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),this._activeBuffer.x<z&&P-B>0&&$.getWidth(this._activeBuffer.x)===0&&!$.hasContent(this._activeBuffer.x)&&$.setCellFromCodePoint(this._activeBuffer.x,0,1,M.fg,M.bg,M.extended),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(A,B){return A.final!=="t"||A.prefix||A.intermediates?this._parser.registerCsiHandler(A,B):this._parser.registerCsiHandler(A,(P=>!H(P.params[0],this._optionsService.rawOptions.windowOptions)||B(P)))}registerDcsHandler(A,B){return this._parser.registerDcsHandler(A,new x.DcsHandler(B))}registerEscHandler(A,B){return this._parser.registerEscHandler(A,B)}registerOscHandler(A,B){return this._parser.registerOscHandler(A,new E.OscHandler(B))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var A;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&(!((A=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))===null||A===void 0)&&A.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const B=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);B.hasWidth(this._activeBuffer.x)&&!B.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const A=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-A),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(A=this._bufferService.cols-1){this._activeBuffer.x=Math.min(A,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(A,B){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=A,this._activeBuffer.y=this._activeBuffer.scrollTop+B):(this._activeBuffer.x=A,this._activeBuffer.y=B),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(A,B){this._restrictCursor(),this._setCursor(this._activeBuffer.x+A,this._activeBuffer.y+B)}cursorUp(A){const B=this._activeBuffer.y-this._activeBuffer.scrollTop;return B>=0?this._moveCursor(0,-Math.min(B,A.params[0]||1)):this._moveCursor(0,-(A.params[0]||1)),!0}cursorDown(A){const B=this._activeBuffer.scrollBottom-this._activeBuffer.y;return B>=0?this._moveCursor(0,Math.min(B,A.params[0]||1)):this._moveCursor(0,A.params[0]||1),!0}cursorForward(A){return this._moveCursor(A.params[0]||1,0),!0}cursorBackward(A){return this._moveCursor(-(A.params[0]||1),0),!0}cursorNextLine(A){return this.cursorDown(A),this._activeBuffer.x=0,!0}cursorPrecedingLine(A){return this.cursorUp(A),this._activeBuffer.x=0,!0}cursorCharAbsolute(A){return this._setCursor((A.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(A){return this._setCursor(A.length>=2?(A.params[1]||1)-1:0,(A.params[0]||1)-1),!0}charPosAbsolute(A){return this._setCursor((A.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(A){return this._moveCursor(A.params[0]||1,0),!0}linePosAbsolute(A){return this._setCursor(this._activeBuffer.x,(A.params[0]||1)-1),!0}vPositionRelative(A){return this._moveCursor(0,A.params[0]||1),!0}hVPosition(A){return this.cursorPosition(A),!0}tabClear(A){const B=A.params[0];return B===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:B===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(A){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let B=A.params[0]||1;for(;B--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(A){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let B=A.params[0]||1;for(;B--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(A){const B=A.params[0];return B===1&&(this._curAttrData.bg|=536870912),B!==2&&B!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(A,B,P,F=!1,Z=!1){const q=this._activeBuffer.lines.get(this._activeBuffer.ybase+A);q.replaceCells(B,P,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData(),Z),F&&(q.isWrapped=!1)}_resetBufferLine(A,B=!1){const P=this._activeBuffer.lines.get(this._activeBuffer.ybase+A);P&&(P.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),B),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+A),P.isWrapped=!1)}eraseInDisplay(A,B=!1){let P;switch(this._restrictCursor(this._bufferService.cols),A.params[0]){case 0:for(P=this._activeBuffer.y,this._dirtyRowTracker.markDirty(P),this._eraseInBufferLine(P++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,B);P<this._bufferService.rows;P++)this._resetBufferLine(P,B);this._dirtyRowTracker.markDirty(P);break;case 1:for(P=this._activeBuffer.y,this._dirtyRowTracker.markDirty(P),this._eraseInBufferLine(P,0,this._activeBuffer.x+1,!0,B),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(P+1).isWrapped=!1);P--;)this._resetBufferLine(P,B);this._dirtyRowTracker.markDirty(0);break;case 2:for(P=this._bufferService.rows,this._dirtyRowTracker.markDirty(P-1);P--;)this._resetBufferLine(P,B);this._dirtyRowTracker.markDirty(0);break;case 3:const F=this._activeBuffer.lines.length-this._bufferService.rows;F>0&&(this._activeBuffer.lines.trimStart(F),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-F,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-F,0),this._onScroll.fire(0))}return!0}eraseInLine(A,B=!1){switch(this._restrictCursor(this._bufferService.cols),A.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,B);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,B);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,B)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(A){this._restrictCursor();let B=A.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const P=this._activeBuffer.ybase+this._activeBuffer.y,F=this._bufferService.rows-1-this._activeBuffer.scrollBottom,Z=this._bufferService.rows-1+this._activeBuffer.ybase-F+1;for(;B--;)this._activeBuffer.lines.splice(Z-1,1),this._activeBuffer.lines.splice(P,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(A){this._restrictCursor();let B=A.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const P=this._activeBuffer.ybase+this._activeBuffer.y;let F;for(F=this._bufferService.rows-1-this._activeBuffer.scrollBottom,F=this._bufferService.rows-1+this._activeBuffer.ybase-F;B--;)this._activeBuffer.lines.splice(P,1),this._activeBuffer.lines.splice(F,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(A){this._restrictCursor();const B=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return B&&(B.insertCells(this._activeBuffer.x,A.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(A){this._restrictCursor();const B=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return B&&(B.deleteCells(this._activeBuffer.x,A.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(A){let B=A.params[0]||1;for(;B--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(A){let B=A.params[0]||1;for(;B--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(o.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(A){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const B=A.params[0]||1;for(let P=this._activeBuffer.scrollTop;P<=this._activeBuffer.scrollBottom;++P){const F=this._activeBuffer.lines.get(this._activeBuffer.ybase+P);F.deleteCells(0,B,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),F.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(A){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const B=A.params[0]||1;for(let P=this._activeBuffer.scrollTop;P<=this._activeBuffer.scrollBottom;++P){const F=this._activeBuffer.lines.get(this._activeBuffer.ybase+P);F.insertCells(0,B,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),F.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(A){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const B=A.params[0]||1;for(let P=this._activeBuffer.scrollTop;P<=this._activeBuffer.scrollBottom;++P){const F=this._activeBuffer.lines.get(this._activeBuffer.ybase+P);F.insertCells(this._activeBuffer.x,B,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),F.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(A){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const B=A.params[0]||1;for(let P=this._activeBuffer.scrollTop;P<=this._activeBuffer.scrollBottom;++P){const F=this._activeBuffer.lines.get(this._activeBuffer.ybase+P);F.deleteCells(this._activeBuffer.x,B,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),F.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(A){this._restrictCursor();const B=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return B&&(B.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(A.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(A){if(!this._parser.precedingCodepoint)return!0;const B=A.params[0]||1,P=new Uint32Array(B);for(let F=0;F<B;++F)P[F]=this._parser.precedingCodepoint;return this.print(P,0,P.length),!0}sendDeviceAttributesPrimary(A){return A.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(a.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(a.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(A){return A.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(a.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(a.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(A.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(a.C0.ESC+"[>83;40003;0c")),!0}_is(A){return(this._optionsService.rawOptions.termName+"").indexOf(A)===0}setMode(A){for(let B=0;B<A.length;B++)switch(A.params[B]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(A){for(let B=0;B<A.length;B++)switch(A.params[B]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,_.DEFAULT_CHARSET),this._charsetService.setgCharset(1,_.DEFAULT_CHARSET),this._charsetService.setgCharset(2,_.DEFAULT_CHARSET),this._charsetService.setgCharset(3,_.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(A){for(let B=0;B<A.length;B++)switch(A.params[B]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(A){for(let B=0;B<A.length;B++)switch(A.params[B]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),A.params[B]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(A,B){const P=this._coreService.decPrivateModes,{activeProtocol:F,activeEncoding:Z}=this._coreMouseService,q=this._coreService,{buffers:W,cols:z}=this._bufferService,{active:ue,alt:C}=W,M=this._optionsService.rawOptions,$=O=>O?1:2,U=A.params[0];return re=U,L=B?U===2?4:U===4?$(q.modes.insertMode):U===12?3:U===20?$(M.convertEol):0:U===1?$(P.applicationCursorKeys):U===3?M.windowOptions.setWinLines?z===80?2:z===132?1:0:0:U===6?$(P.origin):U===7?$(P.wraparound):U===8?3:U===9?$(F==="X10"):U===12?$(M.cursorBlink):U===25?$(!q.isCursorHidden):U===45?$(P.reverseWraparound):U===66?$(P.applicationKeypad):U===67?4:U===1e3?$(F==="VT200"):U===1002?$(F==="DRAG"):U===1003?$(F==="ANY"):U===1004?$(P.sendFocus):U===1005?4:U===1006?$(Z==="SGR"):U===1015?4:U===1016?$(Z==="SGR_PIXELS"):U===1048?1:U===47||U===1047||U===1049?$(ue===C):U===2004?$(P.bracketedPasteMode):0,q.triggerDataEvent(`${a.C0.ESC}[${B?"":"?"}${re};${L}$y`),!0;var re,L}_updateAttrColor(A,B,P,F,Z){return B===2?(A|=50331648,A&=-16777216,A|=p.AttributeData.fromColorRGB([P,F,Z])):B===5&&(A&=-50331904,A|=33554432|255&P),A}_extractColor(A,B,P){const F=[0,0,-1,0,0,0];let Z=0,q=0;do{if(F[q+Z]=A.params[B+q],A.hasSubParams(B+q)){const W=A.getSubParams(B+q);let z=0;do F[1]===5&&(Z=1),F[q+z+1+Z]=W[z];while(++z<W.length&&z+q+1+Z<F.length);break}if(F[1]===5&&q+Z>=2||F[1]===2&&q+Z>=5)break;F[1]&&(Z=1)}while(++q+B<A.length&&q+Z<F.length);for(let W=2;W<F.length;++W)F[W]===-1&&(F[W]=0);switch(F[0]){case 38:P.fg=this._updateAttrColor(P.fg,F[1],F[3],F[4],F[5]);break;case 48:P.bg=this._updateAttrColor(P.bg,F[1],F[3],F[4],F[5]);break;case 58:P.extended=P.extended.clone(),P.extended.underlineColor=this._updateAttrColor(P.extended.underlineColor,F[1],F[3],F[4],F[5])}return q}_processUnderline(A,B){B.extended=B.extended.clone(),(!~A||A>5)&&(A=1),B.extended.underlineStyle=A,B.fg|=268435456,A===0&&(B.fg&=-268435457),B.updateExtended()}_processSGR0(A){A.fg=o.DEFAULT_ATTR_DATA.fg,A.bg=o.DEFAULT_ATTR_DATA.bg,A.extended=A.extended.clone(),A.extended.underlineStyle=0,A.extended.underlineColor&=-67108864,A.updateExtended()}charAttributes(A){if(A.length===1&&A.params[0]===0)return this._processSGR0(this._curAttrData),!0;const B=A.length;let P;const F=this._curAttrData;for(let Z=0;Z<B;Z++)P=A.params[Z],P>=30&&P<=37?(F.fg&=-50331904,F.fg|=16777216|P-30):P>=40&&P<=47?(F.bg&=-50331904,F.bg|=16777216|P-40):P>=90&&P<=97?(F.fg&=-50331904,F.fg|=16777224|P-90):P>=100&&P<=107?(F.bg&=-50331904,F.bg|=16777224|P-100):P===0?this._processSGR0(F):P===1?F.fg|=134217728:P===3?F.bg|=67108864:P===4?(F.fg|=268435456,this._processUnderline(A.hasSubParams(Z)?A.getSubParams(Z)[0]:1,F)):P===5?F.fg|=536870912:P===7?F.fg|=67108864:P===8?F.fg|=1073741824:P===9?F.fg|=2147483648:P===2?F.bg|=134217728:P===21?this._processUnderline(2,F):P===22?(F.fg&=-134217729,F.bg&=-134217729):P===23?F.bg&=-67108865:P===24?(F.fg&=-268435457,this._processUnderline(0,F)):P===25?F.fg&=-536870913:P===27?F.fg&=-67108865:P===28?F.fg&=-1073741825:P===29?F.fg&=2147483647:P===39?(F.fg&=-67108864,F.fg|=16777215&o.DEFAULT_ATTR_DATA.fg):P===49?(F.bg&=-67108864,F.bg|=16777215&o.DEFAULT_ATTR_DATA.bg):P===38||P===48||P===58?Z+=this._extractColor(A,Z,F):P===53?F.bg|=1073741824:P===55?F.bg&=-1073741825:P===59?(F.extended=F.extended.clone(),F.extended.underlineColor=-1,F.updateExtended()):P===100?(F.fg&=-67108864,F.fg|=16777215&o.DEFAULT_ATTR_DATA.fg,F.bg&=-67108864,F.bg|=16777215&o.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",P);return!0}deviceStatus(A){switch(A.params[0]){case 5:this._coreService.triggerDataEvent(`${a.C0.ESC}[0n`);break;case 6:const B=this._activeBuffer.y+1,P=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${a.C0.ESC}[${B};${P}R`)}return!0}deviceStatusPrivate(A){if(A.params[0]===6){const B=this._activeBuffer.y+1,P=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${a.C0.ESC}[?${B};${P}R`)}return!0}softReset(A){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=o.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(A){const B=A.params[0]||1;switch(B){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const P=B%2==1;return this._optionsService.options.cursorBlink=P,!0}setScrollRegion(A){const B=A.params[0]||1;let P;return(A.length<2||(P=A.params[1])>this._bufferService.rows||P===0)&&(P=this._bufferService.rows),P>B&&(this._activeBuffer.scrollTop=B-1,this._activeBuffer.scrollBottom=P-1,this._setCursor(0,0)),!0}windowOptions(A){if(!H(A.params[0],this._optionsService.rawOptions.windowOptions))return!0;const B=A.length>1?A.params[1]:0;switch(A.params[0]){case 14:B!==2&&this._onRequestWindowsOptionsReport.fire(T.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(T.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${a.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:B!==0&&B!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),B!==0&&B!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:B!==0&&B!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),B!==0&&B!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(A){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(A){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(A){return this._windowTitle=A,this._onTitleChange.fire(A),!0}setIconName(A){return this._iconName=A,!0}setOrReportIndexedColor(A){const B=[],P=A.split(";");for(;P.length>1;){const F=P.shift(),Z=P.shift();if(/^\d+$/.exec(F)){const q=parseInt(F);if(X(q))if(Z==="?")B.push({type:0,index:q});else{const W=(0,S.parseColor)(Z);W&&B.push({type:1,index:q,color:W})}}}return B.length&&this._onColor.fire(B),!0}setHyperlink(A){const B=A.split(";");return!(B.length<2)&&(B[1]?this._createHyperlink(B[0],B[1]):!B[0]&&this._finishHyperlink())}_createHyperlink(A,B){this._getCurrentLinkId()&&this._finishHyperlink();const P=A.split(":");let F;const Z=P.findIndex((q=>q.startsWith("id=")));return Z!==-1&&(F=P[Z].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:F,uri:B}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(A,B){const P=A.split(";");for(let F=0;F<P.length&&!(B>=this._specialColors.length);++F,++B)if(P[F]==="?")this._onColor.fire([{type:0,index:this._specialColors[B]}]);else{const Z=(0,S.parseColor)(P[F]);Z&&this._onColor.fire([{type:1,index:this._specialColors[B],color:Z}])}return!0}setOrReportFgColor(A){return this._setOrReportSpecialColor(A,0)}setOrReportBgColor(A){return this._setOrReportSpecialColor(A,1)}setOrReportCursorColor(A){return this._setOrReportSpecialColor(A,2)}restoreIndexedColor(A){if(!A)return this._onColor.fire([{type:2}]),!0;const B=[],P=A.split(";");for(let F=0;F<P.length;++F)if(/^\d+$/.exec(P[F])){const Z=parseInt(P[F]);X(Z)&&B.push({type:2,index:Z})}return B.length&&this._onColor.fire(B),!0}restoreFgColor(A){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(A){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(A){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,_.DEFAULT_CHARSET),!0}selectCharset(A){return A.length!==2?(this.selectDefaultCharset(),!0):(A[0]==="/"||this._charsetService.setgCharset(k[A[0]],_.CHARSETS[A[1]]||_.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const A=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,A,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=o.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=o.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(A){return this._charsetService.setgLevel(A),!0}screenAlignmentPattern(){const A=new d.CellData;A.content=4194373,A.fg=this._curAttrData.fg,A.bg=this._curAttrData.bg,this._setCursor(0,0);for(let B=0;B<this._bufferService.rows;++B){const P=this._activeBuffer.ybase+this._activeBuffer.y+B,F=this._activeBuffer.lines.get(P);F&&(F.fill(A),F.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(A,B){const P=this._bufferService.buffer,F=this._optionsService.rawOptions;return(Z=>(this._coreService.triggerDataEvent(`${a.C0.ESC}${Z}${a.C0.ESC}\\`),!0))(A==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:A==='"p'?'P1$r61;1"p':A==="r"?`P1$r${P.scrollTop+1};${P.scrollBottom+1}r`:A==="m"?"P1$r0m":A===" q"?`P1$r${{block:2,underline:4,bar:6}[F.cursorStyle]-(F.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(A,B){this._dirtyRowTracker.markRangeDirty(A,B)}}r.InputHandler=V;let J=class{constructor(K){this._bufferService=K,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(K){K<this.start?this.start=K:K>this.end&&(this.end=K)}markRangeDirty(K,A){K>A&&(I=K,K=A,A=I),K<this.start&&(this.start=K),A>this.end&&(this.end=A)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function X(K){return 0<=K&&K<256}J=h([f(0,b.IBufferService)],J)},844:(v,r)=>{function n(h){for(const f of h)f.dispose();h.length=0}Object.defineProperty(r,"__esModule",{value:!0}),r.getDisposeArrayDisposable=r.disposeArray=r.toDisposable=r.MutableDisposable=r.Disposable=void 0,r.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const h of this._disposables)h.dispose();this._disposables.length=0}register(h){return this._disposables.push(h),h}unregister(h){const f=this._disposables.indexOf(h);f!==-1&&this._disposables.splice(f,1)}},r.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(h){var f;this._isDisposed||h===this._value||((f=this._value)===null||f===void 0||f.dispose(),this._value=h)}clear(){this.value=void 0}dispose(){var h;this._isDisposed=!0,(h=this._value)===null||h===void 0||h.dispose(),this._value=void 0}},r.toDisposable=function(h){return{dispose:h}},r.disposeArray=n,r.getDisposeArrayDisposable=function(h){return{dispose:()=>n(h)}}},1505:(v,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.FourKeyMap=r.TwoKeyMap=void 0;class n{constructor(){this._data={}}set(f,a,_){this._data[f]||(this._data[f]={}),this._data[f][a]=_}get(f,a){return this._data[f]?this._data[f][a]:void 0}clear(){this._data={}}}r.TwoKeyMap=n,r.FourKeyMap=class{constructor(){this._data=new n}set(h,f,a,_,m){this._data.get(h,f)||this._data.set(h,f,new n),this._data.get(h,f).set(a,_,m)}get(h,f,a,_){var m;return(m=this._data.get(h,f))===null||m===void 0?void 0:m.get(a,_)}clear(){this._data.clear()}}},6114:(v,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.isChromeOS=r.isLinux=r.isWindows=r.isIphone=r.isIpad=r.isMac=r.getSafariVersion=r.isSafari=r.isLegacyEdge=r.isFirefox=r.isNode=void 0,r.isNode=typeof navigator>"u";const n=r.isNode?"node":navigator.userAgent,h=r.isNode?"node":navigator.platform;r.isFirefox=n.includes("Firefox"),r.isLegacyEdge=n.includes("Edge"),r.isSafari=/^((?!chrome|android).)*safari/i.test(n),r.getSafariVersion=function(){if(!r.isSafari)return 0;const f=n.match(/Version\/(\d+)/);return f===null||f.length<2?0:parseInt(f[1])},r.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(h),r.isIpad=h==="iPad",r.isIphone=h==="iPhone",r.isWindows=["Windows","Win16","Win32","WinCE"].includes(h),r.isLinux=h.indexOf("Linux")>=0,r.isChromeOS=/\bCrOS\b/.test(n)},6106:(v,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.SortedList=void 0;let n=0;r.SortedList=class{constructor(h){this._getKey=h,this._array=[]}clear(){this._array.length=0}insert(h){this._array.length!==0?(n=this._search(this._getKey(h)),this._array.splice(n,0,h)):this._array.push(h)}delete(h){if(this._array.length===0)return!1;const f=this._getKey(h);if(f===void 0||(n=this._search(f),n===-1)||this._getKey(this._array[n])!==f)return!1;do if(this._array[n]===h)return this._array.splice(n,1),!0;while(++n<this._array.length&&this._getKey(this._array[n])===f);return!1}*getKeyIterator(h){if(this._array.length!==0&&(n=this._search(h),!(n<0||n>=this._array.length)&&this._getKey(this._array[n])===h))do yield this._array[n];while(++n<this._array.length&&this._getKey(this._array[n])===h)}forEachByKey(h,f){if(this._array.length!==0&&(n=this._search(h),!(n<0||n>=this._array.length)&&this._getKey(this._array[n])===h))do f(this._array[n]);while(++n<this._array.length&&this._getKey(this._array[n])===h)}values(){return[...this._array].values()}_search(h){let f=0,a=this._array.length-1;for(;a>=f;){let _=f+a>>1;const m=this._getKey(this._array[_]);if(m>h)a=_-1;else{if(!(m<h)){for(;_>0&&this._getKey(this._array[_-1])===h;)_--;return _}f=_+1}}return f}}},7226:(v,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.DebouncedIdleTask=r.IdleTaskQueue=r.PriorityTaskQueue=void 0;const h=n(6114);class f{constructor(){this._tasks=[],this._i=0}enqueue(m){this._tasks.push(m),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(m){this._idleCallback=void 0;let w=0,y=0,o=m.timeRemaining(),u=0;for(;this._i<this._tasks.length;){if(w=Date.now(),this._tasks[this._i]()||this._i++,w=Math.max(1,Date.now()-w),y=Math.max(w,y),u=m.timeRemaining(),1.5*y>u)return o-w<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(o-w))}ms`),void this._start();o=u}this.clear()}}class a extends f{_requestCallback(m){return setTimeout((()=>m(this._createDeadline(16))))}_cancelCallback(m){clearTimeout(m)}_createDeadline(m){const w=Date.now()+m;return{timeRemaining:()=>Math.max(0,w-Date.now())}}}r.PriorityTaskQueue=a,r.IdleTaskQueue=!h.isNode&&"requestIdleCallback"in window?class extends f{_requestCallback(_){return requestIdleCallback(_)}_cancelCallback(_){cancelIdleCallback(_)}}:a,r.DebouncedIdleTask=class{constructor(){this._queue=new r.IdleTaskQueue}set(_){this._queue.clear(),this._queue.enqueue(_)}flush(){this._queue.flush()}}},9282:(v,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.updateWindowsModeWrappedState=void 0;const h=n(643);r.updateWindowsModeWrappedState=function(f){const a=f.buffer.lines.get(f.buffer.ybase+f.buffer.y-1),_=a?.get(f.cols-1),m=f.buffer.lines.get(f.buffer.ybase+f.buffer.y);m&&_&&(m.isWrapped=_[h.CHAR_DATA_CODE_INDEX]!==h.NULL_CELL_CODE&&_[h.CHAR_DATA_CODE_INDEX]!==h.WHITESPACE_CELL_CODE)}},3734:(v,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.ExtendedAttrs=r.AttributeData=void 0;class n{constructor(){this.fg=0,this.bg=0,this.extended=new h}static toColorRGB(a){return[a>>>16&255,a>>>8&255,255&a]}static fromColorRGB(a){return(255&a[0])<<16|(255&a[1])<<8|255&a[2]}clone(){const a=new n;return a.fg=this.fg,a.bg=this.bg,a.extended=this.extended.clone(),a}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}r.AttributeData=n;class h{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(a){this._ext=a}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(a){this._ext&=-469762049,this._ext|=a<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(a){this._ext&=-67108864,this._ext|=67108863&a}get urlId(){return this._urlId}set urlId(a){this._urlId=a}constructor(a=0,_=0){this._ext=0,this._urlId=0,this._ext=a,this._urlId=_}clone(){return new h(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}r.ExtendedAttrs=h},9092:(v,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.Buffer=r.MAX_BUFFER_SIZE=void 0;const h=n(6349),f=n(7226),a=n(3734),_=n(8437),m=n(4634),w=n(511),y=n(643),o=n(4863),u=n(7116);r.MAX_BUFFER_SIZE=4294967295,r.Buffer=class{constructor(l,d,p){this._hasScrollback=l,this._optionsService=d,this._bufferService=p,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=_.DEFAULT_ATTR_DATA.clone(),this.savedCharset=u.DEFAULT_CHARSET,this.markers=[],this._nullCell=w.CellData.fromCharData([0,y.NULL_CELL_CHAR,y.NULL_CELL_WIDTH,y.NULL_CELL_CODE]),this._whitespaceCell=w.CellData.fromCharData([0,y.WHITESPACE_CELL_CHAR,y.WHITESPACE_CELL_WIDTH,y.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new f.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new h.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(l){return l?(this._nullCell.fg=l.fg,this._nullCell.bg=l.bg,this._nullCell.extended=l.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new a.ExtendedAttrs),this._nullCell}getWhitespaceCell(l){return l?(this._whitespaceCell.fg=l.fg,this._whitespaceCell.bg=l.bg,this._whitespaceCell.extended=l.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new a.ExtendedAttrs),this._whitespaceCell}getBlankLine(l,d){return new _.BufferLine(this._bufferService.cols,this.getNullCell(l),d)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const l=this.ybase+this.y-this.ydisp;return l>=0&&l<this._rows}_getCorrectBufferLength(l){if(!this._hasScrollback)return l;const d=l+this._optionsService.rawOptions.scrollback;return d>r.MAX_BUFFER_SIZE?r.MAX_BUFFER_SIZE:d}fillViewportRows(l){if(this.lines.length===0){l===void 0&&(l=_.DEFAULT_ATTR_DATA);let d=this._rows;for(;d--;)this.lines.push(this.getBlankLine(l))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new h.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(l,d){const p=this.getNullCell(_.DEFAULT_ATTR_DATA);let b=0;const E=this._getCorrectBufferLength(d);if(E>this.lines.maxLength&&(this.lines.maxLength=E),this.lines.length>0){if(this._cols<l)for(let S=0;S<this.lines.length;S++)b+=+this.lines.get(S).resize(l,p);let x=0;if(this._rows<d)for(let S=this._rows;S<d;S++)this.lines.length<d+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new _.BufferLine(l,p)):this.ybase>0&&this.lines.length<=this.ybase+this.y+x+1?(this.ybase--,x++,this.ydisp>0&&this.ydisp--):this.lines.push(new _.BufferLine(l,p)));else for(let S=this._rows;S>d;S--)this.lines.length>d+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(E<this.lines.maxLength){const S=this.lines.length-E;S>0&&(this.lines.trimStart(S),this.ybase=Math.max(this.ybase-S,0),this.ydisp=Math.max(this.ydisp-S,0),this.savedY=Math.max(this.savedY-S,0)),this.lines.maxLength=E}this.x=Math.min(this.x,l-1),this.y=Math.min(this.y,d-1),x&&(this.y+=x),this.savedX=Math.min(this.savedX,l-1),this.scrollTop=0}if(this.scrollBottom=d-1,this._isReflowEnabled&&(this._reflow(l,d),this._cols>l))for(let x=0;x<this.lines.length;x++)b+=+this.lines.get(x).resize(l,p);this._cols=l,this._rows=d,this._memoryCleanupQueue.clear(),b>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue((()=>this._batchedMemoryCleanup())))}_batchedMemoryCleanup(){let l=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,l=!1);let d=0;for(;this._memoryCleanupPosition<this.lines.length;)if(d+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),d>100)return!0;return l}get _isReflowEnabled(){const l=this._optionsService.rawOptions.windowsPty;return l&&l.buildNumber?this._hasScrollback&&l.backend==="conpty"&&l.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(l,d){this._cols!==l&&(l>this._cols?this._reflowLarger(l,d):this._reflowSmaller(l,d))}_reflowLarger(l,d){const p=(0,m.reflowLargerGetLinesToRemove)(this.lines,this._cols,l,this.ybase+this.y,this.getNullCell(_.DEFAULT_ATTR_DATA));if(p.length>0){const b=(0,m.reflowLargerCreateNewLayout)(this.lines,p);(0,m.reflowLargerApplyNewLayout)(this.lines,b.layout),this._reflowLargerAdjustViewport(l,d,b.countRemoved)}}_reflowLargerAdjustViewport(l,d,p){const b=this.getNullCell(_.DEFAULT_ATTR_DATA);let E=p;for(;E-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<d&&this.lines.push(new _.BufferLine(l,b))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-p,0)}_reflowSmaller(l,d){const p=this.getNullCell(_.DEFAULT_ATTR_DATA),b=[];let E=0;for(let x=this.lines.length-1;x>=0;x--){let S=this.lines.get(x);if(!S||!S.isWrapped&&S.getTrimmedLength()<=l)continue;const k=[S];for(;S.isWrapped&&x>0;)S=this.lines.get(--x),k.unshift(S);const D=this.ybase+this.y;if(D>=x&&D<x+k.length)continue;const H=k[k.length-1].getTrimmedLength(),T=(0,m.reflowSmallerGetNewLineLengths)(k,this._cols,l),I=T.length-k.length;let V;V=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+I):Math.max(0,this.lines.length-this.lines.maxLength+I);const J=[];for(let F=0;F<I;F++){const Z=this.getBlankLine(_.DEFAULT_ATTR_DATA,!0);J.push(Z)}J.length>0&&(b.push({start:x+k.length+E,newLines:J}),E+=J.length),k.push(...J);let X=T.length-1,K=T[X];K===0&&(X--,K=T[X]);let A=k.length-I-1,B=H;for(;A>=0;){const F=Math.min(B,K);if(k[X]===void 0)break;if(k[X].copyCellsFrom(k[A],B-F,K-F,F,!0),K-=F,K===0&&(X--,K=T[X]),B-=F,B===0){A--;const Z=Math.max(A,0);B=(0,m.getWrappedLineTrimmedLength)(k,Z,this._cols)}}for(let F=0;F<k.length;F++)T[F]<l&&k[F].setCell(T[F],p);let P=I-V;for(;P-- >0;)this.ybase===0?this.y<d-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+E)-d&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+I,this.ybase+d-1)}if(b.length>0){const x=[],S=[];for(let X=0;X<this.lines.length;X++)S.push(this.lines.get(X));const k=this.lines.length;let D=k-1,H=0,T=b[H];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+E);let I=0;for(let X=Math.min(this.lines.maxLength-1,k+E-1);X>=0;X--)if(T&&T.start>D+I){for(let K=T.newLines.length-1;K>=0;K--)this.lines.set(X--,T.newLines[K]);X++,x.push({index:D+1,amount:T.newLines.length}),I+=T.newLines.length,T=b[++H]}else this.lines.set(X,S[D--]);let V=0;for(let X=x.length-1;X>=0;X--)x[X].index+=V,this.lines.onInsertEmitter.fire(x[X]),V+=x[X].amount;const J=Math.max(0,k+E-this.lines.maxLength);J>0&&this.lines.onTrimEmitter.fire(J)}}translateBufferLineToString(l,d,p=0,b){const E=this.lines.get(l);return E?E.translateToString(d,p,b):""}getWrappedRangeForLine(l){let d=l,p=l;for(;d>0&&this.lines.get(d).isWrapped;)d--;for(;p+1<this.lines.length&&this.lines.get(p+1).isWrapped;)p++;return{first:d,last:p}}setupTabStops(l){for(l!=null?this.tabs[l]||(l=this.prevStop(l)):(this.tabs={},l=0);l<this._cols;l+=this._optionsService.rawOptions.tabStopWidth)this.tabs[l]=!0}prevStop(l){for(l==null&&(l=this.x);!this.tabs[--l]&&l>0;);return l>=this._cols?this._cols-1:l<0?0:l}nextStop(l){for(l==null&&(l=this.x);!this.tabs[++l]&&l<this._cols;);return l>=this._cols?this._cols-1:l<0?0:l}clearMarkers(l){this._isClearing=!0;for(let d=0;d<this.markers.length;d++)this.markers[d].line===l&&(this.markers[d].dispose(),this.markers.splice(d--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let l=0;l<this.markers.length;l++)this.markers[l].dispose(),this.markers.splice(l--,1);this._isClearing=!1}addMarker(l){const d=new o.Marker(l);return this.markers.push(d),d.register(this.lines.onTrim((p=>{d.line-=p,d.line<0&&d.dispose()}))),d.register(this.lines.onInsert((p=>{d.line>=p.index&&(d.line+=p.amount)}))),d.register(this.lines.onDelete((p=>{d.line>=p.index&&d.line<p.index+p.amount&&d.dispose(),d.line>p.index&&(d.line-=p.amount)}))),d.register(d.onDispose((()=>this._removeMarker(d)))),d}_removeMarker(l){this._isClearing||this.markers.splice(this.markers.indexOf(l),1)}}},8437:(v,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.BufferLine=r.DEFAULT_ATTR_DATA=void 0;const h=n(3734),f=n(511),a=n(643),_=n(482);r.DEFAULT_ATTR_DATA=Object.freeze(new h.AttributeData);let m=0;class w{constructor(o,u,l=!1){this.isWrapped=l,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*o);const d=u||f.CellData.fromCharData([0,a.NULL_CELL_CHAR,a.NULL_CELL_WIDTH,a.NULL_CELL_CODE]);for(let p=0;p<o;++p)this.setCell(p,d);this.length=o}get(o){const u=this._data[3*o+0],l=2097151&u;return[this._data[3*o+1],2097152&u?this._combined[o]:l?(0,_.stringFromCodePoint)(l):"",u>>22,2097152&u?this._combined[o].charCodeAt(this._combined[o].length-1):l]}set(o,u){this._data[3*o+1]=u[a.CHAR_DATA_ATTR_INDEX],u[a.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[o]=u[1],this._data[3*o+0]=2097152|o|u[a.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*o+0]=u[a.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|u[a.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(o){return this._data[3*o+0]>>22}hasWidth(o){return 12582912&this._data[3*o+0]}getFg(o){return this._data[3*o+1]}getBg(o){return this._data[3*o+2]}hasContent(o){return 4194303&this._data[3*o+0]}getCodePoint(o){const u=this._data[3*o+0];return 2097152&u?this._combined[o].charCodeAt(this._combined[o].length-1):2097151&u}isCombined(o){return 2097152&this._data[3*o+0]}getString(o){const u=this._data[3*o+0];return 2097152&u?this._combined[o]:2097151&u?(0,_.stringFromCodePoint)(2097151&u):""}isProtected(o){return 536870912&this._data[3*o+2]}loadCell(o,u){return m=3*o,u.content=this._data[m+0],u.fg=this._data[m+1],u.bg=this._data[m+2],2097152&u.content&&(u.combinedData=this._combined[o]),268435456&u.bg&&(u.extended=this._extendedAttrs[o]),u}setCell(o,u){2097152&u.content&&(this._combined[o]=u.combinedData),268435456&u.bg&&(this._extendedAttrs[o]=u.extended),this._data[3*o+0]=u.content,this._data[3*o+1]=u.fg,this._data[3*o+2]=u.bg}setCellFromCodePoint(o,u,l,d,p,b){268435456&p&&(this._extendedAttrs[o]=b),this._data[3*o+0]=u|l<<22,this._data[3*o+1]=d,this._data[3*o+2]=p}addCodepointToCell(o,u){let l=this._data[3*o+0];2097152&l?this._combined[o]+=(0,_.stringFromCodePoint)(u):(2097151&l?(this._combined[o]=(0,_.stringFromCodePoint)(2097151&l)+(0,_.stringFromCodePoint)(u),l&=-2097152,l|=2097152):l=u|4194304,this._data[3*o+0]=l)}insertCells(o,u,l,d){if((o%=this.length)&&this.getWidth(o-1)===2&&this.setCellFromCodePoint(o-1,0,1,d?.fg||0,d?.bg||0,d?.extended||new h.ExtendedAttrs),u<this.length-o){const p=new f.CellData;for(let b=this.length-o-u-1;b>=0;--b)this.setCell(o+u+b,this.loadCell(o+b,p));for(let b=0;b<u;++b)this.setCell(o+b,l)}else for(let p=o;p<this.length;++p)this.setCell(p,l);this.getWidth(this.length-1)===2&&this.setCellFromCodePoint(this.length-1,0,1,d?.fg||0,d?.bg||0,d?.extended||new h.ExtendedAttrs)}deleteCells(o,u,l,d){if(o%=this.length,u<this.length-o){const p=new f.CellData;for(let b=0;b<this.length-o-u;++b)this.setCell(o+b,this.loadCell(o+u+b,p));for(let b=this.length-u;b<this.length;++b)this.setCell(b,l)}else for(let p=o;p<this.length;++p)this.setCell(p,l);o&&this.getWidth(o-1)===2&&this.setCellFromCodePoint(o-1,0,1,d?.fg||0,d?.bg||0,d?.extended||new h.ExtendedAttrs),this.getWidth(o)!==0||this.hasContent(o)||this.setCellFromCodePoint(o,0,1,d?.fg||0,d?.bg||0,d?.extended||new h.ExtendedAttrs)}replaceCells(o,u,l,d,p=!1){if(p)for(o&&this.getWidth(o-1)===2&&!this.isProtected(o-1)&&this.setCellFromCodePoint(o-1,0,1,d?.fg||0,d?.bg||0,d?.extended||new h.ExtendedAttrs),u<this.length&&this.getWidth(u-1)===2&&!this.isProtected(u)&&this.setCellFromCodePoint(u,0,1,d?.fg||0,d?.bg||0,d?.extended||new h.ExtendedAttrs);o<u&&o<this.length;)this.isProtected(o)||this.setCell(o,l),o++;else for(o&&this.getWidth(o-1)===2&&this.setCellFromCodePoint(o-1,0,1,d?.fg||0,d?.bg||0,d?.extended||new h.ExtendedAttrs),u<this.length&&this.getWidth(u-1)===2&&this.setCellFromCodePoint(u,0,1,d?.fg||0,d?.bg||0,d?.extended||new h.ExtendedAttrs);o<u&&o<this.length;)this.setCell(o++,l)}resize(o,u){if(o===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const l=3*o;if(o>this.length){if(this._data.buffer.byteLength>=4*l)this._data=new Uint32Array(this._data.buffer,0,l);else{const d=new Uint32Array(l);d.set(this._data),this._data=d}for(let d=this.length;d<o;++d)this.setCell(d,u)}else{this._data=this._data.subarray(0,l);const d=Object.keys(this._combined);for(let b=0;b<d.length;b++){const E=parseInt(d[b],10);E>=o&&delete this._combined[E]}const p=Object.keys(this._extendedAttrs);for(let b=0;b<p.length;b++){const E=parseInt(p[b],10);E>=o&&delete this._extendedAttrs[E]}}return this.length=o,4*l*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const o=new Uint32Array(this._data.length);return o.set(this._data),this._data=o,1}return 0}fill(o,u=!1){if(u)for(let l=0;l<this.length;++l)this.isProtected(l)||this.setCell(l,o);else{this._combined={},this._extendedAttrs={};for(let l=0;l<this.length;++l)this.setCell(l,o)}}copyFrom(o){this.length!==o.length?this._data=new Uint32Array(o._data):this._data.set(o._data),this.length=o.length,this._combined={};for(const u in o._combined)this._combined[u]=o._combined[u];this._extendedAttrs={};for(const u in o._extendedAttrs)this._extendedAttrs[u]=o._extendedAttrs[u];this.isWrapped=o.isWrapped}clone(){const o=new w(0);o._data=new Uint32Array(this._data),o.length=this.length;for(const u in this._combined)o._combined[u]=this._combined[u];for(const u in this._extendedAttrs)o._extendedAttrs[u]=this._extendedAttrs[u];return o.isWrapped=this.isWrapped,o}getTrimmedLength(){for(let o=this.length-1;o>=0;--o)if(4194303&this._data[3*o+0])return o+(this._data[3*o+0]>>22);return 0}getNoBgTrimmedLength(){for(let o=this.length-1;o>=0;--o)if(4194303&this._data[3*o+0]||50331648&this._data[3*o+2])return o+(this._data[3*o+0]>>22);return 0}copyCellsFrom(o,u,l,d,p){const b=o._data;if(p)for(let x=d-1;x>=0;x--){for(let S=0;S<3;S++)this._data[3*(l+x)+S]=b[3*(u+x)+S];268435456&b[3*(u+x)+2]&&(this._extendedAttrs[l+x]=o._extendedAttrs[u+x])}else for(let x=0;x<d;x++){for(let S=0;S<3;S++)this._data[3*(l+x)+S]=b[3*(u+x)+S];268435456&b[3*(u+x)+2]&&(this._extendedAttrs[l+x]=o._extendedAttrs[u+x])}const E=Object.keys(o._combined);for(let x=0;x<E.length;x++){const S=parseInt(E[x],10);S>=u&&(this._combined[S-u+l]=o._combined[S])}}translateToString(o=!1,u=0,l=this.length){o&&(l=Math.min(l,this.getTrimmedLength()));let d="";for(;u<l;){const p=this._data[3*u+0],b=2097151&p;d+=2097152&p?this._combined[u]:b?(0,_.stringFromCodePoint)(b):a.WHITESPACE_CELL_CHAR,u+=p>>22||1}return d}}r.BufferLine=w},4841:(v,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.getRangeLength=void 0,r.getRangeLength=function(n,h){if(n.start.y>n.end.y)throw new Error(`Buffer range end (${n.end.x}, ${n.end.y}) cannot be before start (${n.start.x}, ${n.start.y})`);return h*(n.end.y-n.start.y)+(n.end.x-n.start.x+1)}},4634:(v,r)=>{function n(h,f,a){if(f===h.length-1)return h[f].getTrimmedLength();const _=!h[f].hasContent(a-1)&&h[f].getWidth(a-1)===1,m=h[f+1].getWidth(0)===2;return _&&m?a-1:a}Object.defineProperty(r,"__esModule",{value:!0}),r.getWrappedLineTrimmedLength=r.reflowSmallerGetNewLineLengths=r.reflowLargerApplyNewLayout=r.reflowLargerCreateNewLayout=r.reflowLargerGetLinesToRemove=void 0,r.reflowLargerGetLinesToRemove=function(h,f,a,_,m){const w=[];for(let y=0;y<h.length-1;y++){let o=y,u=h.get(++o);if(!u.isWrapped)continue;const l=[h.get(y)];for(;o<h.length&&u.isWrapped;)l.push(u),u=h.get(++o);if(_>=y&&_<o){y+=l.length-1;continue}let d=0,p=n(l,d,f),b=1,E=0;for(;b<l.length;){const S=n(l,b,f),k=S-E,D=a-p,H=Math.min(k,D);l[d].copyCellsFrom(l[b],E,p,H,!1),p+=H,p===a&&(d++,p=0),E+=H,E===S&&(b++,E=0),p===0&&d!==0&&l[d-1].getWidth(a-1)===2&&(l[d].copyCellsFrom(l[d-1],a-1,p++,1,!1),l[d-1].setCell(a-1,m))}l[d].replaceCells(p,a,m);let x=0;for(let S=l.length-1;S>0&&(S>d||l[S].getTrimmedLength()===0);S--)x++;x>0&&(w.push(y+l.length-x),w.push(x)),y+=l.length-1}return w},r.reflowLargerCreateNewLayout=function(h,f){const a=[];let _=0,m=f[_],w=0;for(let y=0;y<h.length;y++)if(m===y){const o=f[++_];h.onDeleteEmitter.fire({index:y-w,amount:o}),y+=o-1,w+=o,m=f[++_]}else a.push(y);return{layout:a,countRemoved:w}},r.reflowLargerApplyNewLayout=function(h,f){const a=[];for(let _=0;_<f.length;_++)a.push(h.get(f[_]));for(let _=0;_<a.length;_++)h.set(_,a[_]);h.length=f.length},r.reflowSmallerGetNewLineLengths=function(h,f,a){const _=[],m=h.map(((u,l)=>n(h,l,f))).reduce(((u,l)=>u+l));let w=0,y=0,o=0;for(;o<m;){if(m-o<a){_.push(m-o);break}w+=a;const u=n(h,y,f);w>u&&(w-=u,y++);const l=h[y].getWidth(w-1)===2;l&&w--;const d=l?a-1:a;_.push(d),o+=d}return _},r.getWrappedLineTrimmedLength=n},5295:(v,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.BufferSet=void 0;const h=n(8460),f=n(844),a=n(9092);class _ extends f.Disposable{constructor(w,y){super(),this._optionsService=w,this._bufferService=y,this._onBufferActivate=this.register(new h.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",(()=>this.resize(this._bufferService.cols,this._bufferService.rows)))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",(()=>this.setupTabStops())))}reset(){this._normal=new a.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new a.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(w){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(w),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(w,y){this._normal.resize(w,y),this._alt.resize(w,y),this.setupTabStops(w)}setupTabStops(w){this._normal.setupTabStops(w),this._alt.setupTabStops(w)}}r.BufferSet=_},511:(v,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.CellData=void 0;const h=n(482),f=n(643),a=n(3734);class _ extends a.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new a.ExtendedAttrs,this.combinedData=""}static fromCharData(w){const y=new _;return y.setFromCharData(w),y}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,h.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(w){this.fg=w[f.CHAR_DATA_ATTR_INDEX],this.bg=0;let y=!1;if(w[f.CHAR_DATA_CHAR_INDEX].length>2)y=!0;else if(w[f.CHAR_DATA_CHAR_INDEX].length===2){const o=w[f.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=o&&o<=56319){const u=w[f.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=u&&u<=57343?this.content=1024*(o-55296)+u-56320+65536|w[f.CHAR_DATA_WIDTH_INDEX]<<22:y=!0}else y=!0}else this.content=w[f.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|w[f.CHAR_DATA_WIDTH_INDEX]<<22;y&&(this.combinedData=w[f.CHAR_DATA_CHAR_INDEX],this.content=2097152|w[f.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}r.CellData=_},643:(v,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.WHITESPACE_CELL_CODE=r.WHITESPACE_CELL_WIDTH=r.WHITESPACE_CELL_CHAR=r.NULL_CELL_CODE=r.NULL_CELL_WIDTH=r.NULL_CELL_CHAR=r.CHAR_DATA_CODE_INDEX=r.CHAR_DATA_WIDTH_INDEX=r.CHAR_DATA_CHAR_INDEX=r.CHAR_DATA_ATTR_INDEX=r.DEFAULT_EXT=r.DEFAULT_ATTR=r.DEFAULT_COLOR=void 0,r.DEFAULT_COLOR=0,r.DEFAULT_ATTR=256|r.DEFAULT_COLOR<<9,r.DEFAULT_EXT=0,r.CHAR_DATA_ATTR_INDEX=0,r.CHAR_DATA_CHAR_INDEX=1,r.CHAR_DATA_WIDTH_INDEX=2,r.CHAR_DATA_CODE_INDEX=3,r.NULL_CELL_CHAR="",r.NULL_CELL_WIDTH=1,r.NULL_CELL_CODE=0,r.WHITESPACE_CELL_CHAR=" ",r.WHITESPACE_CELL_WIDTH=1,r.WHITESPACE_CELL_CODE=32},4863:(v,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.Marker=void 0;const h=n(8460),f=n(844);class a{get id(){return this._id}constructor(m){this.line=m,this.isDisposed=!1,this._disposables=[],this._id=a._nextId++,this._onDispose=this.register(new h.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,f.disposeArray)(this._disposables),this._disposables.length=0)}register(m){return this._disposables.push(m),m}}r.Marker=a,a._nextId=1},7116:(v,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.DEFAULT_CHARSET=r.CHARSETS=void 0,r.CHARSETS={},r.DEFAULT_CHARSET=r.CHARSETS.B,r.CHARSETS[0]={"`":"◆",a:"▒",b:"␉",c:"␌",d:"␍",e:"␊",f:"°",g:"±",h:"␤",i:"␋",j:"┘",k:"┐",l:"┌",m:"└",n:"┼",o:"⎺",p:"⎻",q:"─",r:"⎼",s:"⎽",t:"├",u:"┤",v:"┴",w:"┬",x:"│",y:"≤",z:"≥","{":"π","|":"≠","}":"£","~":"·"},r.CHARSETS.A={"#":"£"},r.CHARSETS.B=void 0,r.CHARSETS[4]={"#":"£","@":"¾","[":"ij","\\":"½","]":"|","{":"¨","|":"f","}":"¼","~":"´"},r.CHARSETS.C=r.CHARSETS[5]={"[":"Ä","\\":"Ö","]":"Å","^":"Ü","`":"é","{":"ä","|":"ö","}":"å","~":"ü"},r.CHARSETS.R={"#":"£","@":"à","[":"°","\\":"ç","]":"§","{":"é","|":"ù","}":"è","~":"¨"},r.CHARSETS.Q={"@":"à","[":"â","\\":"ç","]":"ê","^":"î","`":"ô","{":"é","|":"ù","}":"è","~":"û"},r.CHARSETS.K={"@":"§","[":"Ä","\\":"Ö","]":"Ü","{":"ä","|":"ö","}":"ü","~":"ß"},r.CHARSETS.Y={"#":"£","@":"§","[":"°","\\":"ç","]":"é","`":"ù","{":"à","|":"ò","}":"è","~":"ì"},r.CHARSETS.E=r.CHARSETS[6]={"@":"Ä","[":"Æ","\\":"Ø","]":"Å","^":"Ü","`":"ä","{":"æ","|":"ø","}":"å","~":"ü"},r.CHARSETS.Z={"#":"£","@":"§","[":"¡","\\":"Ñ","]":"¿","{":"°","|":"ñ","}":"ç"},r.CHARSETS.H=r.CHARSETS[7]={"@":"É","[":"Ä","\\":"Ö","]":"Å","^":"Ü","`":"é","{":"ä","|":"ö","}":"å","~":"ü"},r.CHARSETS["="]={"#":"ù","@":"à","[":"é","\\":"ç","]":"ê","^":"î",_:"è","`":"ô","{":"ä","|":"ö","}":"ü","~":"û"}},2584:(v,r)=>{var n,h,f;Object.defineProperty(r,"__esModule",{value:!0}),r.C1_ESCAPED=r.C1=r.C0=void 0,(function(a){a.NUL="\0",a.SOH="",a.STX="",a.ETX="",a.EOT="",a.ENQ="",a.ACK="",a.BEL="\x07",a.BS="\b",a.HT="	",a.LF=`
`,a.VT="\v",a.FF="\f",a.CR="\r",a.SO="",a.SI="",a.DLE="",a.DC1="",a.DC2="",a.DC3="",a.DC4="",a.NAK="",a.SYN="",a.ETB="",a.CAN="",a.EM="",a.SUB="",a.ESC="\x1B",a.FS="",a.GS="",a.RS="",a.US="",a.SP=" ",a.DEL=""})(n||(r.C0=n={})),(function(a){a.PAD="",a.HOP="",a.BPH="",a.NBH="",a.IND="",a.NEL="",a.SSA="",a.ESA="",a.HTS="",a.HTJ="",a.VTS="",a.PLD="",a.PLU="",a.RI="",a.SS2="",a.SS3="",a.DCS="",a.PU1="",a.PU2="",a.STS="",a.CCH="",a.MW="",a.SPA="",a.EPA="",a.SOS="",a.SGCI="",a.SCI="",a.CSI="",a.ST="",a.OSC="",a.PM="",a.APC=""})(h||(r.C1=h={})),(function(a){a.ST=`${n.ESC}\\`})(f||(r.C1_ESCAPED=f={}))},7399:(v,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.evaluateKeyboardEvent=void 0;const h=n(2584),f={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};r.evaluateKeyboardEvent=function(a,_,m,w){const y={type:0,cancel:!1,key:void 0},o=(a.shiftKey?1:0)|(a.altKey?2:0)|(a.ctrlKey?4:0)|(a.metaKey?8:0);switch(a.keyCode){case 0:a.key==="UIKeyInputUpArrow"?y.key=_?h.C0.ESC+"OA":h.C0.ESC+"[A":a.key==="UIKeyInputLeftArrow"?y.key=_?h.C0.ESC+"OD":h.C0.ESC+"[D":a.key==="UIKeyInputRightArrow"?y.key=_?h.C0.ESC+"OC":h.C0.ESC+"[C":a.key==="UIKeyInputDownArrow"&&(y.key=_?h.C0.ESC+"OB":h.C0.ESC+"[B");break;case 8:if(a.altKey){y.key=h.C0.ESC+h.C0.DEL;break}y.key=h.C0.DEL;break;case 9:if(a.shiftKey){y.key=h.C0.ESC+"[Z";break}y.key=h.C0.HT,y.cancel=!0;break;case 13:y.key=a.altKey?h.C0.ESC+h.C0.CR:h.C0.CR,y.cancel=!0;break;case 27:y.key=h.C0.ESC,a.altKey&&(y.key=h.C0.ESC+h.C0.ESC),y.cancel=!0;break;case 37:if(a.metaKey)break;o?(y.key=h.C0.ESC+"[1;"+(o+1)+"D",y.key===h.C0.ESC+"[1;3D"&&(y.key=h.C0.ESC+(m?"b":"[1;5D"))):y.key=_?h.C0.ESC+"OD":h.C0.ESC+"[D";break;case 39:if(a.metaKey)break;o?(y.key=h.C0.ESC+"[1;"+(o+1)+"C",y.key===h.C0.ESC+"[1;3C"&&(y.key=h.C0.ESC+(m?"f":"[1;5C"))):y.key=_?h.C0.ESC+"OC":h.C0.ESC+"[C";break;case 38:if(a.metaKey)break;o?(y.key=h.C0.ESC+"[1;"+(o+1)+"A",m||y.key!==h.C0.ESC+"[1;3A"||(y.key=h.C0.ESC+"[1;5A")):y.key=_?h.C0.ESC+"OA":h.C0.ESC+"[A";break;case 40:if(a.metaKey)break;o?(y.key=h.C0.ESC+"[1;"+(o+1)+"B",m||y.key!==h.C0.ESC+"[1;3B"||(y.key=h.C0.ESC+"[1;5B")):y.key=_?h.C0.ESC+"OB":h.C0.ESC+"[B";break;case 45:a.shiftKey||a.ctrlKey||(y.key=h.C0.ESC+"[2~");break;case 46:y.key=o?h.C0.ESC+"[3;"+(o+1)+"~":h.C0.ESC+"[3~";break;case 36:y.key=o?h.C0.ESC+"[1;"+(o+1)+"H":_?h.C0.ESC+"OH":h.C0.ESC+"[H";break;case 35:y.key=o?h.C0.ESC+"[1;"+(o+1)+"F":_?h.C0.ESC+"OF":h.C0.ESC+"[F";break;case 33:a.shiftKey?y.type=2:a.ctrlKey?y.key=h.C0.ESC+"[5;"+(o+1)+"~":y.key=h.C0.ESC+"[5~";break;case 34:a.shiftKey?y.type=3:a.ctrlKey?y.key=h.C0.ESC+"[6;"+(o+1)+"~":y.key=h.C0.ESC+"[6~";break;case 112:y.key=o?h.C0.ESC+"[1;"+(o+1)+"P":h.C0.ESC+"OP";break;case 113:y.key=o?h.C0.ESC+"[1;"+(o+1)+"Q":h.C0.ESC+"OQ";break;case 114:y.key=o?h.C0.ESC+"[1;"+(o+1)+"R":h.C0.ESC+"OR";break;case 115:y.key=o?h.C0.ESC+"[1;"+(o+1)+"S":h.C0.ESC+"OS";break;case 116:y.key=o?h.C0.ESC+"[15;"+(o+1)+"~":h.C0.ESC+"[15~";break;case 117:y.key=o?h.C0.ESC+"[17;"+(o+1)+"~":h.C0.ESC+"[17~";break;case 118:y.key=o?h.C0.ESC+"[18;"+(o+1)+"~":h.C0.ESC+"[18~";break;case 119:y.key=o?h.C0.ESC+"[19;"+(o+1)+"~":h.C0.ESC+"[19~";break;case 120:y.key=o?h.C0.ESC+"[20;"+(o+1)+"~":h.C0.ESC+"[20~";break;case 121:y.key=o?h.C0.ESC+"[21;"+(o+1)+"~":h.C0.ESC+"[21~";break;case 122:y.key=o?h.C0.ESC+"[23;"+(o+1)+"~":h.C0.ESC+"[23~";break;case 123:y.key=o?h.C0.ESC+"[24;"+(o+1)+"~":h.C0.ESC+"[24~";break;default:if(!a.ctrlKey||a.shiftKey||a.altKey||a.metaKey)if(m&&!w||!a.altKey||a.metaKey)!m||a.altKey||a.ctrlKey||a.shiftKey||!a.metaKey?a.key&&!a.ctrlKey&&!a.altKey&&!a.metaKey&&a.keyCode>=48&&a.key.length===1?y.key=a.key:a.key&&a.ctrlKey&&(a.key==="_"&&(y.key=h.C0.US),a.key==="@"&&(y.key=h.C0.NUL)):a.keyCode===65&&(y.type=1);else{const u=f[a.keyCode],l=u?.[a.shiftKey?1:0];if(l)y.key=h.C0.ESC+l;else if(a.keyCode>=65&&a.keyCode<=90){const d=a.ctrlKey?a.keyCode-64:a.keyCode+32;let p=String.fromCharCode(d);a.shiftKey&&(p=p.toUpperCase()),y.key=h.C0.ESC+p}else if(a.keyCode===32)y.key=h.C0.ESC+(a.ctrlKey?h.C0.NUL:" ");else if(a.key==="Dead"&&a.code.startsWith("Key")){let d=a.code.slice(3,4);a.shiftKey||(d=d.toLowerCase()),y.key=h.C0.ESC+d,y.cancel=!0}}else a.keyCode>=65&&a.keyCode<=90?y.key=String.fromCharCode(a.keyCode-64):a.keyCode===32?y.key=h.C0.NUL:a.keyCode>=51&&a.keyCode<=55?y.key=String.fromCharCode(a.keyCode-51+27):a.keyCode===56?y.key=h.C0.DEL:a.keyCode===219?y.key=h.C0.ESC:a.keyCode===220?y.key=h.C0.FS:a.keyCode===221&&(y.key=h.C0.GS)}return y}},482:(v,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.Utf8ToUtf32=r.StringToUtf32=r.utf32ToString=r.stringFromCodePoint=void 0,r.stringFromCodePoint=function(n){return n>65535?(n-=65536,String.fromCharCode(55296+(n>>10))+String.fromCharCode(n%1024+56320)):String.fromCharCode(n)},r.utf32ToString=function(n,h=0,f=n.length){let a="";for(let _=h;_<f;++_){let m=n[_];m>65535?(m-=65536,a+=String.fromCharCode(55296+(m>>10))+String.fromCharCode(m%1024+56320)):a+=String.fromCharCode(m)}return a},r.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(n,h){const f=n.length;if(!f)return 0;let a=0,_=0;if(this._interim){const m=n.charCodeAt(_++);56320<=m&&m<=57343?h[a++]=1024*(this._interim-55296)+m-56320+65536:(h[a++]=this._interim,h[a++]=m),this._interim=0}for(let m=_;m<f;++m){const w=n.charCodeAt(m);if(55296<=w&&w<=56319){if(++m>=f)return this._interim=w,a;const y=n.charCodeAt(m);56320<=y&&y<=57343?h[a++]=1024*(w-55296)+y-56320+65536:(h[a++]=w,h[a++]=y)}else w!==65279&&(h[a++]=w)}return a}},r.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(n,h){const f=n.length;if(!f)return 0;let a,_,m,w,y=0,o=0,u=0;if(this.interim[0]){let p=!1,b=this.interim[0];b&=(224&b)==192?31:(240&b)==224?15:7;let E,x=0;for(;(E=63&this.interim[++x])&&x<4;)b<<=6,b|=E;const S=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,k=S-x;for(;u<k;){if(u>=f)return 0;if(E=n[u++],(192&E)!=128){u--,p=!0;break}this.interim[x++]=E,b<<=6,b|=63&E}p||(S===2?b<128?u--:h[y++]=b:S===3?b<2048||b>=55296&&b<=57343||b===65279||(h[y++]=b):b<65536||b>1114111||(h[y++]=b)),this.interim.fill(0)}const l=f-4;let d=u;for(;d<f;){for(;!(!(d<l)||128&(a=n[d])||128&(_=n[d+1])||128&(m=n[d+2])||128&(w=n[d+3]));)h[y++]=a,h[y++]=_,h[y++]=m,h[y++]=w,d+=4;if(a=n[d++],a<128)h[y++]=a;else if((224&a)==192){if(d>=f)return this.interim[0]=a,y;if(_=n[d++],(192&_)!=128){d--;continue}if(o=(31&a)<<6|63&_,o<128){d--;continue}h[y++]=o}else if((240&a)==224){if(d>=f)return this.interim[0]=a,y;if(_=n[d++],(192&_)!=128){d--;continue}if(d>=f)return this.interim[0]=a,this.interim[1]=_,y;if(m=n[d++],(192&m)!=128){d--;continue}if(o=(15&a)<<12|(63&_)<<6|63&m,o<2048||o>=55296&&o<=57343||o===65279)continue;h[y++]=o}else if((248&a)==240){if(d>=f)return this.interim[0]=a,y;if(_=n[d++],(192&_)!=128){d--;continue}if(d>=f)return this.interim[0]=a,this.interim[1]=_,y;if(m=n[d++],(192&m)!=128){d--;continue}if(d>=f)return this.interim[0]=a,this.interim[1]=_,this.interim[2]=m,y;if(w=n[d++],(192&w)!=128){d--;continue}if(o=(7&a)<<18|(63&_)<<12|(63&m)<<6|63&w,o<65536||o>1114111)continue;h[y++]=o}}return y}}},225:(v,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.UnicodeV6=void 0;const n=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],h=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let f;r.UnicodeV6=class{constructor(){if(this.version="6",!f){f=new Uint8Array(65536),f.fill(1),f[0]=0,f.fill(0,1,32),f.fill(0,127,160),f.fill(2,4352,4448),f[9001]=2,f[9002]=2,f.fill(2,11904,42192),f[12351]=1,f.fill(2,44032,55204),f.fill(2,63744,64256),f.fill(2,65040,65050),f.fill(2,65072,65136),f.fill(2,65280,65377),f.fill(2,65504,65511);for(let a=0;a<n.length;++a)f.fill(0,n[a][0],n[a][1]+1)}}wcwidth(a){return a<32?0:a<127?1:a<65536?f[a]:(function(_,m){let w,y=0,o=m.length-1;if(_<m[0][0]||_>m[o][1])return!1;for(;o>=y;)if(w=y+o>>1,_>m[w][1])y=w+1;else{if(!(_<m[w][0]))return!0;o=w-1}return!1})(a,h)?0:a>=131072&&a<=196605||a>=196608&&a<=262141?2:1}}},5981:(v,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.WriteBuffer=void 0;const h=n(8460),f=n(844);class a extends f.Disposable{constructor(m){super(),this._action=m,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new h.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(m,w){if(w!==void 0&&this._syncCalls>w)return void(this._syncCalls=0);if(this._pendingData+=m.length,this._writeBuffer.push(m),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let y;for(this._isSyncWriting=!0;y=this._writeBuffer.shift();){this._action(y);const o=this._callbacks.shift();o&&o()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(m,w){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=m.length,this._writeBuffer.push(m),this._callbacks.push(w),void this._innerWrite();setTimeout((()=>this._innerWrite()))}this._pendingData+=m.length,this._writeBuffer.push(m),this._callbacks.push(w)}_innerWrite(m=0,w=!0){const y=m||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const o=this._writeBuffer[this._bufferOffset],u=this._action(o,w);if(u){const d=p=>Date.now()-y>=12?setTimeout((()=>this._innerWrite(0,p))):this._innerWrite(y,p);return void u.catch((p=>(queueMicrotask((()=>{throw p})),Promise.resolve(!1)))).then(d)}const l=this._callbacks[this._bufferOffset];if(l&&l(),this._bufferOffset++,this._pendingData-=o.length,Date.now()-y>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout((()=>this._innerWrite()))):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}r.WriteBuffer=a},5941:(v,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.toRgbString=r.parseColor=void 0;const n=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,h=/^[\da-f]+$/;function f(a,_){const m=a.toString(16),w=m.length<2?"0"+m:m;switch(_){case 4:return m[0];case 8:return w;case 12:return(w+w).slice(0,3);default:return w+w}}r.parseColor=function(a){if(!a)return;let _=a.toLowerCase();if(_.indexOf("rgb:")===0){_=_.slice(4);const m=n.exec(_);if(m){const w=m[1]?15:m[4]?255:m[7]?4095:65535;return[Math.round(parseInt(m[1]||m[4]||m[7]||m[10],16)/w*255),Math.round(parseInt(m[2]||m[5]||m[8]||m[11],16)/w*255),Math.round(parseInt(m[3]||m[6]||m[9]||m[12],16)/w*255)]}}else if(_.indexOf("#")===0&&(_=_.slice(1),h.exec(_)&&[3,6,9,12].includes(_.length))){const m=_.length/3,w=[0,0,0];for(let y=0;y<3;++y){const o=parseInt(_.slice(m*y,m*y+m),16);w[y]=m===1?o<<4:m===2?o:m===3?o>>4:o>>8}return w}},r.toRgbString=function(a,_=16){const[m,w,y]=a;return`rgb:${f(m,_)}/${f(w,_)}/${f(y,_)}`}},5770:(v,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.PAYLOAD_LIMIT=void 0,r.PAYLOAD_LIMIT=1e7},6351:(v,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.DcsHandler=r.DcsParser=void 0;const h=n(482),f=n(8742),a=n(5770),_=[];r.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=_,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=_}registerHandler(w,y){this._handlers[w]===void 0&&(this._handlers[w]=[]);const o=this._handlers[w];return o.push(y),{dispose:()=>{const u=o.indexOf(y);u!==-1&&o.splice(u,1)}}}clearHandler(w){this._handlers[w]&&delete this._handlers[w]}setHandlerFallback(w){this._handlerFb=w}reset(){if(this._active.length)for(let w=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;w>=0;--w)this._active[w].unhook(!1);this._stack.paused=!1,this._active=_,this._ident=0}hook(w,y){if(this.reset(),this._ident=w,this._active=this._handlers[w]||_,this._active.length)for(let o=this._active.length-1;o>=0;o--)this._active[o].hook(y);else this._handlerFb(this._ident,"HOOK",y)}put(w,y,o){if(this._active.length)for(let u=this._active.length-1;u>=0;u--)this._active[u].put(w,y,o);else this._handlerFb(this._ident,"PUT",(0,h.utf32ToString)(w,y,o))}unhook(w,y=!0){if(this._active.length){let o=!1,u=this._active.length-1,l=!1;if(this._stack.paused&&(u=this._stack.loopPosition-1,o=y,l=this._stack.fallThrough,this._stack.paused=!1),!l&&o===!1){for(;u>=0&&(o=this._active[u].unhook(w),o!==!0);u--)if(o instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=u,this._stack.fallThrough=!1,o;u--}for(;u>=0;u--)if(o=this._active[u].unhook(!1),o instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=u,this._stack.fallThrough=!0,o}else this._handlerFb(this._ident,"UNHOOK",w);this._active=_,this._ident=0}};const m=new f.Params;m.addParam(0),r.DcsHandler=class{constructor(w){this._handler=w,this._data="",this._params=m,this._hitLimit=!1}hook(w){this._params=w.length>1||w.params[0]?w.clone():m,this._data="",this._hitLimit=!1}put(w,y,o){this._hitLimit||(this._data+=(0,h.utf32ToString)(w,y,o),this._data.length>a.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(w){let y=!1;if(this._hitLimit)y=!1;else if(w&&(y=this._handler(this._data,this._params),y instanceof Promise))return y.then((o=>(this._params=m,this._data="",this._hitLimit=!1,o)));return this._params=m,this._data="",this._hitLimit=!1,y}}},2015:(v,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.EscapeSequenceParser=r.VT500_TRANSITION_TABLE=r.TransitionTable=void 0;const h=n(844),f=n(8742),a=n(6242),_=n(6351);class m{constructor(u){this.table=new Uint8Array(u)}setDefault(u,l){this.table.fill(u<<4|l)}add(u,l,d,p){this.table[l<<8|u]=d<<4|p}addMany(u,l,d,p){for(let b=0;b<u.length;b++)this.table[l<<8|u[b]]=d<<4|p}}r.TransitionTable=m;const w=160;r.VT500_TRANSITION_TABLE=(function(){const o=new m(4095),u=Array.apply(null,Array(256)).map(((x,S)=>S)),l=(x,S)=>u.slice(x,S),d=l(32,127),p=l(0,24);p.push(25),p.push.apply(p,l(28,32));const b=l(0,14);let E;for(E in o.setDefault(1,0),o.addMany(d,0,2,0),b)o.addMany([24,26,153,154],E,3,0),o.addMany(l(128,144),E,3,0),o.addMany(l(144,152),E,3,0),o.add(156,E,0,0),o.add(27,E,11,1),o.add(157,E,4,8),o.addMany([152,158,159],E,0,7),o.add(155,E,11,3),o.add(144,E,11,9);return o.addMany(p,0,3,0),o.addMany(p,1,3,1),o.add(127,1,0,1),o.addMany(p,8,0,8),o.addMany(p,3,3,3),o.add(127,3,0,3),o.addMany(p,4,3,4),o.add(127,4,0,4),o.addMany(p,6,3,6),o.addMany(p,5,3,5),o.add(127,5,0,5),o.addMany(p,2,3,2),o.add(127,2,0,2),o.add(93,1,4,8),o.addMany(d,8,5,8),o.add(127,8,5,8),o.addMany([156,27,24,26,7],8,6,0),o.addMany(l(28,32),8,0,8),o.addMany([88,94,95],1,0,7),o.addMany(d,7,0,7),o.addMany(p,7,0,7),o.add(156,7,0,0),o.add(127,7,0,7),o.add(91,1,11,3),o.addMany(l(64,127),3,7,0),o.addMany(l(48,60),3,8,4),o.addMany([60,61,62,63],3,9,4),o.addMany(l(48,60),4,8,4),o.addMany(l(64,127),4,7,0),o.addMany([60,61,62,63],4,0,6),o.addMany(l(32,64),6,0,6),o.add(127,6,0,6),o.addMany(l(64,127),6,0,0),o.addMany(l(32,48),3,9,5),o.addMany(l(32,48),5,9,5),o.addMany(l(48,64),5,0,6),o.addMany(l(64,127),5,7,0),o.addMany(l(32,48),4,9,5),o.addMany(l(32,48),1,9,2),o.addMany(l(32,48),2,9,2),o.addMany(l(48,127),2,10,0),o.addMany(l(48,80),1,10,0),o.addMany(l(81,88),1,10,0),o.addMany([89,90,92],1,10,0),o.addMany(l(96,127),1,10,0),o.add(80,1,11,9),o.addMany(p,9,0,9),o.add(127,9,0,9),o.addMany(l(28,32),9,0,9),o.addMany(l(32,48),9,9,12),o.addMany(l(48,60),9,8,10),o.addMany([60,61,62,63],9,9,10),o.addMany(p,11,0,11),o.addMany(l(32,128),11,0,11),o.addMany(l(28,32),11,0,11),o.addMany(p,10,0,10),o.add(127,10,0,10),o.addMany(l(28,32),10,0,10),o.addMany(l(48,60),10,8,10),o.addMany([60,61,62,63],10,0,11),o.addMany(l(32,48),10,9,12),o.addMany(p,12,0,12),o.add(127,12,0,12),o.addMany(l(28,32),12,0,12),o.addMany(l(32,48),12,9,12),o.addMany(l(48,64),12,0,11),o.addMany(l(64,127),12,12,13),o.addMany(l(64,127),10,12,13),o.addMany(l(64,127),9,12,13),o.addMany(p,13,13,13),o.addMany(d,13,13,13),o.add(127,13,0,13),o.addMany([27,156,24,26],13,14,0),o.add(w,0,2,0),o.add(w,8,5,8),o.add(w,6,0,6),o.add(w,11,0,11),o.add(w,13,13,13),o})();class y extends h.Disposable{constructor(u=r.VT500_TRANSITION_TABLE){super(),this._transitions=u,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new f.Params,this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._printHandlerFb=(l,d,p)=>{},this._executeHandlerFb=l=>{},this._csiHandlerFb=(l,d)=>{},this._escHandlerFb=l=>{},this._errorHandlerFb=l=>l,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,h.toDisposable)((()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)}))),this._oscParser=this.register(new a.OscParser),this._dcsParser=this.register(new _.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},(()=>!0))}_identifier(u,l=[64,126]){let d=0;if(u.prefix){if(u.prefix.length>1)throw new Error("only one byte as prefix supported");if(d=u.prefix.charCodeAt(0),d&&60>d||d>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(u.intermediates){if(u.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let b=0;b<u.intermediates.length;++b){const E=u.intermediates.charCodeAt(b);if(32>E||E>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");d<<=8,d|=E}}if(u.final.length!==1)throw new Error("final must be a single byte");const p=u.final.charCodeAt(0);if(l[0]>p||p>l[1])throw new Error(`final must be in range ${l[0]} .. ${l[1]}`);return d<<=8,d|=p,d}identToString(u){const l=[];for(;u;)l.push(String.fromCharCode(255&u)),u>>=8;return l.reverse().join("")}setPrintHandler(u){this._printHandler=u}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(u,l){const d=this._identifier(u,[48,126]);this._escHandlers[d]===void 0&&(this._escHandlers[d]=[]);const p=this._escHandlers[d];return p.push(l),{dispose:()=>{const b=p.indexOf(l);b!==-1&&p.splice(b,1)}}}clearEscHandler(u){this._escHandlers[this._identifier(u,[48,126])]&&delete this._escHandlers[this._identifier(u,[48,126])]}setEscHandlerFallback(u){this._escHandlerFb=u}setExecuteHandler(u,l){this._executeHandlers[u.charCodeAt(0)]=l}clearExecuteHandler(u){this._executeHandlers[u.charCodeAt(0)]&&delete this._executeHandlers[u.charCodeAt(0)]}setExecuteHandlerFallback(u){this._executeHandlerFb=u}registerCsiHandler(u,l){const d=this._identifier(u);this._csiHandlers[d]===void 0&&(this._csiHandlers[d]=[]);const p=this._csiHandlers[d];return p.push(l),{dispose:()=>{const b=p.indexOf(l);b!==-1&&p.splice(b,1)}}}clearCsiHandler(u){this._csiHandlers[this._identifier(u)]&&delete this._csiHandlers[this._identifier(u)]}setCsiHandlerFallback(u){this._csiHandlerFb=u}registerDcsHandler(u,l){return this._dcsParser.registerHandler(this._identifier(u),l)}clearDcsHandler(u){this._dcsParser.clearHandler(this._identifier(u))}setDcsHandlerFallback(u){this._dcsParser.setHandlerFallback(u)}registerOscHandler(u,l){return this._oscParser.registerHandler(u,l)}clearOscHandler(u){this._oscParser.clearHandler(u)}setOscHandlerFallback(u){this._oscParser.setHandlerFallback(u)}setErrorHandler(u){this._errorHandler=u}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(u,l,d,p,b){this._parseStack.state=u,this._parseStack.handlers=l,this._parseStack.handlerPos=d,this._parseStack.transition=p,this._parseStack.chunkPos=b}parse(u,l,d){let p,b=0,E=0,x=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,x=this._parseStack.chunkPos+1;else{if(d===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const S=this._parseStack.handlers;let k=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(d===!1&&k>-1){for(;k>=0&&(p=S[k](this._params),p!==!0);k--)if(p instanceof Promise)return this._parseStack.handlerPos=k,p}this._parseStack.handlers=[];break;case 4:if(d===!1&&k>-1){for(;k>=0&&(p=S[k](),p!==!0);k--)if(p instanceof Promise)return this._parseStack.handlerPos=k,p}this._parseStack.handlers=[];break;case 6:if(b=u[this._parseStack.chunkPos],p=this._dcsParser.unhook(b!==24&&b!==26,d),p)return p;b===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(b=u[this._parseStack.chunkPos],p=this._oscParser.end(b!==24&&b!==26,d),p)return p;b===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,x=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(let S=x;S<l;++S){switch(b=u[S],E=this._transitions.table[this.currentState<<8|(b<160?b:w)],E>>4){case 2:for(let I=S+1;;++I){if(I>=l||(b=u[I])<32||b>126&&b<w){this._printHandler(u,S,I),S=I-1;break}if(++I>=l||(b=u[I])<32||b>126&&b<w){this._printHandler(u,S,I),S=I-1;break}if(++I>=l||(b=u[I])<32||b>126&&b<w){this._printHandler(u,S,I),S=I-1;break}if(++I>=l||(b=u[I])<32||b>126&&b<w){this._printHandler(u,S,I),S=I-1;break}}break;case 3:this._executeHandlers[b]?this._executeHandlers[b]():this._executeHandlerFb(b),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:S,code:b,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const k=this._csiHandlers[this._collect<<8|b];let D=k?k.length-1:-1;for(;D>=0&&(p=k[D](this._params),p!==!0);D--)if(p instanceof Promise)return this._preserveStack(3,k,D,E,S),p;D<0&&this._csiHandlerFb(this._collect<<8|b,this._params),this.precedingCodepoint=0;break;case 8:do switch(b){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(b-48)}while(++S<l&&(b=u[S])>47&&b<60);S--;break;case 9:this._collect<<=8,this._collect|=b;break;case 10:const H=this._escHandlers[this._collect<<8|b];let T=H?H.length-1:-1;for(;T>=0&&(p=H[T](),p!==!0);T--)if(p instanceof Promise)return this._preserveStack(4,H,T,E,S),p;T<0&&this._escHandlerFb(this._collect<<8|b),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|b,this._params);break;case 13:for(let I=S+1;;++I)if(I>=l||(b=u[I])===24||b===26||b===27||b>127&&b<w){this._dcsParser.put(u,S,I),S=I-1;break}break;case 14:if(p=this._dcsParser.unhook(b!==24&&b!==26),p)return this._preserveStack(6,[],0,E,S),p;b===27&&(E|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(let I=S+1;;I++)if(I>=l||(b=u[I])<32||b>127&&b<w){this._oscParser.put(u,S,I),S=I-1;break}break;case 6:if(p=this._oscParser.end(b!==24&&b!==26),p)return this._preserveStack(5,[],0,E,S),p;b===27&&(E|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&E}}}r.EscapeSequenceParser=y},6242:(v,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.OscHandler=r.OscParser=void 0;const h=n(5770),f=n(482),a=[];r.OscParser=class{constructor(){this._state=0,this._active=a,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(_,m){this._handlers[_]===void 0&&(this._handlers[_]=[]);const w=this._handlers[_];return w.push(m),{dispose:()=>{const y=w.indexOf(m);y!==-1&&w.splice(y,1)}}}clearHandler(_){this._handlers[_]&&delete this._handlers[_]}setHandlerFallback(_){this._handlerFb=_}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=a}reset(){if(this._state===2)for(let _=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;_>=0;--_)this._active[_].end(!1);this._stack.paused=!1,this._active=a,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||a,this._active.length)for(let _=this._active.length-1;_>=0;_--)this._active[_].start();else this._handlerFb(this._id,"START")}_put(_,m,w){if(this._active.length)for(let y=this._active.length-1;y>=0;y--)this._active[y].put(_,m,w);else this._handlerFb(this._id,"PUT",(0,f.utf32ToString)(_,m,w))}start(){this.reset(),this._state=1}put(_,m,w){if(this._state!==3){if(this._state===1)for(;m<w;){const y=_[m++];if(y===59){this._state=2,this._start();break}if(y<48||57<y)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+y-48}this._state===2&&w-m>0&&this._put(_,m,w)}}end(_,m=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let w=!1,y=this._active.length-1,o=!1;if(this._stack.paused&&(y=this._stack.loopPosition-1,w=m,o=this._stack.fallThrough,this._stack.paused=!1),!o&&w===!1){for(;y>=0&&(w=this._active[y].end(_),w!==!0);y--)if(w instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=y,this._stack.fallThrough=!1,w;y--}for(;y>=0;y--)if(w=this._active[y].end(!1),w instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=y,this._stack.fallThrough=!0,w}else this._handlerFb(this._id,"END",_);this._active=a,this._id=-1,this._state=0}}},r.OscHandler=class{constructor(_){this._handler=_,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(_,m,w){this._hitLimit||(this._data+=(0,f.utf32ToString)(_,m,w),this._data.length>h.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(_){let m=!1;if(this._hitLimit)m=!1;else if(_&&(m=this._handler(this._data),m instanceof Promise))return m.then((w=>(this._data="",this._hitLimit=!1,w)));return this._data="",this._hitLimit=!1,m}}},8742:(v,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.Params=void 0;const n=2147483647;class h{static fromArray(a){const _=new h;if(!a.length)return _;for(let m=Array.isArray(a[0])?1:0;m<a.length;++m){const w=a[m];if(Array.isArray(w))for(let y=0;y<w.length;++y)_.addSubParam(w[y]);else _.addParam(w)}return _}constructor(a=32,_=32){if(this.maxLength=a,this.maxSubParamsLength=_,_>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(a),this.length=0,this._subParams=new Int32Array(_),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(a),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const a=new h(this.maxLength,this.maxSubParamsLength);return a.params.set(this.params),a.length=this.length,a._subParams.set(this._subParams),a._subParamsLength=this._subParamsLength,a._subParamsIdx.set(this._subParamsIdx),a._rejectDigits=this._rejectDigits,a._rejectSubDigits=this._rejectSubDigits,a._digitIsSub=this._digitIsSub,a}toArray(){const a=[];for(let _=0;_<this.length;++_){a.push(this.params[_]);const m=this._subParamsIdx[_]>>8,w=255&this._subParamsIdx[_];w-m>0&&a.push(Array.prototype.slice.call(this._subParams,m,w))}return a}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(a){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(a<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=a>n?n:a}}addSubParam(a){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(a<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=a>n?n:a,this._subParamsIdx[this.length-1]++}}hasSubParams(a){return(255&this._subParamsIdx[a])-(this._subParamsIdx[a]>>8)>0}getSubParams(a){const _=this._subParamsIdx[a]>>8,m=255&this._subParamsIdx[a];return m-_>0?this._subParams.subarray(_,m):null}getSubParamsAll(){const a={};for(let _=0;_<this.length;++_){const m=this._subParamsIdx[_]>>8,w=255&this._subParamsIdx[_];w-m>0&&(a[_]=this._subParams.slice(m,w))}return a}addDigit(a){let _;if(this._rejectDigits||!(_=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const m=this._digitIsSub?this._subParams:this.params,w=m[_-1];m[_-1]=~w?Math.min(10*w+a,n):a}}r.Params=h},5741:(v,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.AddonManager=void 0,r.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let n=this._addons.length-1;n>=0;n--)this._addons[n].instance.dispose()}loadAddon(n,h){const f={instance:h,dispose:h.dispose,isDisposed:!1};this._addons.push(f),h.dispose=()=>this._wrappedAddonDispose(f),h.activate(n)}_wrappedAddonDispose(n){if(n.isDisposed)return;let h=-1;for(let f=0;f<this._addons.length;f++)if(this._addons[f]===n){h=f;break}if(h===-1)throw new Error("Could not dispose an addon that has not been loaded");n.isDisposed=!0,n.dispose.apply(n.instance),this._addons.splice(h,1)}}},8771:(v,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.BufferApiView=void 0;const h=n(3785),f=n(511);r.BufferApiView=class{constructor(a,_){this._buffer=a,this.type=_}init(a){return this._buffer=a,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(a){const _=this._buffer.lines.get(a);if(_)return new h.BufferLineApiView(_)}getNullCell(){return new f.CellData}}},3785:(v,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.BufferLineApiView=void 0;const h=n(511);r.BufferLineApiView=class{constructor(f){this._line=f}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(f,a){if(!(f<0||f>=this._line.length))return a?(this._line.loadCell(f,a),a):this._line.loadCell(f,new h.CellData)}translateToString(f,a,_){return this._line.translateToString(f,a,_)}}},8285:(v,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.BufferNamespaceApi=void 0;const h=n(8771),f=n(8460),a=n(844);class _ extends a.Disposable{constructor(w){super(),this._core=w,this._onBufferChange=this.register(new f.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new h.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new h.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate((()=>this._onBufferChange.fire(this.active)))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}r.BufferNamespaceApi=_},7975:(v,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.ParserApi=void 0,r.ParserApi=class{constructor(n){this._core=n}registerCsiHandler(n,h){return this._core.registerCsiHandler(n,(f=>h(f.toArray())))}addCsiHandler(n,h){return this.registerCsiHandler(n,h)}registerDcsHandler(n,h){return this._core.registerDcsHandler(n,((f,a)=>h(f,a.toArray())))}addDcsHandler(n,h){return this.registerDcsHandler(n,h)}registerEscHandler(n,h){return this._core.registerEscHandler(n,h)}addEscHandler(n,h){return this.registerEscHandler(n,h)}registerOscHandler(n,h){return this._core.registerOscHandler(n,h)}addOscHandler(n,h){return this.registerOscHandler(n,h)}}},7090:(v,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.UnicodeApi=void 0,r.UnicodeApi=class{constructor(n){this._core=n}register(n){this._core.unicodeService.register(n)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(n){this._core.unicodeService.activeVersion=n}}},744:function(v,r,n){var h=this&&this.__decorate||function(o,u,l,d){var p,b=arguments.length,E=b<3?u:d===null?d=Object.getOwnPropertyDescriptor(u,l):d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(o,u,l,d);else for(var x=o.length-1;x>=0;x--)(p=o[x])&&(E=(b<3?p(E):b>3?p(u,l,E):p(u,l))||E);return b>3&&E&&Object.defineProperty(u,l,E),E},f=this&&this.__param||function(o,u){return function(l,d){u(l,d,o)}};Object.defineProperty(r,"__esModule",{value:!0}),r.BufferService=r.MINIMUM_ROWS=r.MINIMUM_COLS=void 0;const a=n(8460),_=n(844),m=n(5295),w=n(2585);r.MINIMUM_COLS=2,r.MINIMUM_ROWS=1;let y=r.BufferService=class extends _.Disposable{get buffer(){return this.buffers.active}constructor(o){super(),this.isUserScrolling=!1,this._onResize=this.register(new a.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new a.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(o.rawOptions.cols||0,r.MINIMUM_COLS),this.rows=Math.max(o.rawOptions.rows||0,r.MINIMUM_ROWS),this.buffers=this.register(new m.BufferSet(o,this))}resize(o,u){this.cols=o,this.rows=u,this.buffers.resize(o,u),this._onResize.fire({cols:o,rows:u})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(o,u=!1){const l=this.buffer;let d;d=this._cachedBlankLine,d&&d.length===this.cols&&d.getFg(0)===o.fg&&d.getBg(0)===o.bg||(d=l.getBlankLine(o,u),this._cachedBlankLine=d),d.isWrapped=u;const p=l.ybase+l.scrollTop,b=l.ybase+l.scrollBottom;if(l.scrollTop===0){const E=l.lines.isFull;b===l.lines.length-1?E?l.lines.recycle().copyFrom(d):l.lines.push(d.clone()):l.lines.splice(b+1,0,d.clone()),E?this.isUserScrolling&&(l.ydisp=Math.max(l.ydisp-1,0)):(l.ybase++,this.isUserScrolling||l.ydisp++)}else{const E=b-p+1;l.lines.shiftElements(p+1,E-1,-1),l.lines.set(b,d.clone())}this.isUserScrolling||(l.ydisp=l.ybase),this._onScroll.fire(l.ydisp)}scrollLines(o,u,l){const d=this.buffer;if(o<0){if(d.ydisp===0)return;this.isUserScrolling=!0}else o+d.ydisp>=d.ybase&&(this.isUserScrolling=!1);const p=d.ydisp;d.ydisp=Math.max(Math.min(d.ydisp+o,d.ybase),0),p!==d.ydisp&&(u||this._onScroll.fire(d.ydisp))}};r.BufferService=y=h([f(0,w.IOptionsService)],y)},7994:(v,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.CharsetService=void 0,r.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(n){this.glevel=n,this.charset=this._charsets[n]}setgCharset(n,h){this._charsets[n]=h,this.glevel===n&&(this.charset=h)}}},1753:function(v,r,n){var h=this&&this.__decorate||function(d,p,b,E){var x,S=arguments.length,k=S<3?p:E===null?E=Object.getOwnPropertyDescriptor(p,b):E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(d,p,b,E);else for(var D=d.length-1;D>=0;D--)(x=d[D])&&(k=(S<3?x(k):S>3?x(p,b,k):x(p,b))||k);return S>3&&k&&Object.defineProperty(p,b,k),k},f=this&&this.__param||function(d,p){return function(b,E){p(b,E,d)}};Object.defineProperty(r,"__esModule",{value:!0}),r.CoreMouseService=void 0;const a=n(2585),_=n(8460),m=n(844),w={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:d=>d.button!==4&&d.action===1&&(d.ctrl=!1,d.alt=!1,d.shift=!1,!0)},VT200:{events:19,restrict:d=>d.action!==32},DRAG:{events:23,restrict:d=>d.action!==32||d.button!==3},ANY:{events:31,restrict:d=>!0}};function y(d,p){let b=(d.ctrl?16:0)|(d.shift?4:0)|(d.alt?8:0);return d.button===4?(b|=64,b|=d.action):(b|=3&d.button,4&d.button&&(b|=64),8&d.button&&(b|=128),d.action===32?b|=32:d.action!==0||p||(b|=3)),b}const o=String.fromCharCode,u={DEFAULT:d=>{const p=[y(d,!1)+32,d.col+32,d.row+32];return p[0]>255||p[1]>255||p[2]>255?"":`\x1B[M${o(p[0])}${o(p[1])}${o(p[2])}`},SGR:d=>{const p=d.action===0&&d.button!==4?"m":"M";return`\x1B[<${y(d,!0)};${d.col};${d.row}${p}`},SGR_PIXELS:d=>{const p=d.action===0&&d.button!==4?"m":"M";return`\x1B[<${y(d,!0)};${d.x};${d.y}${p}`}};let l=r.CoreMouseService=class extends m.Disposable{constructor(d,p){super(),this._bufferService=d,this._coreService=p,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new _.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const b of Object.keys(w))this.addProtocol(b,w[b]);for(const b of Object.keys(u))this.addEncoding(b,u[b]);this.reset()}addProtocol(d,p){this._protocols[d]=p}addEncoding(d,p){this._encodings[d]=p}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(d){if(!this._protocols[d])throw new Error(`unknown protocol "${d}"`);this._activeProtocol=d,this._onProtocolChange.fire(this._protocols[d].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(d){if(!this._encodings[d])throw new Error(`unknown encoding "${d}"`);this._activeEncoding=d}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(d){if(d.col<0||d.col>=this._bufferService.cols||d.row<0||d.row>=this._bufferService.rows||d.button===4&&d.action===32||d.button===3&&d.action!==32||d.button!==4&&(d.action===2||d.action===3)||(d.col++,d.row++,d.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,d,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(d))return!1;const p=this._encodings[this._activeEncoding](d);return p&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(p):this._coreService.triggerDataEvent(p,!0)),this._lastEvent=d,!0}explainEvents(d){return{down:!!(1&d),up:!!(2&d),drag:!!(4&d),move:!!(8&d),wheel:!!(16&d)}}_equalEvents(d,p,b){if(b){if(d.x!==p.x||d.y!==p.y)return!1}else if(d.col!==p.col||d.row!==p.row)return!1;return d.button===p.button&&d.action===p.action&&d.ctrl===p.ctrl&&d.alt===p.alt&&d.shift===p.shift}};r.CoreMouseService=l=h([f(0,a.IBufferService),f(1,a.ICoreService)],l)},6975:function(v,r,n){var h=this&&this.__decorate||function(l,d,p,b){var E,x=arguments.length,S=x<3?d:b===null?b=Object.getOwnPropertyDescriptor(d,p):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")S=Reflect.decorate(l,d,p,b);else for(var k=l.length-1;k>=0;k--)(E=l[k])&&(S=(x<3?E(S):x>3?E(d,p,S):E(d,p))||S);return x>3&&S&&Object.defineProperty(d,p,S),S},f=this&&this.__param||function(l,d){return function(p,b){d(p,b,l)}};Object.defineProperty(r,"__esModule",{value:!0}),r.CoreService=void 0;const a=n(1439),_=n(8460),m=n(844),w=n(2585),y=Object.freeze({insertMode:!1}),o=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let u=r.CoreService=class extends m.Disposable{constructor(l,d,p){super(),this._bufferService=l,this._logService=d,this._optionsService=p,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new _.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new _.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new _.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new _.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,a.clone)(y),this.decPrivateModes=(0,a.clone)(o)}reset(){this.modes=(0,a.clone)(y),this.decPrivateModes=(0,a.clone)(o)}triggerDataEvent(l,d=!1){if(this._optionsService.rawOptions.disableStdin)return;const p=this._bufferService.buffer;d&&this._optionsService.rawOptions.scrollOnUserInput&&p.ybase!==p.ydisp&&this._onRequestScrollToBottom.fire(),d&&this._onUserInput.fire(),this._logService.debug(`sending data "${l}"`,(()=>l.split("").map((b=>b.charCodeAt(0))))),this._onData.fire(l)}triggerBinaryEvent(l){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${l}"`,(()=>l.split("").map((d=>d.charCodeAt(0))))),this._onBinary.fire(l))}};r.CoreService=u=h([f(0,w.IBufferService),f(1,w.ILogService),f(2,w.IOptionsService)],u)},9074:(v,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.DecorationService=void 0;const h=n(8055),f=n(8460),a=n(844),_=n(6106);let m=0,w=0;class y extends a.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new _.SortedList((l=>l?.marker.line)),this._onDecorationRegistered=this.register(new f.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new f.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,a.toDisposable)((()=>this.reset())))}registerDecoration(l){if(l.marker.isDisposed)return;const d=new o(l);if(d){const p=d.marker.onDispose((()=>d.dispose()));d.onDispose((()=>{d&&(this._decorations.delete(d)&&this._onDecorationRemoved.fire(d),p.dispose())})),this._decorations.insert(d),this._onDecorationRegistered.fire(d)}return d}reset(){for(const l of this._decorations.values())l.dispose();this._decorations.clear()}*getDecorationsAtCell(l,d,p){var b,E,x;let S=0,k=0;for(const D of this._decorations.getKeyIterator(d))S=(b=D.options.x)!==null&&b!==void 0?b:0,k=S+((E=D.options.width)!==null&&E!==void 0?E:1),l>=S&&l<k&&(!p||((x=D.options.layer)!==null&&x!==void 0?x:"bottom")===p)&&(yield D)}forEachDecorationAtCell(l,d,p,b){this._decorations.forEachByKey(d,(E=>{var x,S,k;m=(x=E.options.x)!==null&&x!==void 0?x:0,w=m+((S=E.options.width)!==null&&S!==void 0?S:1),l>=m&&l<w&&(!p||((k=E.options.layer)!==null&&k!==void 0?k:"bottom")===p)&&b(E)}))}}r.DecorationService=y;class o extends a.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=h.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=h.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(l){super(),this.options=l,this.onRenderEmitter=this.register(new f.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new f.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=l.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(v,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.InstantiationService=r.ServiceCollection=void 0;const h=n(2585),f=n(8343);class a{constructor(...m){this._entries=new Map;for(const[w,y]of m)this.set(w,y)}set(m,w){const y=this._entries.get(m);return this._entries.set(m,w),y}forEach(m){for(const[w,y]of this._entries.entries())m(w,y)}has(m){return this._entries.has(m)}get(m){return this._entries.get(m)}}r.ServiceCollection=a,r.InstantiationService=class{constructor(){this._services=new a,this._services.set(h.IInstantiationService,this)}setService(_,m){this._services.set(_,m)}getService(_){return this._services.get(_)}createInstance(_,...m){const w=(0,f.getServiceDependencies)(_).sort(((u,l)=>u.index-l.index)),y=[];for(const u of w){const l=this._services.get(u.id);if(!l)throw new Error(`[createInstance] ${_.name} depends on UNKNOWN service ${u.id}.`);y.push(l)}const o=w.length>0?w[0].index:m.length;if(m.length!==o)throw new Error(`[createInstance] First service dependency of ${_.name} at position ${o+1} conflicts with ${m.length} static arguments`);return new _(...m,...y)}}},7866:function(v,r,n){var h=this&&this.__decorate||function(o,u,l,d){var p,b=arguments.length,E=b<3?u:d===null?d=Object.getOwnPropertyDescriptor(u,l):d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(o,u,l,d);else for(var x=o.length-1;x>=0;x--)(p=o[x])&&(E=(b<3?p(E):b>3?p(u,l,E):p(u,l))||E);return b>3&&E&&Object.defineProperty(u,l,E),E},f=this&&this.__param||function(o,u){return function(l,d){u(l,d,o)}};Object.defineProperty(r,"__esModule",{value:!0}),r.traceCall=r.setTraceLogger=r.LogService=void 0;const a=n(844),_=n(2585),m={trace:_.LogLevelEnum.TRACE,debug:_.LogLevelEnum.DEBUG,info:_.LogLevelEnum.INFO,warn:_.LogLevelEnum.WARN,error:_.LogLevelEnum.ERROR,off:_.LogLevelEnum.OFF};let w,y=r.LogService=class extends a.Disposable{get logLevel(){return this._logLevel}constructor(o){super(),this._optionsService=o,this._logLevel=_.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",(()=>this._updateLogLevel()))),w=this}_updateLogLevel(){this._logLevel=m[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(o){for(let u=0;u<o.length;u++)typeof o[u]=="function"&&(o[u]=o[u]())}_log(o,u,l){this._evalLazyOptionalParams(l),o.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+u,...l)}trace(o,...u){var l,d;this._logLevel<=_.LogLevelEnum.TRACE&&this._log((d=(l=this._optionsService.options.logger)===null||l===void 0?void 0:l.trace.bind(this._optionsService.options.logger))!==null&&d!==void 0?d:console.log,o,u)}debug(o,...u){var l,d;this._logLevel<=_.LogLevelEnum.DEBUG&&this._log((d=(l=this._optionsService.options.logger)===null||l===void 0?void 0:l.debug.bind(this._optionsService.options.logger))!==null&&d!==void 0?d:console.log,o,u)}info(o,...u){var l,d;this._logLevel<=_.LogLevelEnum.INFO&&this._log((d=(l=this._optionsService.options.logger)===null||l===void 0?void 0:l.info.bind(this._optionsService.options.logger))!==null&&d!==void 0?d:console.info,o,u)}warn(o,...u){var l,d;this._logLevel<=_.LogLevelEnum.WARN&&this._log((d=(l=this._optionsService.options.logger)===null||l===void 0?void 0:l.warn.bind(this._optionsService.options.logger))!==null&&d!==void 0?d:console.warn,o,u)}error(o,...u){var l,d;this._logLevel<=_.LogLevelEnum.ERROR&&this._log((d=(l=this._optionsService.options.logger)===null||l===void 0?void 0:l.error.bind(this._optionsService.options.logger))!==null&&d!==void 0?d:console.error,o,u)}};r.LogService=y=h([f(0,_.IOptionsService)],y),r.setTraceLogger=function(o){w=o},r.traceCall=function(o,u,l){if(typeof l.value!="function")throw new Error("not supported");const d=l.value;l.value=function(...p){if(w.logLevel!==_.LogLevelEnum.TRACE)return d.apply(this,p);w.trace(`GlyphRenderer#${d.name}(${p.map((E=>JSON.stringify(E))).join(", ")})`);const b=d.apply(this,p);return w.trace(`GlyphRenderer#${d.name} return`,b),b}}},7302:(v,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.OptionsService=r.DEFAULT_OPTIONS=void 0;const h=n(8460),f=n(844),a=n(6114);r.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:a.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const _=["normal","bold","100","200","300","400","500","600","700","800","900"];class m extends f.Disposable{constructor(y){super(),this._onOptionChange=this.register(new h.EventEmitter),this.onOptionChange=this._onOptionChange.event;const o=Object.assign({},r.DEFAULT_OPTIONS);for(const u in y)if(u in o)try{const l=y[u];o[u]=this._sanitizeAndValidateOption(u,l)}catch(l){console.error(l)}this.rawOptions=o,this.options=Object.assign({},o),this._setupOptions()}onSpecificOptionChange(y,o){return this.onOptionChange((u=>{u===y&&o(this.rawOptions[y])}))}onMultipleOptionChange(y,o){return this.onOptionChange((u=>{y.indexOf(u)!==-1&&o()}))}_setupOptions(){const y=u=>{if(!(u in r.DEFAULT_OPTIONS))throw new Error(`No option with key "${u}"`);return this.rawOptions[u]},o=(u,l)=>{if(!(u in r.DEFAULT_OPTIONS))throw new Error(`No option with key "${u}"`);l=this._sanitizeAndValidateOption(u,l),this.rawOptions[u]!==l&&(this.rawOptions[u]=l,this._onOptionChange.fire(u))};for(const u in this.rawOptions){const l={get:y.bind(this,u),set:o.bind(this,u)};Object.defineProperty(this.options,u,l)}}_sanitizeAndValidateOption(y,o){switch(y){case"cursorStyle":if(o||(o=r.DEFAULT_OPTIONS[y]),!(function(u){return u==="block"||u==="underline"||u==="bar"})(o))throw new Error(`"${o}" is not a valid value for ${y}`);break;case"wordSeparator":o||(o=r.DEFAULT_OPTIONS[y]);break;case"fontWeight":case"fontWeightBold":if(typeof o=="number"&&1<=o&&o<=1e3)break;o=_.includes(o)?o:r.DEFAULT_OPTIONS[y];break;case"cursorWidth":o=Math.floor(o);case"lineHeight":case"tabStopWidth":if(o<1)throw new Error(`${y} cannot be less than 1, value: ${o}`);break;case"minimumContrastRatio":o=Math.max(1,Math.min(21,Math.round(10*o)/10));break;case"scrollback":if((o=Math.min(o,4294967295))<0)throw new Error(`${y} cannot be less than 0, value: ${o}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(o<=0)throw new Error(`${y} cannot be less than or equal to 0, value: ${o}`);break;case"rows":case"cols":if(!o&&o!==0)throw new Error(`${y} must be numeric, value: ${o}`);break;case"windowsPty":o=o??{}}return o}}r.OptionsService=m},2660:function(v,r,n){var h=this&&this.__decorate||function(m,w,y,o){var u,l=arguments.length,d=l<3?w:o===null?o=Object.getOwnPropertyDescriptor(w,y):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(m,w,y,o);else for(var p=m.length-1;p>=0;p--)(u=m[p])&&(d=(l<3?u(d):l>3?u(w,y,d):u(w,y))||d);return l>3&&d&&Object.defineProperty(w,y,d),d},f=this&&this.__param||function(m,w){return function(y,o){w(y,o,m)}};Object.defineProperty(r,"__esModule",{value:!0}),r.OscLinkService=void 0;const a=n(2585);let _=r.OscLinkService=class{constructor(m){this._bufferService=m,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(m){const w=this._bufferService.buffer;if(m.id===void 0){const p=w.addMarker(w.ybase+w.y),b={data:m,id:this._nextId++,lines:[p]};return p.onDispose((()=>this._removeMarkerFromLink(b,p))),this._dataByLinkId.set(b.id,b),b.id}const y=m,o=this._getEntryIdKey(y),u=this._entriesWithId.get(o);if(u)return this.addLineToLink(u.id,w.ybase+w.y),u.id;const l=w.addMarker(w.ybase+w.y),d={id:this._nextId++,key:this._getEntryIdKey(y),data:y,lines:[l]};return l.onDispose((()=>this._removeMarkerFromLink(d,l))),this._entriesWithId.set(d.key,d),this._dataByLinkId.set(d.id,d),d.id}addLineToLink(m,w){const y=this._dataByLinkId.get(m);if(y&&y.lines.every((o=>o.line!==w))){const o=this._bufferService.buffer.addMarker(w);y.lines.push(o),o.onDispose((()=>this._removeMarkerFromLink(y,o)))}}getLinkData(m){var w;return(w=this._dataByLinkId.get(m))===null||w===void 0?void 0:w.data}_getEntryIdKey(m){return`${m.id};;${m.uri}`}_removeMarkerFromLink(m,w){const y=m.lines.indexOf(w);y!==-1&&(m.lines.splice(y,1),m.lines.length===0&&(m.data.id!==void 0&&this._entriesWithId.delete(m.key),this._dataByLinkId.delete(m.id)))}};r.OscLinkService=_=h([f(0,a.IBufferService)],_)},8343:(v,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.createDecorator=r.getServiceDependencies=r.serviceRegistry=void 0;const n="di$target",h="di$dependencies";r.serviceRegistry=new Map,r.getServiceDependencies=function(f){return f[h]||[]},r.createDecorator=function(f){if(r.serviceRegistry.has(f))return r.serviceRegistry.get(f);const a=function(_,m,w){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(y,o,u){o[n]===o?o[h].push({id:y,index:u}):(o[h]=[{id:y,index:u}],o[n]=o)})(a,_,w)};return a.toString=()=>f,r.serviceRegistry.set(f,a),a}},2585:(v,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.IDecorationService=r.IUnicodeService=r.IOscLinkService=r.IOptionsService=r.ILogService=r.LogLevelEnum=r.IInstantiationService=r.ICharsetService=r.ICoreService=r.ICoreMouseService=r.IBufferService=void 0;const h=n(8343);var f;r.IBufferService=(0,h.createDecorator)("BufferService"),r.ICoreMouseService=(0,h.createDecorator)("CoreMouseService"),r.ICoreService=(0,h.createDecorator)("CoreService"),r.ICharsetService=(0,h.createDecorator)("CharsetService"),r.IInstantiationService=(0,h.createDecorator)("InstantiationService"),(function(a){a[a.TRACE=0]="TRACE",a[a.DEBUG=1]="DEBUG",a[a.INFO=2]="INFO",a[a.WARN=3]="WARN",a[a.ERROR=4]="ERROR",a[a.OFF=5]="OFF"})(f||(r.LogLevelEnum=f={})),r.ILogService=(0,h.createDecorator)("LogService"),r.IOptionsService=(0,h.createDecorator)("OptionsService"),r.IOscLinkService=(0,h.createDecorator)("OscLinkService"),r.IUnicodeService=(0,h.createDecorator)("UnicodeService"),r.IDecorationService=(0,h.createDecorator)("DecorationService")},1480:(v,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.UnicodeService=void 0;const h=n(8460),f=n(225);r.UnicodeService=class{constructor(){this._providers=Object.create(null),this._active="",this._onChange=new h.EventEmitter,this.onChange=this._onChange.event;const a=new f.UnicodeV6;this.register(a),this._active=a.version,this._activeProvider=a}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(a){if(!this._providers[a])throw new Error(`unknown Unicode version "${a}"`);this._active=a,this._activeProvider=this._providers[a],this._onChange.fire(a)}register(a){this._providers[a.version]=a}wcwidth(a){return this._activeProvider.wcwidth(a)}getStringCellWidth(a){let _=0;const m=a.length;for(let w=0;w<m;++w){let y=a.charCodeAt(w);if(55296<=y&&y<=56319){if(++w>=m)return _+this.wcwidth(y);const o=a.charCodeAt(w);56320<=o&&o<=57343?y=1024*(y-55296)+o-56320+65536:_+=this.wcwidth(o)}_+=this.wcwidth(y)}return _}}}},i={};function c(v){var r=i[v];if(r!==void 0)return r.exports;var n=i[v]={exports:{}};return s[v].call(n.exports,n,n.exports,c),n.exports}var g={};return(()=>{var v=g;Object.defineProperty(v,"__esModule",{value:!0}),v.Terminal=void 0;const r=c(9042),n=c(3236),h=c(844),f=c(5741),a=c(8285),_=c(7975),m=c(7090),w=["cols","rows"];class y extends h.Disposable{constructor(u){super(),this._core=this.register(new n.Terminal(u)),this._addonManager=this.register(new f.AddonManager),this._publicOptions=Object.assign({},this._core.options);const l=p=>this._core.options[p],d=(p,b)=>{this._checkReadonlyOptions(p),this._core.options[p]=b};for(const p in this._core.options){const b={get:l.bind(this,p),set:d.bind(this,p)};Object.defineProperty(this._publicOptions,p,b)}}_checkReadonlyOptions(u){if(w.includes(u))throw new Error(`Option "${u}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new _.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new m.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new a.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const u=this._core.coreService.decPrivateModes;let l="none";switch(this._core.coreMouseService.activeProtocol){case"X10":l="x10";break;case"VT200":l="vt200";break;case"DRAG":l="drag";break;case"ANY":l="any"}return{applicationCursorKeysMode:u.applicationCursorKeys,applicationKeypadMode:u.applicationKeypad,bracketedPasteMode:u.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:l,originMode:u.origin,reverseWraparoundMode:u.reverseWraparound,sendFocusMode:u.sendFocus,wraparoundMode:u.wraparound}}get options(){return this._publicOptions}set options(u){for(const l in u)this._publicOptions[l]=u[l]}blur(){this._core.blur()}focus(){this._core.focus()}resize(u,l){this._verifyIntegers(u,l),this._core.resize(u,l)}open(u){this._core.open(u)}attachCustomKeyEventHandler(u){this._core.attachCustomKeyEventHandler(u)}registerLinkProvider(u){return this._core.registerLinkProvider(u)}registerCharacterJoiner(u){return this._checkProposedApi(),this._core.registerCharacterJoiner(u)}deregisterCharacterJoiner(u){this._checkProposedApi(),this._core.deregisterCharacterJoiner(u)}registerMarker(u=0){return this._verifyIntegers(u),this._core.registerMarker(u)}registerDecoration(u){var l,d,p;return this._checkProposedApi(),this._verifyPositiveIntegers((l=u.x)!==null&&l!==void 0?l:0,(d=u.width)!==null&&d!==void 0?d:0,(p=u.height)!==null&&p!==void 0?p:0),this._core.registerDecoration(u)}hasSelection(){return this._core.hasSelection()}select(u,l,d){this._verifyIntegers(u,l,d),this._core.select(u,l,d)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(u,l){this._verifyIntegers(u,l),this._core.selectLines(u,l)}dispose(){super.dispose()}scrollLines(u){this._verifyIntegers(u),this._core.scrollLines(u)}scrollPages(u){this._verifyIntegers(u),this._core.scrollPages(u)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(u){this._verifyIntegers(u),this._core.scrollToLine(u)}clear(){this._core.clear()}write(u,l){this._core.write(u,l)}writeln(u,l){this._core.write(u),this._core.write(`\r
`,l)}paste(u){this._core.paste(u)}refresh(u,l){this._verifyIntegers(u,l),this._core.refresh(u,l)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(u){this._addonManager.loadAddon(this,u)}static get strings(){return r}_verifyIntegers(...u){for(const l of u)if(l===1/0||isNaN(l)||l%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...u){for(const l of u)if(l&&(l===1/0||isNaN(l)||l%1!=0||l<0))throw new Error("This API only accepts positive integers")}}v.Terminal=y})(),g})()))})(Fi)),Fi.exports}var Zf=Yf(),$i={exports:{}},Hn;function Qf(){return Hn||(Hn=1,(function(e,t){(function(s,i){e.exports=i()})(self,(()=>(()=>{var s={};return(()=>{var i=s;Object.defineProperty(i,"__esModule",{value:!0}),i.FitAddon=void 0,i.FitAddon=class{activate(c){this._terminal=c}dispose(){}fit(){const c=this.proposeDimensions();if(!c||!this._terminal||isNaN(c.cols)||isNaN(c.rows))return;const g=this._terminal._core;this._terminal.rows===c.rows&&this._terminal.cols===c.cols||(g._renderService.clear(),this._terminal.resize(c.cols,c.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const c=this._terminal._core,g=c._renderService.dimensions;if(g.css.cell.width===0||g.css.cell.height===0)return;const v=this._terminal.options.scrollback===0?0:c.viewport.scrollBarWidth,r=window.getComputedStyle(this._terminal.element.parentElement),n=parseInt(r.getPropertyValue("height")),h=Math.max(0,parseInt(r.getPropertyValue("width"))),f=window.getComputedStyle(this._terminal.element),a=n-(parseInt(f.getPropertyValue("padding-top"))+parseInt(f.getPropertyValue("padding-bottom"))),_=h-(parseInt(f.getPropertyValue("padding-right"))+parseInt(f.getPropertyValue("padding-left")))-v;return{cols:Math.max(2,Math.floor(_/g.css.cell.width)),rows:Math.max(1,Math.floor(a/g.css.cell.height))}}}})(),s})()))})($i)),$i.exports}var e_=Qf(),Ni={exports:{}},Fn;function t_(){return Fn||(Fn=1,(function(e,t){(function(s,i){e.exports=i()})(self,(()=>(()=>{var s={6:(v,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.LinkComputer=r.WebLinkProvider=void 0,r.WebLinkProvider=class{constructor(h,f,a,_={}){this._terminal=h,this._regex=f,this._handler=a,this._options=_}provideLinks(h,f){const a=n.computeLink(h,this._regex,this._terminal,this._handler);f(this._addCallbacks(a))}_addCallbacks(h){return h.map((f=>(f.leave=this._options.leave,f.hover=(a,_)=>{if(this._options.hover){const{range:m}=f;this._options.hover(a,_,m)}},f)))}};class n{static computeLink(f,a,_,m){const w=new RegExp(a.source,(a.flags||"")+"g"),[y,o]=n._getWindowedLineStrings(f-1,_),u=y.join("");let l;const d=[];for(;l=w.exec(u);){const p=l[0];try{const D=new URL(p),H=decodeURI(D.toString());if(p!==H&&p+"/"!==H)continue}catch{continue}const[b,E]=n._mapStrIdx(_,o,0,l.index),[x,S]=n._mapStrIdx(_,b,E,p.length);if(b===-1||E===-1||x===-1||S===-1)continue;const k={start:{x:E+1,y:b+1},end:{x:S,y:x+1}};d.push({range:k,text:p,activate:m})}return d}static _getWindowedLineStrings(f,a){let _,m=f,w=f,y=0,o="";const u=[];if(_=a.buffer.active.getLine(f)){const l=_.translateToString(!0);if(_.isWrapped&&l[0]!==" "){for(y=0;(_=a.buffer.active.getLine(--m))&&y<2048&&(o=_.translateToString(!0),y+=o.length,u.push(o),_.isWrapped&&o.indexOf(" ")===-1););u.reverse()}for(u.push(l),y=0;(_=a.buffer.active.getLine(++w))&&_.isWrapped&&y<2048&&(o=_.translateToString(!0),y+=o.length,u.push(o),o.indexOf(" ")===-1););}return[u,m]}static _mapStrIdx(f,a,_,m){const w=f.buffer.active,y=w.getNullCell();let o=_;for(;m;){const u=w.getLine(a);if(!u)return[-1,-1];for(let l=o;l<u.length;++l){u.getCell(l,y);const d=y.getChars();if(y.getWidth()&&(m-=d.length||1,l===u.length-1&&d==="")){const p=w.getLine(a+1);p&&p.isWrapped&&(p.getCell(0,y),y.getWidth()===2&&(m+=1))}if(m<0)return[a,l]}a++,o=0}return[a,o]}}r.LinkComputer=n}},i={};function c(v){var r=i[v];if(r!==void 0)return r.exports;var n=i[v]={exports:{}};return s[v](n,n.exports,c),n.exports}var g={};return(()=>{var v=g;Object.defineProperty(v,"__esModule",{value:!0}),v.WebLinksAddon=void 0;const r=c(6),n=/https?:[/]{2}[^\s"'!*(){}|\\\^<>`]*[^\s"':,.!?{}|\\\^~\[\]`()<>]/;function h(f,a){const _=window.open();if(_){try{_.opener=null}catch{}_.location.href=a}else console.warn("Opening link blocked as opener could not be cleared")}v.WebLinksAddon=class{constructor(f=h,a={}){this._handler=f,this._options=a}activate(f){this._terminal=f;const a=this._options,_=a.urlRegex||n;this._linkProvider=this._terminal.registerLinkProvider(new r.WebLinkProvider(this._terminal,_,this._handler,a))}dispose(){var f;(f=this._linkProvider)===null||f===void 0||f.dispose()}}})(),g})()))})(Ni)),Ni.exports}var s_=t_();const i_=nt({name:"Leccion",components:{Header:Ds,Footer:Ts},setup(){const e=gt();ea();const t=zs("https://sistema-de-aprendizaje-linux-production.up.railway.app"),s=de(null);let i=null,c=null;const g=de(!1),v=de("Conectando..."),r=de(!1),n=de(30),h=de({title:"Leccion 1: comandos basicos",challenge:{title:"Challenge 1: Change Directory",description:'Use the cd command to navigate to the "documents" directory. Type your command in the terminal and press "Run" to check your answer.',hint:"The command is cd documents",correctCommand:"cd documents",directory:"~"}});return Mt(async()=>{if(await _i(),!s.value)return;i=new Zf.Terminal({cursorBlink:!0,cursorStyle:"block",fontFamily:'"Ubuntu Mono", "Courier New", monospace',fontSize:15,lineHeight:1.4,theme:{background:"#300a24",foreground:"#d3d7cf",cursor:"#d3d7cf",cursorAccent:"#300a24",black:"#2e3436",red:"#cc0000",green:"#4e9a06",yellow:"#c4a000",blue:"#3465a4",magenta:"#75507b",cyan:"#06989a",white:"#d3d7cf",brightBlack:"#555753",brightRed:"#ef2929",brightGreen:"#8ae234",brightYellow:"#fce94f",brightBlue:"#729fcf",brightMagenta:"#ad7fa8",brightCyan:"#34e2e2",brightWhite:"#eeeeec"},allowProposedApi:!0}),c=new e_.FitAddon,i.loadAddon(c),i.loadAddon(new s_.WebLinksAddon),i.open(s.value),c.fit(),i.onData(l=>{t.emit("input",l)}),t.on("connect",()=>{g.value=!0,v.value="Terminal SSH",i?.writeln("\x1B[1;32m✓ Conectado al servidor SSH\x1B[0m")}),t.on("disconnect",()=>{g.value=!1,v.value="Desconectado",i?.writeln("\x1B[1;31m✗ Desconectado del servidor\x1B[0m")}),t.on("output",l=>{i?.write(l)});const u=()=>{c&&i&&(c.fit(),t.emit("resize",{cols:i.cols,rows:i.rows}))};window.addEventListener("resize",u),i&&t.emit("resize",{cols:i.cols,rows:i.rows}),yr(()=>{window.removeEventListener("resize",u),i?.dispose(),t.disconnect()})}),{terminalContainer:s,showHint:r,toggleHint:()=>{r.value=!r.value},progress:n,lesson:h,goBack:()=>e.push("/dashboard"),goInicio:()=>e.push("/dashboard"),goBiblioteca:()=>e.push("/biblioteca"),goRanking:()=>e.push("/ranking"),goConfig:()=>e.push("/configuracion"),isConnected:g,terminalTitle:v,clearTerminal:()=>{i?.clear()}}}}),r_={class:"leccion"},n_={class:"content"},o_={class:"lesson-header"},a_={class:"lesson-title"},l_={class:"lesson-content"},c_={class:"terminal-section"},h_={class:"terminal-wrapper"},u_={class:"terminal-header"},d_={class:"terminal-title"},f_={class:"connection-status"},__={ref:"terminalContainer",class:"terminal-container"},p_={class:"challenge-section"},g_={class:"challenge-panel"},v_={class:"challenge-title"},m_={class:"challenge-description"},S_={class:"hint-section"},b_={key:0,class:"hint"},y_={class:"progress-section"},C_={class:"progress-bar"},w_={class:"progress-text"};function E_(e,t,s,i,c,g){const v=Qe("Header"),r=Qe("Footer");return le(),ce("div",r_,[Ee(v),R("div",n_,[R("div",o_,[R("h1",a_,ve(e.lesson.title),1)]),R("div",l_,[R("div",c_,[R("div",h_,[R("div",u_,[t[1]||(t[1]=R("div",{class:"terminal-controls"},[R("span",{class:"control red"}),R("span",{class:"control yellow"}),R("span",{class:"control green"})],-1)),R("div",d_,ve(e.terminalTitle),1),R("div",f_,[R("span",{class:ut(["status-indicator",{connected:e.isConnected}])},null,2)])]),R("div",__,null,512)]),t[2]||(t[2]=R("div",{class:"terminal-help"},[R("span",{class:"help-item"},"Terminal real con soporte completo para nano, vim, htop y más")],-1))]),R("div",p_,[R("div",g_,[R("h2",v_,ve(e.lesson.challenge.title),1),R("p",m_,ve(e.lesson.challenge.description),1),R("div",S_,[R("button",{class:"hint-btn",onClick:t[0]||(t[0]=(...n)=>e.toggleHint&&e.toggleHint(...n))},ve(e.showHint?"Ocultar pista":"Mostrar pista")+" 💡 ",1),e.showHint?(le(),ce("div",b_,[t[3]||(t[3]=Ge(" Pista: El comando es ",-1)),R("code",null,ve(e.lesson.challenge.hint),1)])):Ct("",!0)])]),R("div",y_,[t[4]||(t[4]=R("div",{class:"progress-label"},"Progress",-1)),R("div",C_,[R("div",{class:"progress-fill",style:ci(`width: ${e.progress}%`)},null,4)]),R("div",w_,ve(e.progress)+"%",1)])])])]),Ee(r,{goInicio:e.goInicio,goBiblioteca:e.goBiblioteca,goRanking:e.goRanking,goConfig:e.goConfig},null,8,["goInicio","goBiblioteca","goRanking","goConfig"])])}const k_=Xe(i_,[["render",E_],["__scopeId","data-v-d5478c03"]]),x_="https://sistema-de-aprendizaje-linux-production.up.railway.app",R_={async create(e){const t=it.getToken(),s=await fetch(`${x_}/lessons`,{method:"POST",headers:{"Content-Type":"application/json",...t?{Authorization:`Bearer ${t}`}:{}},body:JSON.stringify(e)});if(!s.ok){const i=await s.text();throw new Error(`HTTP ${s.status}: ${i}`)}return s.json()}},A_={class:"modal-header"},L_={class:"modal-body"},D_={key:0},T_={class:"form-group"},B_={class:"form-group"},O_={class:"form-group"},P_={class:"form-group"},M_={key:1},I_={class:"form-group"},H_={class:"form-group"},F_={class:"form-group"},$_={class:"form-group"},N_={key:2,class:"confirm-delete"},U_={class:"modal-footer"},W_=nt({__name:"Modales",props:{visible:{type:Boolean},type:{},title:{},data:{}},emits:["close","save","confirmDelete"],setup(e,{emit:t}){const s=e,i=t,c=de({...s.data});gs(()=>s.data,n=>{c.value={...n}},{deep:!0});const g=()=>{i("save",c.value)},v=()=>{i("close")},r=()=>{i("confirmDelete")};return(n,h)=>e.visible?(le(),ce("div",{key:0,class:"modal-overlay",onClick:v},[R("div",{class:"modal-content",onClick:h[8]||(h[8]=Vt(()=>{},["stop"]))},[R("div",A_,[R("h3",null,ve(e.title),1),R("button",{class:"btn-close",onClick:v},"×")]),R("div",L_,[e.type==="usuario"?(le(),ce("div",D_,[R("div",T_,[h[9]||(h[9]=R("label",null,"Nombre",-1)),Re(R("input",{type:"text","onUpdate:modelValue":h[0]||(h[0]=f=>c.value.nombre=f),placeholder:"Ingrese el nombre",class:"form-input"},null,512),[[Le,c.value.nombre]])]),R("div",B_,[h[10]||(h[10]=R("label",null,"Correo",-1)),Re(R("input",{type:"email","onUpdate:modelValue":h[1]||(h[1]=f=>c.value.correo=f),placeholder:"Ingrese el correo",class:"form-input"},null,512),[[Le,c.value.correo]])]),R("div",O_,[h[12]||(h[12]=R("label",null,"Rol",-1)),Re(R("select",{"onUpdate:modelValue":h[2]||(h[2]=f=>c.value.rol=f),class:"form-select"},[...h[11]||(h[11]=[R("option",{value:"usuario"},"Usuario",-1),R("option",{value:"admin"},"Administrador",-1)])],512),[[un,c.value.rol]])]),R("div",P_,[h[14]||(h[14]=R("label",null,"Estado",-1)),Re(R("select",{"onUpdate:modelValue":h[3]||(h[3]=f=>c.value.estado=f),class:"form-select"},[...h[13]||(h[13]=[R("option",{value:"activo"},"Activo",-1),R("option",{value:"inactivo"},"Inactivo",-1)])],512),[[un,c.value.estado]])])])):Ct("",!0),e.type==="leccion"?(le(),ce("div",M_,[R("div",I_,[h[15]||(h[15]=R("label",null,"Título",-1)),Re(R("input",{type:"text","onUpdate:modelValue":h[4]||(h[4]=f=>c.value.titulo=f),placeholder:"Ingrese el título",class:"form-input"},null,512),[[Le,c.value.titulo]])]),R("div",H_,[h[16]||(h[16]=R("label",null,"Descripción",-1)),Re(R("textarea",{"onUpdate:modelValue":h[5]||(h[5]=f=>c.value.descripcion=f),placeholder:"Ingrese la descripción",rows:"3",class:"form-textarea"},null,512),[[Le,c.value.descripcion]])]),R("div",F_,[h[17]||(h[17]=R("label",null,"Comandos",-1)),Re(R("input",{type:"text","onUpdate:modelValue":h[6]||(h[6]=f=>c.value.comandos=f),placeholder:"Ingrese los comandos (separados por comas)",class:"form-input"},null,512),[[Le,c.value.comandos]])]),R("div",$_,[h[18]||(h[18]=R("label",null,"Retroalimentación",-1)),Re(R("textarea",{"onUpdate:modelValue":h[7]||(h[7]=f=>c.value.retroalimentacion=f),placeholder:"Ingrese la retroalimentación",rows:"3",class:"form-textarea"},null,512),[[Le,c.value.retroalimentacion]])])])):Ct("",!0),e.type==="eliminar"?(le(),ce("div",N_,[...h[19]||(h[19]=[R("p",null,"¿Está seguro de que desea eliminar este elemento?",-1),R("p",{class:"warning"},"Esta acción no se puede deshacer.",-1)])])):Ct("",!0)]),R("div",U_,[R("button",{class:"btn-cancel",onClick:v},"Cancelar"),e.type!=="eliminar"?(le(),ce("button",{key:0,class:"btn-save",onClick:g}," Guardar ")):(le(),ce("button",{key:1,class:"btn-delete-confirm",onClick:r}," Eliminar "))])])])):Ct("",!0)}}),j_=Xe(W_,[["__scopeId","data-v-306b552c"]]),q_={class:"admin"},z_={class:"admin-header"},K_={class:"user-info"},V_={class:"perfil"},G_=["src","alt"],X_={class:"sidebar"},J_={class:"content"},Y_={key:0,class:"users-section"},Z_={class:"search-container"},Q_={class:"table-container"},ep={class:"users-table"},tp={class:"nombre-col"},sp={class:"email-col"},ip={class:"actions-col"},rp=["onClick"],np=["onClick"],op={key:1,class:"lessons-section"},ap={class:"section-header"},lp={class:"lessons-list"},cp={class:"lesson-content"},hp={style:{display:"flex",gap:"8px"}},up=["onClick"],dp=["onClick"],fp={class:"modal-header"},_p={class:"modal-body"},pp={class:"form-group"},gp={class:"form-group"},vp={class:"form-group"},mp={class:"challenges-list"},Sp={style:{display:"flex",gap:"8px"}},bp=["onUpdate:modelValue"],yp=["onUpdate:modelValue"],Cp={style:{"margin-top":"8px",display:"flex",gap:"8px","align-items":"center"}},wp=["onUpdate:modelValue"],Ep={style:{"margin-top":"8px",display:"flex",gap:"8px"}},kp=["onClick"],xp=["onClick"],Rp={key:0,style:{"margin-top":"8px",display:"flex","flex-direction":"column",gap:"8px"}},Ap=["onUpdate:modelValue"],Lp=["onClick"],Dp={style:{"margin-top":"12px"}},Tp={key:0,style:{color:"#ffbdbd","margin-bottom":"8px"}},Bp={key:1,style:{color:"#bdf5bd","margin-bottom":"8px"}},Op={style:{display:"flex",gap:"8px","justify-content":"flex-end"}},Pp=["disabled"],Mp=nt({__name:"AdminDashboard",setup(e){const t=gt(),s=de("users"),i=de(""),c=de(!1),g=de("usuario"),v=de(""),r=de({});let n="usuarios",h=null;const f=de({username:"",correo:"",racha:0,experiencia:0,avatar:""}),a=de([]),_=de(!1),m=de([]),w=de(!1),y=de(!1),o=de({title:"",description:"",challenges:[{title:"",command:"",feedback:""}]}),u=We(()=>a.value.filter(q=>q.username.toLowerCase().includes(i.value.toLowerCase())||q.correo&&q.correo.toLowerCase().includes(i.value.toLowerCase()))),l=async()=>{_.value=!0;try{const q=await fetch("https://sistema-de-aprendizaje-linux-production.up.railway.app/users",{headers:{"Content-Type":"application/json"}});if(!q.ok)throw new Error(`Error HTTP: ${q.status}`);const W=await q.json();a.value=W.map(z=>({id:z.id_Usuario,nombre:z.username,username:z.username,email:z.correo,correo:z.correo,rol:z.rol==="usuario"?"Estudiante":z.rol==="admin"?"Administrador":z.rol,experiencia:z.experiencia||0,racha:z.racha||0,avatar:z.avatar||p(z.username),estado:z.activo?"Activo":"Inactivo"}))}catch(q){console.error("Error fetching users:",q),a.value=[]}finally{_.value=!1}},d=async()=>{w.value=!0;try{const q=await fetch("https://sistema-de-aprendizaje-linux-production.up.railway.app/lessons",{headers:{"Content-Type":"application/json"}});if(!q.ok)throw new Error(`Error HTTP: ${q.status}`);const W=await q.json();console.log("Lecciones recibidas de la API:",W),m.value=W.map(z=>({id:z.id_Leccion,titulo:z.Titulo,descripcion:"Descripción de "+z.Titulo})),console.log("Lecciones mapeadas:",m.value)}catch(q){console.error("Error fetching lessons:",q),m.value=[]}finally{w.value=!1}};Mt(async()=>{const q=localStorage.getItem("user");if(q){const W=JSON.parse(q);f.value.username=W.username,f.value.correo=W.correo,f.value.racha=W.racha||0,f.value.experiencia=W.experiencia||0,f.value.avatar=W.avatar}await l(),await d()});const p=q=>{const W=["FF6B6B","4ECDC4","45B7D1","FFA07A","98D8C8","F7DC6F","BB8FCE"],z=q.length%W.length;return`https://ui-avatars.com/api/?name=${q}&background=${W[z]}&color=fff&size=128&bold=true`},b=()=>{it.logout(),localStorage.removeItem("token"),localStorage.removeItem("user"),t.push("/")},E=()=>{v.value="Agregar Usuario",g.value="usuario",r.value={nombre:"",correo:"",rol:"usuario",estado:"activo"},n="usuarios",h=null,c.value=!0},x=q=>{const W=a.value.find(z=>z.id===q);W&&(v.value="Editar Usuario",g.value="usuario",r.value={nombre:W.nombre,correo:W.email,rol:W.rol.toLowerCase(),estado:W.estado.toLowerCase()},n="usuarios",h=q,c.value=!0)},S=q=>{const W=m.value.find(z=>z.id===q);W&&(v.value="Editar Lección",g.value="leccion",r.value={titulo:W.titulo,descripcion:W.descripcion,comandos:"",retroalimentacion:""},n="lecciones",h=q,c.value=!0)},k=q=>{const W=a.value.find(z=>z.id===q);W&&(v.value="Confirmar Eliminación",g.value="eliminar",r.value={nombre:W.nombre},n="usuarios",h=q,c.value=!0)},D=q=>{const W=m.value.find(z=>z.id===q);W&&(v.value="Confirmar Eliminación",g.value="eliminar",r.value={titulo:W.titulo},n="lecciones",h=q,c.value=!0)},H=()=>{c.value=!1,h=null},T=async q=>{try{if(n==="usuarios"){const W=h?`https://sistema-de-aprendizaje-linux-production.up.railway.app/users/${h}`:"https://sistema-de-aprendizaje-linux-production.up.railway.app/users";if(!(await fetch(W,{method:h?"PATCH":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:q.nombre,email:q.correo,rol:q.rol,activo:q.estado==="activo"})})).ok)throw new Error("Error al guardar usuario");await l(),alert(h?"Usuario actualizado correctamente":"Usuario creado correctamente")}else{const W=h?`https://sistema-de-aprendizaje-linux-production.up.railway.app/lessons/${h}`:"https://sistema-de-aprendizaje-linux-production.up.railway.app/lessons";if(!(await fetch(W,{method:h?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({Titulo:q.titulo,Descripcion:q.descripcion})})).ok)throw new Error("Error al guardar lección");await d(),alert(h?"Lección actualizada correctamente":"Lección creada correctamente")}H()}catch(W){console.error("Error guardando datos:",W),alert(`Error al guardar: ${W.message}`)}},I=async()=>{try{const q=n==="usuarios"?`https://sistema-de-aprendizaje-linux-production.up.railway.app/users/${h}`:`https://sistema-de-aprendizaje-linux-production.up.railway.app/lessons/${h}`;if(!(await fetch(q,{method:"DELETE"})).ok)throw new Error("Error al eliminar");n==="usuarios"?await l():await d(),alert("Eliminado correctamente"),H()}catch(q){console.error("Error eliminando:",q),alert(`Error al eliminar: ${q.message}`)}},V=()=>{o.value.challenges.push({title:"",command:"",feedback:""})},J=q=>{const W=o.value.challenges[q];W.commands||(W.commands=[]),W.commands.push({comando:""})},X=(q,W)=>{const z=o.value.challenges[q];!z||!z.commands||z.commands.splice(W,1)},K=q=>{o.value.challenges.splice(q,1)},A=de(!1),B=de(""),P=de(""),F=()=>({titulo:o.value.title,retos:o.value.challenges.map(q=>({descripcion:q.title,Retroalimentacion:q.feedback||null,comandos:(q.commands||(q.command?[{comando:q.command}]:[])).map(W=>({comando:W.comando??W.command}))}))}),Z=async()=>{if(B.value="",P.value="",!o.value.title||o.value.challenges.length===0){B.value="El título y al menos un reto son obligatorios.";return}A.value=!0;try{const q=F();await R_.create(q),P.value="Lección creada correctamente.",await d(),o.value={title:"",description:"",challenges:[{title:"",command:"",feedback:""}]},y.value=!1}catch(q){console.error("Error creating lesson:",q),B.value=q.message||"Error al crear la lección."}finally{A.value=!1}};return(q,W)=>(le(),ce("div",q_,[R("header",z_,[W[10]||(W[10]=R("div",{class:"brand"},[R("img",{src:"https://upload.wikimedia.org/wikipedia/commons/3/35/Tux.svg",alt:"Penguin",class:"logo-penguin"}),R("h1",null,"Penguin Path")],-1)),R("div",K_,[R("div",V_,[R("img",{src:f.value.avatar,alt:f.value.username,class:"user-avatar-header"},null,8,G_),R("span",null,ve(f.value.username),1)])])]),R("aside",X_,[R("nav",null,[R("button",{class:ut([{active:s.value==="users"},"nav-btn"]),onClick:W[0]||(W[0]=z=>s.value="users")},[...W[11]||(W[11]=[R("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[R("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),R("circle",{cx:"9",cy:"7",r:"4"})],-1),R("span",null,"Usuarios",-1)])],2),R("button",{class:ut([{active:s.value==="lessons"},"nav-btn"]),onClick:W[1]||(W[1]=z=>s.value="lessons")},[...W[12]||(W[12]=[R("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[R("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),R("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"})],-1),R("span",null,"Lecciones",-1)])],2)]),R("div",{class:"sidebar-footer"},[R("button",{class:"nav-btn config-btn",onClick:b},[...W[13]||(W[13]=[R("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[R("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),R("polyline",{points:"16 17 21 12 16 7"}),R("line",{x1:"21",y1:"12",x2:"9",y2:"12"})],-1),R("span",null,"Cerrar sesión",-1)])])])]),R("main",J_,[s.value==="users"?(le(),ce("section",Y_,[R("div",{class:"section-header"},[W[14]||(W[14]=R("h2",null,"Usuarios",-1)),R("button",{class:"btn-add",onClick:E},"Agregar usuario")]),R("div",Z_,[W[15]||(W[15]=R("svg",{class:"search-icon",xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[R("circle",{cx:"11",cy:"11",r:"8"}),R("path",{d:"m21 21-4.35-4.35"})],-1)),Re(R("input",{type:"text","onUpdate:modelValue":W[2]||(W[2]=z=>i.value=z),placeholder:"Buscar usuarios por nombre, correo...",class:"search-input"},null,512),[[Le,i.value]])]),R("div",Q_,[R("table",ep,[W[16]||(W[16]=R("thead",null,[R("tr",null,[R("th",null,"NOMBRE"),R("th",null,"CORREO ELECTRÓNICO"),R("th",null,"ROL"),R("th",null,"ESTADO"),R("th",null,"ACCIONES")])],-1)),R("tbody",null,[(le(!0),ce(Ie,null,Ut(u.value,z=>(le(),ce("tr",{key:z.id},[R("td",tp,ve(z.nombre),1),R("td",sp,ve(z.email),1),R("td",null,ve(z.rol),1),R("td",null,[R("span",{class:ut(["badge",z.estado==="Activo"?"badge-active":"badge-inactive"])},ve(z.estado),3)]),R("td",ip,[R("button",{class:"btn-action btn-edit",onClick:ue=>x(z.id)},"Editar",8,rp),R("button",{class:"btn-action btn-delete",onClick:ue=>k(z.id)},"Eliminar",8,np)])]))),128))])])])])):(le(),ce("section",op,[R("div",ap,[W[17]||(W[17]=R("h2",null,"Lecciones",-1)),R("button",{class:"btn-add",onClick:W[3]||(W[3]=z=>y.value=!0)},"Agregar Lección")]),R("div",lp,[(le(!0),ce(Ie,null,Ut(m.value,z=>(le(),ce("div",{key:z.id,class:"lesson-card"},[R("div",cp,[R("h3",null,ve(z.titulo),1),R("p",null,ve(z.descripcion),1)]),R("div",hp,[R("button",{class:"btn-action btn-edit",onClick:ue=>S(z.id),style:{padding:"6px 16px","border-radius":"6px"}},"Editar",8,up),R("button",{class:"btn-delete-lesson",onClick:ue=>D(z.id)},"Borrar",8,dp)])]))),128))])]))]),y.value?(le(),ce("div",{key:0,class:"modal-overlay",onClick:W[9]||(W[9]=z=>y.value=!1)},[R("div",{class:"modal-content",onClick:W[8]||(W[8]=Vt(()=>{},["stop"]))},[R("div",fp,[W[18]||(W[18]=R("h3",null,"Agregar Lección",-1)),R("button",{class:"btn-close",onClick:W[4]||(W[4]=z=>y.value=!1)},"×")]),R("div",_p,[R("div",pp,[W[19]||(W[19]=R("label",null,"Título",-1)),Re(R("input",{type:"text","onUpdate:modelValue":W[5]||(W[5]=z=>o.value.title=z),placeholder:"Dominando lineas de comando.",class:"form-input"},null,512),[[Le,o.value.title]])]),R("div",gp,[W[20]||(W[20]=R("label",null,"Descripción",-1)),Re(R("textarea",{"onUpdate:modelValue":W[6]||(W[6]=z=>o.value.description=z),placeholder:"Un pequeño resumen de que cubre la lección.",rows:"4",class:"form-textarea"},null,512),[[Le,o.value.description]])]),R("div",vp,[R("div",{class:"challenges-header",style:{display:"flex","justify-content":"space-between","align-items":"center"}},[W[21]||(W[21]=R("label",{style:{color:"white"}},"Retos",-1)),R("button",{class:"btn-add-challenge btn-add",onClick:V},"Añade un reto")]),R("div",mp,[(le(!0),ce(Ie,null,Ut(o.value.challenges,(z,ue)=>(le(),ce("div",{key:ue,class:"challenge-item",style:{"margin-top":"12px"}},[R("div",Sp,[Re(R("input",{type:"text","onUpdate:modelValue":C=>z.title=C,placeholder:"Crea una carpeta",class:"challenge-input form-input"},null,8,bp),[[Le,z.title]]),Re(R("input",{type:"text","onUpdate:modelValue":C=>z.command=C,placeholder:"mkdir my_folder",class:"challenge-input form-input mono"},null,8,yp),[[Le,z.command]])]),R("div",Cp,[Re(R("textarea",{"onUpdate:modelValue":C=>z.feedback=C,placeholder:"Mensaje de retroalimentación.",class:"form-textarea",style:{flex:"1"}},null,8,wp),[[Le,z.feedback]])]),R("div",Ep,[R("button",{class:"btn-add",onClick:Vt(C=>J(ue),["prevent"])},"Añade un comando",8,kp),R("button",{class:"btn-delete",onClick:Vt(C=>K(ue),["prevent"])},"Elimina un reto",8,xp)]),z.commands&&z.commands.length?(le(),ce("div",Rp,[(le(!0),ce(Ie,null,Ut(z.commands,(C,M)=>(le(),ce("div",{key:M,style:{display:"flex",gap:"8px","align-items":"center"}},[Re(R("input",{"onUpdate:modelValue":$=>C.comando=$,placeholder:"Comando",class:"form-input"},null,8,Ap),[[Le,C.comando]]),R("button",{class:"btn-delete",onClick:Vt($=>X(ue,M),["prevent"])},"Eliminar",8,Lp)]))),128))])):Ct("",!0)]))),128))])]),R("div",Dp,[B.value?(le(),ce("div",Tp,ve(B.value),1)):Ct("",!0),P.value?(le(),ce("div",Bp,ve(P.value),1)):Ct("",!0),R("div",Op,[R("button",{class:"btn-cancel",onClick:W[7]||(W[7]=z=>y.value=!1)},"Cancel"),R("button",{class:"btn-save",onClick:Z,disabled:A.value},ve(A.value?"Saving...":"Save Lesson"),9,Pp)])])])])])):Ct("",!0),Ee(j_,{visible:c.value,type:g.value,title:v.value,data:r.value,onClose:H,onSave:T,onConfirmDelete:I},null,8,["visible","type","title","data"])]))}}),Ip=Xe(Mp,[["__scopeId","data-v-82820884"]]),Hp=[{path:"/",name:"Login",component:lu,meta:{guestOnly:!0}},{path:"/registro",name:"Registro",component:$u,meta:{guestOnly:!0}},{path:"/confirm-email",name:"ConfirmEmail",component:ud,meta:{guestOnly:!0}},{path:"/dashboard",name:"Dashboard",component:Ou,meta:{requiresAuth:!0}},{path:"/admin",name:"AdminDashboard",component:Ip,meta:{requiresAuth:!0,requiresRole:"admin"}},{path:"/biblioteca",name:"Biblioteca",component:Zu,meta:{requiresAuth:!0}},{path:"/ranking",name:"Ranking",component:Ld,meta:{requiresAuth:!0}},{path:"/configuracion",name:"Configuracion",component:sf,meta:{requiresAuth:!0}},{path:"/leccion/:id",name:"Leccion",component:k_,meta:{requiresAuth:!0}}],Sa=Yh({history:xh(),routes:Hp});Sa.beforeEach((e,t,s)=>{const i=it.isAuthenticated(),c=localStorage.getItem("user"),g=c?JSON.parse(c).rol||JSON.parse(c).role:void 0;if(e.meta.requiresAuth&&!i){s({path:"/"});return}if(e.meta&&e.meta.requiresRole){const v=e.meta.requiresRole;if(v&&g!==v){s({path:"/dashboard"});return}}if(e.meta.guestOnly&&i){s(g==="admin"?{path:"/admin"}:{path:"/dashboard"});return}s()});const ba=jc(Xc);ba.use(Sa);ba.mount("#app");
